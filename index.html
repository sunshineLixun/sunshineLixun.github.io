<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="åšä¸€ä¸ªæœ‰æ–‡è‰ºæ°”æ¯çš„ç¨‹åºçŒ¿">
<meta property="og:type" content="website">
<meta property="og:title" content="Sunshine">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Sunshine">
<meta property="og:description" content="åšä¸€ä¸ªæœ‰æ–‡è‰ºæ°”æ¯çš„ç¨‹åºçŒ¿">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sunshine">
<meta name="twitter:description" content="åšä¸€ä¸ªæœ‰æ–‡è‰ºæ°”æ¯çš„ç¨‹åºçŒ¿">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'åšä¸»'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/"/>

  <title> Sunshine </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Sunshine</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">lxçš„ä¸ªäººåšå®¢</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/08/dispatch-semaphore-t-ä¿¡å·é‡/" itemprop="url">
                  dispatch_semaphore_t ä¿¡å·é‡
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-12-08T16:20:14+08:00" content="2016-12-08">
              2016-12-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Objective-C/" itemprop="url" rel="index">
                    <span itemprop="name">Objective-C</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="dispatch-semaphore-create"><a href="#dispatch-semaphore-create" class="headerlink" title="dispatch_semaphore_create"></a><code>dispatch_semaphore_create</code></h1><p><code>dispatch_semaphore_create(long value)</code> ä¼ å…¥çš„æ˜¯ä¸€ä¸ªæ•°å­—,è¯¥æ•°å­—å¿…é¡»å¤§äºç­‰äº0ã€‚åˆ—å¦‚ä¼ å…¥10ï¼Œè¡¨ç¤ºåˆ›å»ºä¸€ä¸ªä¿¡å·æ€»é‡ä¸º10ä¿¡å·é‡ï¼ˆå°±å¥½æ¯”ä¸€å…±æœ‰10ä¸ªåœè½¦ä½ï¼‰ã€‚å‡å¦‚ä¼ å…¥0</p>
<p>The starting value for the semaphore. Passing a value less than zero will cause NULL to be returned.</p>
<p>åˆ™è¿”å›ä¸ºNULL</p>
<h1 id="dispatch-semaphore-wait"><a href="#dispatch-semaphore-wait" class="headerlink" title="dispatch_semaphore_wait"></a><code>dispatch_semaphore_wait</code></h1><p>è¯¥å‡½æ•°ä¼šä½¿ä¼ å…¥çš„ä¿¡å·é‡å‡1,å½“ä¿¡å·é‡æœ‰ &gt;= 1æ—¶,å°±ä¼šç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚å¦‚æœæ²¡æœ‰,è¯¥çº¿ç¨‹å°±ä¼šä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€ï¼Œå¯é˜»å¡å½“å‰çº¿ç¨‹ã€‚è¯¥å‡½æ•°éœ€è¦ä¼ å…¥å¦ä¸€ä¸ªå‚æ•° </p>
<p><code>#define DISPATCH_TIME_NOW  è¡¨ç¤ºä»ç°åœ¨å¼€å§‹ #define DISPATCH_TIME_FOREVER  è¡¨ç¤ºæ°¸ä¸è¶…æ—¶</code></p>
<h1 id="dispatch-semaphore-single"><a href="#dispatch-semaphore-single" class="headerlink" title="dispatch_semaphore_single"></a><code>dispatch_semaphore_single</code></h1><p>è¯¥å‡½æ•°ä¼šä½¿ä¼ å…¥çš„ä¿¡å·é‡åŠ 1,ä¸<code>dispatch_ semaphore _ wait</code>æˆå¯¹å‡ºç°ã€‚</p>
<p>æ‹¿YYKitæºç æ¥ä¸¾ä¾‹ï¼šåœ¨#import â€œUIButton+YYWebImage.mâ€ä¸­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">- (instancetype)init &#123;</div><div class="line">    self = [super init];</div><div class="line">    //å£°æ˜ä¸€ä¸ªä¿¡å·æ€»é‡ä¸º1ä¿¡å·é‡</div><div class="line">    _lock = dispatch_semaphore_create(1);</div><div class="line">    _dic = [NSMutableDictionary new];</div><div class="line">    return self;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (_YYWebImageSetter *)setterForState:(NSNumber *)state &#123;</div><div class="line"></div><div class="line">//æ˜¯å½“å‰çº¿ç¨‹å¤„äºé˜»å¡çŠ¶æ€,ç›´åˆ°æœ‰ &gt;= 1 ä¿¡å·é‡æ‰ä¼šç»§ç»­æ‰§è¡Œä¸‹é¢çš„å–å€¼æ“ä½œ</div><div class="line">    dispatch_semaphore_wait(_lock, DISPATCH_TIME_FOREVER);</div><div class="line">    _YYWebImageSetter *setter = _dic[state];</div><div class="line">    //ä½¿è¯¥ä¿¡å·é‡åŠ 1ã€‚ä¿æŒä¿¡å·é‡çš„å¹³è¡¡ï¼Œå¦‚æœæ²¡æœ‰ä¿æŒä¿¡å·é‡çš„å¹³è¡¡,å¯èƒ½ä¼šå‡ºç°è«åçš„bug,ç”šè‡³crashã€‚</div><div class="line">    dispatch_semaphore_signal(_lock);</div><div class="line">    return setter;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">- (_YYWebImageSetter *)lazySetterForState:(NSNumber *)state &#123;</div><div class="line">    dispatch_semaphore_wait(_lock, DISPATCH_TIME_FOREVER);</div><div class="line">    _YYWebImageSetter *setter = _dic[state];</div><div class="line">    if (!setter) &#123;</div><div class="line">        setter = [_YYWebImageSetter new];</div><div class="line">        _dic[state] = setter;</div><div class="line">    &#125;</div><div class="line">    dispatch_semaphore_signal(_lock);</div><div class="line">    return setter;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨è¯»å–_YYWebImageSetterè¯¥å‡½æ•°ä¸­ä½¿ç”¨<code>dispatch_semaphore_wait</code>å’Œ<code>dispatch_semaphore_signal</code>ä½¿å½“å‰å‡½æ•°ä¸ºçº¿ç¨‹å®‰å…¨ã€‚å®é™…ä¸Šä¿¡å·é‡å°±æ˜¯é”ï¼Œå®ƒä¸ <code>@synchronized</code> å‡½æ•°çœ‹èµ·æ¥å¾ˆåƒã€‚æ‰€èµ·åˆ°çš„ä½œç”¨å°±æ˜¯è‡³å§‹è‡³ç»ˆåªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹å»è®¿é—®è¯¥å‡½æ•°ã€‚</p>
<p>åœ¨ <a href="http://www.cnblogs.com/snailHL/p/3906112.html" target="_blank" rel="external">è¿™è¾¹æ–‡ç« ä¸­</a>å¾ˆå½¢è±¡çš„æ¯”å–»äº†ä¿¡å·é‡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">å…³äºä¿¡å·é‡ï¼Œä¸€èˆ¬å¯ä»¥ç”¨åœè½¦æ¥æ¯”å–»ã€‚</div><div class="line"></div><div class="line">ã€€ã€€åœè½¦åœºå‰©ä½™4ä¸ªè½¦ä½ï¼Œé‚£ä¹ˆå³ä½¿åŒæ—¶æ¥äº†å››è¾†è½¦ä¹Ÿèƒ½åœçš„ä¸‹ã€‚å¦‚æœæ­¤æ—¶æ¥äº†äº”è¾†è½¦ï¼Œé‚£ä¹ˆå°±æœ‰ä¸€è¾†éœ€è¦ç­‰å¾…ã€‚</div><div class="line"></div><div class="line">ã€€ã€€ä¿¡å·é‡çš„å€¼å°±ç›¸å½“äºå‰©ä½™è½¦ä½çš„æ•°ç›®ï¼Œdispatch_semaphore_waitå‡½æ•°å°±ç›¸å½“äºæ¥äº†ä¸€è¾†è½¦ï¼Œdispatch_semaphore_signal</div><div class="line"></div><div class="line">ã€€ã€€å°±ç›¸å½“äºèµ°äº†ä¸€è¾†è½¦ã€‚åœè½¦ä½çš„å‰©ä½™æ•°ç›®åœ¨åˆå§‹åŒ–çš„æ—¶å€™å°±å·²ç»æŒ‡æ˜äº†ï¼ˆdispatch_semaphore_createï¼ˆlong valueï¼‰ï¼‰ï¼Œ</div><div class="line"></div><div class="line">ã€€ã€€è°ƒç”¨ä¸€æ¬¡dispatch_semaphore_signalï¼Œå‰©ä½™çš„è½¦ä½å°±å¢åŠ ä¸€ä¸ªï¼›è°ƒç”¨ä¸€æ¬¡dispatch_semaphore_waitå‰©ä½™è½¦ä½å°±å‡å°‘ä¸€ä¸ªï¼›</div><div class="line"></div><div class="line">ã€€ã€€å½“å‰©ä½™è½¦ä½ä¸º0æ—¶ï¼Œå†æ¥è½¦ï¼ˆå³è°ƒç”¨dispatch_semaphore_waitï¼‰å°±åªèƒ½ç­‰å¾…ã€‚æœ‰å¯èƒ½åŒæ—¶æœ‰å‡ è¾†è½¦ç­‰å¾…ä¸€ä¸ªåœè½¦ä½ã€‚æœ‰äº›è½¦ä¸»</div><div class="line"></div><div class="line">ã€€ã€€æ²¡æœ‰è€å¿ƒï¼Œç»™è‡ªå·±è®¾å®šäº†ä¸€æ®µç­‰å¾…æ—¶é—´ï¼Œè¿™æ®µæ—¶é—´å†…ç­‰ä¸åˆ°åœè½¦ä½å°±èµ°äº†ï¼Œå¦‚æœç­‰åˆ°äº†å°±å¼€è¿›å»åœè½¦ã€‚è€Œæœ‰äº›è½¦ä¸»å°±åƒæŠŠè½¦åœåœ¨è¿™ï¼Œ</div><div class="line"></div><div class="line">ã€€ã€€æ‰€ä»¥å°±ä¸€ç›´ç­‰ä¸‹å»ã€‚</div></pre></td></tr></table></figure>
<p>ä¸¾ä¸ªğŸŒ°   NSMutableArrayä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„,æˆ‘ä»¬å¯ä»¥ç¨ä½œä¿®é¥°,çº¿ç¨‹å®‰å…¨çš„å»æ›´æ–°æ•°ç»„<br>ã€€<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">NSMutableArray *array = [NSMutableArray array];</div><div class="line"> dispatch_semaphore_t semphore = dispatch_semaphore_create(1);</div><div class="line"> dispatch_queue_t concurrentQueue = dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;,DISPATCH_QUEUE_CONCURRENT);</div><div class="line">      </div><div class="line">      NSLog(@&quot;%f&quot;,CFAbsoluteTimeGetCurrent());</div><div class="line">      dispatch_apply(100, concurrentQueue, ^(size_t i) &#123;</div><div class="line">          dispatch_semaphore_wait(semphore, DISPATCH_TIME_FOREVER);</div><div class="line">         </div><div class="line">          /*</div><div class="line">          @synchronized (array) &#123;</div><div class="line">              [array addObject:[NSNumber numberWithUnsignedInteger:i]];</div><div class="line">          &#125;</div><div class="line">           */</div><div class="line">          </div><div class="line">          [array addObject:[NSNumber numberWithUnsignedInteger:i]];</div><div class="line">          </div><div class="line">          dispatch_semaphore_signal(semphore);</div><div class="line">          </div><div class="line">      &#125;);</div><div class="line">      </div><div class="line">      NSLog(@&quot;%@&quot;,array);</div></pre></td></tr></table></figure></p>
<p>ã€€ã€€
ã€€ã€€</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/14/cocoapodså‡çº§1.1.0/" itemprop="url">
                  cocoapods æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬(1.1.0)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-10-14T20:45:52+08:00" content="2016-10-14">
              2016-10-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/å…¶ä»–/" itemprop="url" rel="index">
                    <span itemprop="name">å…¶ä»–</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>åœ¨Apple å‘å¸ƒswift3.0ä¹‹å ä¸€å¤§éƒ¨åˆ†è‘—åçš„ç¬¬ä¸‰æ–¹å¼€æºåº“,æ¯”å¦‚Alamofire,snapKit ä¹‹åéƒ½é™†ç»­æ›´æ–°åˆ°swift3.0ã€‚å½“æˆ‘ä»¬ç”¨cocoapodsç®¡ç†å®ƒä»¬æˆ–è€…ä½¿ç”¨å®ƒä»¬çš„æ—¶å€™éƒ½ä¼šçœ‹åˆ°è¿™æ ·ä¸€å¥è¯:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CocoaPods 1.1.0+ is required to build Alamofire 4.0.0+.</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CocoaPods 1.1.0+ is required to build SnapKit 3.0.0+.</div></pre></td></tr></table></figure>
<p>éœ€è¦å°†cocoapodsæ›´æ–°åˆ°1.1.0ç‰ˆæœ¬ä»¥ä¸Š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gem install cocoapods --pre //å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯ä¼šé‡åˆ°æƒé™é—®é¢˜</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ERROR:  While executing gem ... (Errno::EPERM) Operation not permitted - /usr/bin/pod</div></pre></td></tr></table></figure>
<p>éœ€è¦è¿™ä¹ˆä¸€å¥è¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo gem install cocoapods --pre -n /usr/local/bin cocoa pods</div></pre></td></tr></table></figure>
<p>åœ¨10.11ä»¥ä¸Šçš„ç³»ç»Ÿä¸­Appleå·²ç»å¯ç”¨æ— æ ¹çš„å®‰è£… stack overflowè¿™ä¹ˆè§£é‡Š:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">This is happening because Apple has enabled rootless on the new install</div></pre></td></tr></table></figure>
<p><a href="http://stackoverflow.com/questions/30812777/cannot-install-cocoa-pods-after-uninstalling-results-in-error/" target="_blank" rel="external">å‚è€ƒé“¾æ¥</a></p>
<p>æŸ¥çœ‹cocoapodså½“å‰ç‰ˆæœ¬</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod --version</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">1.1.0.beta.2</div></pre></td></tr></table></figure>
<p>æ­¤æ—¶cocoapodsç‰ˆæœ¬å°±ä¼šæ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/10/iOSå¼€å‘å°æŠ€å·§(ä¸€)/" itemprop="url">
                  iOSå¼€å‘å°æŠ€å·§(ä¸€)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-10-10T20:44:20+08:00" content="2016-10-10">
              2016-10-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Objective-C/" itemprop="url" rel="index">
                    <span itemprop="name">Objective-C</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="æ”¹å˜UIImagePickerControllerçš„å¯¼èˆªæ¡ä»¥åŠtitleçš„é¢œè‰²"><a href="#æ”¹å˜UIImagePickerControllerçš„å¯¼èˆªæ¡ä»¥åŠtitleçš„é¢œè‰²" class="headerlink" title="æ”¹å˜UIImagePickerControllerçš„å¯¼èˆªæ¡ä»¥åŠtitleçš„é¢œè‰²"></a>æ”¹å˜UIImagePickerControllerçš„å¯¼èˆªæ¡ä»¥åŠtitleçš„é¢œè‰²</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">- (void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated</div><div class="line">&#123;</div><div class="line">   [UIApplication sharedApplication].statusBarStyle = UIStatusBarStyleLightContent;</div><div class="line">    UINavigationBar *bar = [UINavigationBar appearance];</div><div class="line">    NSMutableDictionary *titleDictionary = [NSMutableDictionary dictionary];</div><div class="line">    titleDictionary[NSForegroundColorAttributeName] = [UIColor whiteColor];</div><div class="line">    [bar setTitleTextAttributes:titleDictionary];</div><div class="line">    viewController.navigationController.navigationBar.barTintColor = DIF_BASE_COLOR;</div><div class="line">    viewController.navigationController.navigationBar.tintColor = [UIColor whiteColor];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="åˆ©ç”¨KVCæ”¹å˜TextFieldçš„å ä½ç¬¦çš„é¢œè‰²"><a href="#åˆ©ç”¨KVCæ”¹å˜TextFieldçš„å ä½ç¬¦çš„é¢œè‰²" class="headerlink" title="åˆ©ç”¨KVCæ”¹å˜TextFieldçš„å ä½ç¬¦çš„é¢œè‰²"></a>åˆ©ç”¨KVCæ”¹å˜TextFieldçš„å ä½ç¬¦çš„é¢œè‰²</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[self.nickNameTextField setValue:[UIColor whiteColor] forKeyPath:@&quot;_placeholderLabel.textColor&quot;];</div></pre></td></tr></table></figure>
<h1 id="TextViewçš„å­—æ•°é™åˆ¶"><a href="#TextViewçš„å­—æ•°é™åˆ¶" class="headerlink" title="TextViewçš„å­—æ•°é™åˆ¶"></a>TextViewçš„å­—æ•°é™åˆ¶</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">#define MaxNumberOfDescriptionChars  150</div><div class="line"></div><div class="line">-(void)textViewEditChanged:(NSNotification *)obj&#123;</div><div class="line">    UITextView *textView = (UITextView *)obj.object;</div><div class="line">    NSString *toBeString = textView.text;</div><div class="line">    NSString *lang = [[UITextInputMode currentInputMode] primaryLanguage]; // é”®ç›˜è¾“å…¥æ¨¡å¼</div><div class="line">    if ([lang isEqualToString:@&quot;zh-Hans&quot;]) &#123; // ç®€ä½“ä¸­æ–‡è¾“å…¥ï¼ŒåŒ…æ‹¬ç®€ä½“æ‹¼éŸ³ï¼Œå¥ä½“äº”ç¬”ï¼Œç®€ä½“æ‰‹å†™</div><div class="line">        UITextRange *selectedRange = [textView markedTextRange];</div><div class="line">        //è·å–é«˜äº®éƒ¨åˆ†</div><div class="line">        UITextPosition *position = [textView positionFromPosition:selectedRange.start offset:0];</div><div class="line">        // æ²¡æœ‰é«˜äº®é€‰æ‹©çš„å­—ï¼Œåˆ™å¯¹å·²è¾“å…¥çš„æ–‡å­—è¿›è¡Œå­—æ•°ç»Ÿè®¡å’Œé™åˆ¶</div><div class="line">        if (!position) &#123;</div><div class="line">            if (toBeString.length &gt; MaxNumberOfDescriptionChars) &#123;</div><div class="line">                textView.text = [toBeString substringToIndex:MaxNumberOfDescriptionChars];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        // æœ‰é«˜äº®é€‰æ‹©çš„å­—ç¬¦ä¸²ï¼Œåˆ™æš‚ä¸å¯¹æ–‡å­—è¿›è¡Œç»Ÿè®¡å’Œé™åˆ¶</div><div class="line">        else&#123;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    // ä¸­æ–‡è¾“å…¥æ³•ä»¥å¤–çš„ç›´æ¥å¯¹å…¶ç»Ÿè®¡é™åˆ¶å³å¯ï¼Œä¸è€ƒè™‘å…¶ä»–è¯­ç§æƒ…å†µ</div><div class="line">    else&#123;</div><div class="line">        if (toBeString.length &gt; MaxNumberOfDescriptionChars) &#123;</div><div class="line">            </div><div class="line">            textView.text = [toBeString substringToIndex:MaxNumberOfDescriptionChars];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text&#123;</div><div class="line">    NSString *new = [textView.text stringByReplacingCharactersInRange:range withString:text];</div><div class="line">    self.numLabel.text = [NSString stringWithFormat:@&quot;%zdå­—&quot;,(MaxNumberOfDescriptionChars - new.length)];</div><div class="line">    if(new.length &gt; MaxNumberOfDescriptionChars)&#123;</div><div class="line">         self.numLabel.text = [NSString stringWithFormat:@&quot;%zdå­—&quot;,0];</div><div class="line">        if (![text isEqualToString:@&quot;&quot;]) &#123;</div><div class="line">            return NO;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return YES;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="åˆ¤æ–­å­—ç¬¦ä¸²æˆ–è€…é›†åˆç±»å‹æ˜¯å¦ä¸ºç©º"><a href="#åˆ¤æ–­å­—ç¬¦ä¸²æˆ–è€…é›†åˆç±»å‹æ˜¯å¦ä¸ºç©º" class="headerlink" title="åˆ¤æ–­å­—ç¬¦ä¸²æˆ–è€…é›†åˆç±»å‹æ˜¯å¦ä¸ºç©º"></a>åˆ¤æ–­å­—ç¬¦ä¸²æˆ–è€…é›†åˆç±»å‹æ˜¯å¦ä¸ºç©º</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">+ (BOOL)isEmpty:(id )obj</div><div class="line">&#123;</div><div class="line">    if ([obj isKindOfClass:[NSString class]]) &#123;</div><div class="line">        if(obj == nil || [obj class] == [NSNull null] || [obj isEqualToString:@&quot;&quot;] || [obj isEqualToString:@&quot;(null)&quot;] || [obj isEqualToString:@&quot;NULL&quot;] || [obj isEqualToString:@&quot;&lt;null&gt;&quot;] || [obj isEqualToString:@&quot;null&quot;])</div><div class="line">        &#123;</div><div class="line">            return YES;</div><div class="line">        &#125;</div><div class="line">        return NO;</div><div class="line">    &#125;</div><div class="line">    if (obj == nil || (NSNull *)obj == [NSNull null] || ([obj respondsToSelector:@selector(length)] &amp;&amp; [obj length] == 0) || ([obj respondsToSelector:@selector(count)] &amp;&amp; [obj count] == 0))&#123;</div><div class="line">        return YES;</div><div class="line">    &#125;</div><div class="line">    return NO;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="ç»™UIResponderæ·»åŠ indexPathå±æ€§"><a href="#ç»™UIResponderæ·»åŠ indexPathå±æ€§" class="headerlink" title="ç»™UIResponderæ·»åŠ indexPathå±æ€§"></a>ç»™UIResponderæ·»åŠ indexPathå±æ€§</h1><h2 id="åˆ—å¦‚åœ¨cellä¸­æœ‰button-imageview-å¯ä»¥åˆ©ç”¨è¯¥å±æ€§æ‰¾åˆ°cellä¸­æ”¹è¯¥è§†å›¾"><a href="#åˆ—å¦‚åœ¨cellä¸­æœ‰button-imageview-å¯ä»¥åˆ©ç”¨è¯¥å±æ€§æ‰¾åˆ°cellä¸­æ”¹è¯¥è§†å›¾" class="headerlink" title="åˆ—å¦‚åœ¨cellä¸­æœ‰button imageview å¯ä»¥åˆ©ç”¨è¯¥å±æ€§æ‰¾åˆ°cellä¸­æ”¹è¯¥è§†å›¾"></a>åˆ—å¦‚åœ¨cellä¸­æœ‰button imageview å¯ä»¥åˆ©ç”¨è¯¥å±æ€§æ‰¾åˆ°cellä¸­æ”¹è¯¥è§†å›¾</h2><h3 id="objective-C"><a href="#objective-C" class="headerlink" title="objective - C"></a>objective - C</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">@interface UIResponder (Externtion)</div><div class="line"></div><div class="line">@property (nonatomic, strong) NSIndexPath *indexPath;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">- (void)setIndexPath:(NSIndexPath *)indexPath</div><div class="line">&#123;</div><div class="line">    objc_setAssociatedObject(self, @selector(indexPath), indexPath, OBJC_ASSOCIATION_RETAIN_NONATOMIC);</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">- (NSIndexPath *)indexPath&#123;</div><div class="line">    return objc_getAssociatedObject(self, @selector(indexPath));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="swift"><a href="#swift" class="headerlink" title="swift"></a>swift</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">extension UIResponder&#123;</div><div class="line">    </div><div class="line">   private struct AssociatedKey &#123;</div><div class="line">    static var AssociatedName = &quot;AssociatedName&quot;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    </div><div class="line">    public var indexPath: NSIndexPath?&#123;</div><div class="line">        get&#123;</div><div class="line">           return objc_getAssociatedObject(self, &amp;AssociatedKey.AssociatedName) as? NSIndexPath</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        set&#123;</div><div class="line">            if let newValue = newValue &#123;</div><div class="line">                objc_setAssociatedObject(self, &amp;AssociatedKey.AssociatedName, newValue as NSIndexPath , .OBJC_ASSOCIATION_RETAIN_NONATOMIC)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="UIRefreshControl"><a href="#UIRefreshControl" class="headerlink" title="UIRefreshControl"></a>UIRefreshControl</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">let refresh = UIRefreshControl.init()</div><div class="line">        refresh.tintColor = UIColor.red</div><div class="line">        refresh.attributedTitle = NSAttributedString.init(string: &quot;æ­£åœ¨åŠ è½½&quot;)</div><div class="line">        refresh.addTarget(self, action: #selector(ViewController.refreshTabeleView(sender:)), for: UIControlEvents.valueChanged)</div><div class="line">        </div><div class="line">        </div><div class="line">        tableView.refreshControl = refresh</div><div class="line">        tableView.addSubview(refresh)</div><div class="line">        tableView.reloadData()</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/09/load VS initialize/" itemprop="url">
                  load VS initialize
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-10-09T20:35:30+08:00" content="2016-10-09">
              2016-10-09
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Objective-C/" itemprop="url" rel="index">
                    <span itemprop="name">Objective-C</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="å…±åŒç‚¹"><a href="#å…±åŒç‚¹" class="headerlink" title="å…±åŒç‚¹"></a>å…±åŒç‚¹</h1><p>æ–¹æ³•åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡(ç›¸å¯¹äºruntimeè€Œè¨€)</p>
<h1 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h1><h2 id="loadæ–¹æ³•"><a href="#loadæ–¹æ³•" class="headerlink" title="loadæ–¹æ³•"></a>loadæ–¹æ³•</h2><p>å£°æ˜ä¸€ä¸ªSuperClassç±»ç»§æ‰¿ä¸NSObject </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">@implementation SuperClass</div><div class="line">+ (void) load &#123;</div><div class="line">  NSLog(@&quot;åŠ è½½loadæ–¹æ³•&quot;); </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨main.mæ–‡ä»¶ä¸­å¯¼å…¥å¤´æ–‡ä»¶ <code>#import &quot;SuperClass.h&quot;</code></p>
<p>æ§åˆ¶å°æ‰“å°è¾“å‡º <code>Test[1558:44427] åŠ è½½loadæ–¹æ³•</code></p>
<p>å¾—å‡ºç»“è®º:loadæ˜¯åªè¦ç±»æ‰€åœ¨æ–‡ä»¶è¢«å¼•ç”¨å°±ä¼šè¢«è°ƒç”¨</p>
<h2 id="initializeæ–¹æ³•"><a href="#initializeæ–¹æ³•" class="headerlink" title="initializeæ–¹æ³•"></a>initializeæ–¹æ³•</h2><p>æ‰§è¡Œä»¥ä¸‹ä»£ç </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">+ (void) initialize &#123;</div><div class="line">    NSLog(@&quot;%@ %s&quot;, [self class], __FUNCTION__);</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (void) load &#123;</div><div class="line">    NSLog(@&quot;%@ %s&quot;, [self class], __FUNCTION__);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ§åˆ¶å°æ‰“å°è¾“å‡º</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">SuperClass +[SuperClass initialize]</div><div class="line">SuperClass +[SuperClass load]</div></pre></td></tr></table></figure>
<p>ä¸ºä»€ä¹ˆinitializeæ–¹æ³•ä¼šå†loadæ–¹æ³•å‰è°ƒç”¨å‘¢ï¼Ÿé€šè¿‡Appleçš„æ–‡æ¡£</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">The runtime sends initialize to each class in a program exactly one time just before the class, or any class that inherits from it, is sent its first message from within the program. (Thus the method may never be invoked if the class is not used.) The runtime sends the initialize message to classes in a thread-safe manner. Superclasses receive this message before their subclasses.</div></pre></td></tr></table></figure>
<p>å¾—çŸ¥: initializeæ–¹æ³•åœ¨ç±»çš„ç¬¬ä¸€ä¸ªæ–¹æ³•è¢«è°ƒç”¨å‰è°ƒç”¨ã€‚å³å…ˆæ‰§è¡Œloadæ–¹æ³•ä¸­çš„[self class] å°±ä¼šè°ƒç”¨initializeæ–¹æ³•ã€‚</p>
<h2 id="å­ç±»ä¼šè°ƒç”¨çˆ¶ç±»çš„initialize"><a href="#å­ç±»ä¼šè°ƒç”¨çˆ¶ç±»çš„initialize" class="headerlink" title="å­ç±»ä¼šè°ƒç”¨çˆ¶ç±»çš„initialize"></a>å­ç±»ä¼šè°ƒç”¨çˆ¶ç±»çš„initialize</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">@interface ChildClass : SuperClass</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line"></div><div class="line">@implementation SuperClass</div><div class="line"></div><div class="line">+ (void) initialize &#123;</div><div class="line">    NSLog(@&quot;%@ %s&quot;, [self class], __FUNCTION__);</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line"></div><div class="line">@implementation ChildClass</div><div class="line"></div><div class="line">+ (void)load</div><div class="line">&#123;</div><div class="line">    NSLog(@&quot;%@ %s&quot;, [self class], __FUNCTION__);</div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>è¿˜æ˜¯å¯¼å…¥å¤´æ–‡ä»¶è€Œä¸å»ä½¿ç”¨å®ƒæ§åˆ¶å°æ‰“å°è¾“å‡º</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">SuperClass +[SuperClass initialize]</div><div class="line">ChildClass +[ChildClass initialize]</div><div class="line">ChildClass +[ChildClass load]</div></pre></td></tr></table></figure>
<h2 id="ç±»åˆ«-Category-ä¸­çš„-void-loadçš„-void-initialize"><a href="#ç±»åˆ«-Category-ä¸­çš„-void-loadçš„-void-initialize" class="headerlink" title="ç±»åˆ«(Category)ä¸­çš„+(void)loadçš„+(void)initialize"></a>ç±»åˆ«(Category)ä¸­çš„+(void)loadçš„+(void)initialize</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">/******* Interface *******/</div><div class="line">@interface MainClass : NSObject</div><div class="line">@end</div><div class="line"></div><div class="line">/******* Category Implementation *******/</div><div class="line">@implementation MainClass(Category)</div><div class="line"></div><div class="line">+ (void) load &#123;</div><div class="line">    NSLog(@&quot;%@ %s&quot;, [self class], __FUNCTION__);</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (void) initialize &#123;</div><div class="line">    NSLog(@&quot;%@ %s&quot;, [self class], __FUNCTION__);</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line">@implementation MainClass(OtherCategory)</div><div class="line"></div><div class="line">+ (void) load &#123;</div><div class="line">    NSLog(@&quot;%@ %s&quot;, [self class], __FUNCTION__);</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (void) initialize &#123;</div><div class="line">    NSLog(@&quot;%@ %s&quot;, [self class], __FUNCTION__);</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line">/******* Implementation *******/</div><div class="line">@implementation MainClass</div><div class="line"></div><div class="line">+ (void) load &#123;</div><div class="line">    NSLog(@&quot;%@ %s&quot;, [self class], __FUNCTION__);</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (void) initialize &#123;</div><div class="line">    NSLog(@&quot;%@ %s&quot;, [self class], __FUNCTION__);</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>import ä¹‹å </p>
<p>MainClass +[MainClass(OtherCategory) initialize]<br>MainClass +[MainClass load]<br>MainClass +[MainClass(Category) load]<br>MainClass +[MainClass(OtherCategory) load]</p>
<p>å…ˆæ‰§è¡Œç±»è‡ªèº«çš„å®ç°ï¼Œå†æ‰§è¡Œç±»åˆ«(Category)ä¸­çš„å®ç°</p>
<h2 id="ä¸éœ€è¦è°ƒç”¨-super-load-å’Œ-super-initialize"><a href="#ä¸éœ€è¦è°ƒç”¨-super-load-å’Œ-super-initialize" class="headerlink" title="ä¸éœ€è¦è°ƒç”¨[super load] å’Œ [super initialize]"></a>ä¸éœ€è¦è°ƒç”¨[super load] å’Œ [super initialize]</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">+ (void)initialize &#123;</div><div class="line">    //do initialization thing</div><div class="line">    [super initialize];</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (void) load &#123;</div><div class="line">    //do some loading things</div><div class="line">    [super load];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·å†™æ˜¯å¤šä½™çš„</p>
<h1 id="å¼€å‘è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„"><a href="#å¼€å‘è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„" class="headerlink" title="å¼€å‘è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„"></a>å¼€å‘è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„</h1><p>åœ¨ä½¿ç”¨Method Swizzlingæˆ–è€…éœ€è¦å¯¹ç±»è¿›è¡Œä¸€äº›åˆå§‹åŒ–çš„æ—¶å€™,ä¸€èˆ¬éƒ½åœ¨initializeçš„æ–¹æ³•ä¸­,ç¡®ä¿ä¼šè°ƒç”¨è¿™ä¸ªç±»çš„æ–¹æ³•æ—¶æ‰ä¼šæ‰§è¡Œæ‰€éœ€ä»£ç ,è€Œå†™åœ¨loadæ–¹æ³•ä¸­,å³ä½¿è¿™ä¸ªç±»æ²¡æœ‰è¢«ä½¿ç”¨ä¹Ÿä¼šæ‰§è¡Œç›¸å…³ä»£ç ,åœ¨ä½¿ç”¨Method Swizzlingæ—¶åœ¨å…¨å±€å½±å“åˆ°è¿™ä¸ªç±»ã€‚å†™åœ¨initializeå¯ä»¥è§„é¿ä¸€äº›ä¸å¿…è¦çš„bugã€‚</p>
<p>å‚è€ƒé“¾æ¥:<br><a href="http://www.cnblogs.com/ider/archive/2012/09/29/objective_c_load_vs_initialize.html" target="_blank" rel="external">Objective Cç±»æ–¹æ³•loadå’Œinitializeçš„åŒºåˆ«</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/24/3D - Touchä¹‹Peek & Pop/" itemprop="url">
                  3D - Touchï¼ˆäºŒï¼‰ä¹‹Peek & Pop
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-09-24T10:21:50+08:00" content="2016-09-24">
              2016-09-24
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>åœ¨ä»‹ç»äº†å‰é¢çš„æ¡Œé¢çš„3D-Touch,è¿™ç¯‡æ–‡ç« æ¥ä»‹ç»åº”ç”¨ä¸­ä½¿ç”¨peek &amp; popã€‚ æ¯”å¦‚QQ å¾®ä¿¡ä¸­æ¶ˆæ¯ç•Œé¢é‡å‹cellå°±ä¼šå‡ºç°peek &amp; popã€‚æ¥ä¸‹æ¥å®ç°è¿™ä¸€æ•ˆæœã€‚</p>
<h1 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h1><h2 id="åˆ›å»ºè§†å›¾-sourceView"><a href="#åˆ›å»ºè§†å›¾-sourceView" class="headerlink" title="åˆ›å»ºè§†å›¾(sourceView)"></a>åˆ›å»ºè§†å›¾(sourceView)</h2><p>é¦–å…ˆç”¨tableviewæ¥åšä¾‹å­ã€‚ç”¨storyboardåˆ›å»ºè¡¨,åœ¨è¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var titleArray = [&quot;3D-Touch Objective-C&quot;,&quot;3D-Touch Swift&quot;,&quot;å‰è¨€å¿«æŠ¥:Swiftç»ˆå°†è¶…è¶ŠOC,è¿›è€Œå–ä»£OC&quot;,&quot;Github9æœˆç¼–ç¨‹è¯­è¨€ JS è·ƒå±…ç¬¬ä¸€ä½&quot;]</div></pre></td></tr></table></figure>
<p>åˆ›å»ºä¸€ä¸ªæ•°ç»„æ¥åštableviewçš„æ•°æ®æºã€‚</p>
<h2 id="å®ç°ä»£ç†"><a href="#å®ç°ä»£ç†" class="headerlink" title="å®ç°ä»£ç†"></a>å®ç°ä»£ç†</h2><p>åœ¨å®ç°è¿™ä¸€æ•ˆæœä¹‹å‰,éœ€è¦ä½¿å½“å‰çš„æ§åˆ¶å™¨å®ç°<code>UIViewControllerPreviewingDelegate</code>ä»£ç†å¹¶ä¸”è¦åˆ¤æ–­å½“å‰è®¾å¤‡æ˜¯å¦æ”¯æŒPeek &amp; pop:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">if traitCollection.forceTouchCapability == .available&#123;</div><div class="line">            registerForPreviewing(with: self, sourceView: tableView)</div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<p>ä»£ç†ä¸­æœ‰ä¸¤ä¸ªæ–¹æ³•:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">public func previewingContext(_ previewingContext: UIViewControllerPreviewing, viewControllerForLocation location: CGPoint) -&gt; UIViewController?</div></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥è·å–åˆ°è¦æ˜¾ç¤ºçš„æ˜¯å“ªä¸ªç›®æ ‡viewï¼ˆsourceViewï¼‰ä»¥åŠæ‰‹åŠ¿,å…¶ä¸­æœ‰ä¸ªå±æ€§ï¼ˆsourceRectï¼‰è¿˜å¯ä»¥æ§åˆ¶é‚£å—åŒºåŸŸå±•ç¤ºå‡ºpeekçš„æ•ˆæœ</p>
<p>ç¬¬äºŒä¸ªå‚æ•°location é¡¾åæ€ä¹‰å°±æ˜¯è¦æ§åˆ¶èƒ½äº§ç”Ÿé‡å‹çš„åŒºåŸŸã€‚(ä¸ç¬¬ä¸€ä¸ªå‚æ•°çš„sourceRectä¸åŒ,sourceRectåªæ˜¯å“ªç‰‡åŒºåŸŸè¦å±•ç¤ºpeekæ•ˆæœ,å°±æ˜¯åœ¨å±å¹•ä¸­è§†å›¾å‡¸èµ·çš„é‚£ä¸€éƒ¨åˆ†ã€‚å¦‚æœä¸è®¾ç½®é»˜è®¤å°±æ˜¯æ•´ä¸ªsourceView,è€Œè¿™ä¸ªå‚æ•°åˆ™æ˜¯æ§åˆ¶å“ªäº›åŒºåŸŸèƒ½ä½¿ç”¨peekæ•ˆæœ)ã€‚æ³¨æ„ â€œèƒ½â€ å’Œ â€œè¦â€ã€‚<br>è¿™ä¸ªæ–¹æ³•è¿”å›çš„æ˜¯è¦æ˜¾ç¤ºçš„é‚£ä¸ªæ§åˆ¶å™¨,å°±æ˜¯popé¢„è§ˆçš„é‚£ä¸ªæ§åˆ¶å™¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">public func previewingContext(_ previewingContext: UIViewControllerPreviewing, commit viewControllerToCommit: UIViewController)</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ³•å°±æ˜¯ç”¨æ¥åšè·³è½¬çš„ã€‚</p>
<h2 id="å¼€å§‹å®ç°ä»£ç†æ–¹æ³•"><a href="#å¼€å§‹å®ç°ä»£ç†æ–¹æ³•" class="headerlink" title="å¼€å§‹å®ç°ä»£ç†æ–¹æ³•"></a>å¼€å§‹å®ç°ä»£ç†æ–¹æ³•</h2><p>æˆ‘ä»¬éœ€è¦æ–°å»ºä¸€ä¸ªæ§åˆ¶å™¨æ¥åšpopæ•ˆæœ,è¿”å›å‡ºè¿™ä¸ªæ§åˆ¶å™¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">func previewingContext(_ previewingContext: UIViewControllerPreviewing, viewControllerForLocation location: CGPoint) -&gt; UIViewController? &#123;</div><div class="line">    guard let indexPath = tableView.indexPathForRow(at:location) , let cell = tableView.cellForRow(at: indexPath) else &#123;</div><div class="line">        return nil</div><div class="line">    &#125;</div><div class="line">    let detailVC  = UIStoryboard.init(name: &quot;Main&quot;, bundle: nil).instantiateViewController(withIdentifier: &quot;detail&quot;) as! DetailViewController</div><div class="line">    previewingContext.sourceRect = cell.frame</div><div class="line">    detailVC.text = (cell.textLabel?.text)!</div><div class="line">    return detailVC</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">    func previewingContext(_ previewingContext: UIViewControllerPreviewing, commit viewControllerToCommit: UIViewController) &#123;</div><div class="line">//        self.show(viewControllerToCommit, sender: self)</div><div class="line">        self.navigationController?.pushViewController(viewControllerToCommit, animated: true)</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>show å’Œ pushéƒ½èƒ½å±•ç¤ºå‡ºç›¸åŒçš„æ•ˆæœ</p>
<h2 id="åœ¨æ˜¾ç¤ºçš„æ§åˆ¶å™¨ä¸­è®¾ç½®ä»£ç "><a href="#åœ¨æ˜¾ç¤ºçš„æ§åˆ¶å™¨ä¸­è®¾ç½®ä»£ç " class="headerlink" title="åœ¨æ˜¾ç¤ºçš„æ§åˆ¶å™¨ä¸­è®¾ç½®ä»£ç "></a>åœ¨æ˜¾ç¤ºçš„æ§åˆ¶å™¨ä¸­è®¾ç½®ä»£ç </h2><p>åœ¨detailviewcontrollerä¸­éœ€è¦è¿”å›å‡ºpopå‘ä¸Šæ‹‰çš„é€‰é¡¹ã€‚ï¼ˆä¹Ÿå¯ä»¥ä¸å®ç°ï¼‰å¦å¤–è¦ä¸ºäº†è¦å±•ç¤ºå‡ºæ•°æ®,æˆ‘åœ¨è¯¥è§†å›¾æ§åˆ¶å™¨ä¸­æ·»åŠ äº†ä¸€ä¸ªtextviewæ¥å±•ç¤ºæ•°æ®ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">self.title = &quot;è¯¦æƒ…&quot;</div><div class="line">self.automaticallyAdjustsScrollViewInsets = false</div><div class="line">self.textView.text = text</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">override var previewActionItems: [UIPreviewActionItem]&#123;</div><div class="line">       </div><div class="line">       let action1 = UIPreviewAction.init(title: &quot;å–œæ¬¢&quot;, style: .default) &#123; (UIPreviewAction, UIViewController) in </div><div class="line">       &#125;</div><div class="line">       </div><div class="line">       let action2 = UIPreviewAction.init(title: &quot;æ”¶è—&quot;, style: .default) &#123; (UIPreviewAction, UIViewController) in</div><div class="line">           </div><div class="line">       &#125;</div><div class="line">       </div><div class="line">       let cancle = UIPreviewAction.init(title: &quot;å–æ¶ˆ&quot;, style: .default) &#123; (UIPreviewAction, UIViewController) in</div><div class="line">           </div><div class="line">       &#125;</div><div class="line">       </div><div class="line">       let delete = UIPreviewAction.init(title: &quot;åˆ é™¤&quot;, style: .destructive) &#123; (UIPreviewAction, UIViewController) in</div><div class="line">           </div><div class="line">       &#125;</div><div class="line">   </div><div class="line">       let actionGroup = UIPreviewActionGroup.init(title: &quot;åˆ é™¤&quot;, style: .destructive, actions: [cancle,delete])</div><div class="line">       </div><div class="line">       return [action1, action2 ,actionGroup]</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p>è¿”å›çš„æ•°ç»„ä¸­å­˜çš„æ˜¯UIPreviewActionã€‚è¿™ä¸ªæ•°ç»„å¯ä»¥æ˜¯ä¸ªäºŒç»´æ•°ç»„,æ‰€ä»¥å¯ä»¥å±•ç¤ºå‡ºå¾ˆå¤šé€‰é¡¹ã€‚ä¾‹å­ä¸­è¿”å›çš„å°±æ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ã€‚</p>
<h1 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h1><p>åˆ°æ­¤æ•´ä¸ªæ•ˆæœçš„ä»£ç éƒ½è®¾ç½®å®Œäº†ã€‚æ¥ä¸‹æ¥è¿è¡Œç¨‹åº,çœ‹çœ‹æˆ‘ä»¬çš„æˆæœå§:</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1421047-f73b14b53899dc5b.gif?imageMogr2/auto-orient/strip" alt="3D- Touch.gif"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/23/3D-Touch æ¡Œé¢/" itemprop="url">
                  3D - Touch(ä¸€) æ¡Œé¢
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-09-23T20:07:51+08:00" content="2016-09-23">
              2016-09-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="æ¡Œé¢3D-Touch"><a href="#æ¡Œé¢3D-Touch" class="headerlink" title="æ¡Œé¢3D - Touch"></a>æ¡Œé¢3D - Touch</h1><h2 id="å¿«æ·é™æ€æ“ä½œï¼ˆQuick-actionsï¼‰"><a href="#å¿«æ·é™æ€æ“ä½œï¼ˆQuick-actionsï¼‰" class="headerlink" title="å¿«æ·é™æ€æ“ä½œï¼ˆQuick actionsï¼‰"></a>å¿«æ·é™æ€æ“ä½œï¼ˆQuick actionsï¼‰</h2><p>éœ€è¦åœ¨ <code>info.plist</code>ä¸­é…ç½®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">&lt;key&gt;UIApplicationShortcutItems&lt;/key&gt;</div><div class="line">&lt;array&gt;</div><div class="line">	&lt;dict&gt;</div><div class="line">		&lt;key&gt;UIApplicationShortcutItemIconType&lt;/key&gt;</div><div class="line">		&lt;string&gt;UIApplicationShortcutIconTypeShare&lt;/string&gt;</div><div class="line">		&lt;key&gt;UIApplicationShortcutItemTitle&lt;/key&gt;</div><div class="line">		&lt;string&gt;å¼¹ä¸€å¼¹&lt;/string&gt;</div><div class="line">		&lt;key&gt;UIApplicationShortcutItemType&lt;/key&gt;</div><div class="line">		&lt;string&gt;com.yuwubao.search&lt;/string&gt;</div><div class="line">	&lt;/dict&gt;</div><div class="line">	&lt;dict&gt;</div><div class="line">		&lt;key&gt;UIApplicationShortcutItemIconType&lt;/key&gt;</div><div class="line">		&lt;string&gt;UIApplicationShortcutIconTypeShare&lt;/string&gt;</div><div class="line">		&lt;key&gt;UIApplicationShortcutItemTitle&lt;/key&gt;</div><div class="line">		&lt;string&gt;æ‘‡ä¸€æ‘‡&lt;/string&gt;</div><div class="line">		&lt;key&gt;UIApplicationShortcutItemType&lt;/key&gt;</div><div class="line">		&lt;string&gt;com.yuwubao.search&lt;/string&gt;</div><div class="line">	&lt;/dict&gt;</div><div class="line">	&lt;dict&gt;</div><div class="line">		&lt;key&gt;UIApplicationShortcutItemIconType&lt;/key&gt;</div><div class="line">		&lt;string&gt;UIApplicationShortcutIconTypeShare&lt;/string&gt;</div><div class="line">		&lt;key&gt;UIApplicationShortcutItemTitle&lt;/key&gt;</div><div class="line">		&lt;string&gt;æ‰«ä¸€æ‰«&lt;/string&gt;</div><div class="line">		&lt;key&gt;UIApplicationShortcutItemType&lt;/key&gt;</div><div class="line">		&lt;string&gt;com.yuwubao.search&lt;/string&gt;</div><div class="line">	&lt;/dict&gt;</div><div class="line">&lt;/array&gt;</div></pre></td></tr></table></figure>
<p>å…³äºå‡ ä¸ªå¿…é¡»è¦å¡«å†™çš„é¡¹ï¼š</p>
<ol>
<li>UIApplicationShortcutItemTitle:  è¡¨ç¤ºè¦æ˜¾ç¤ºçš„æ ‡é¢˜ã€‚å±•ç¤ºåœ¨ä½ çš„quick actionèœå•ä¸­çš„actionæ ‡é¢˜ã€‚å¦‚æœæ ‡é¢˜ä¸€è¡Œæ— æ³•æ˜¾ç¤ºå¹¶ä¸”ä½ æ²¡æœ‰æŒ‡å®šå­æ ‡é¢˜é‚£ä¹ˆå®ƒå°†æ˜¾ç¤ºä¸¤è¡Œã€‚å¯ä»¥ä½¿ç”¨æœ¬åœ°åŒ–(localised)ã€‚</li>
<li>UIApplicationShortcutItemType:  ä½œä¸ºUIApplicationShortcutItemçš„ä¸€éƒ¨åˆ†å‘é€ç»™ä½ çš„åº”ç”¨ã€‚å¯ä»¥ä¾æ®ä¸åŒçš„shortcutç±»å‹ç”¨äºæ‰§è¡Œä½ çš„actionsã€‚å‘½åè§„åˆ™ä¸ºï¼š com.å…¬å¸å.appå.å›¾æ ‡ä½œç”¨å</li>
</ol>
<p>å…³äºé€‰å¡«çš„é¡¹ï¼š</p>
<ol>
<li>UIApplicationShortcutItemIconType:  å®šä¹‰å†…ç½®å›¾æ ‡ç±»å‹çš„å­—ç¬¦ä¸²ï¼Œå¯é€‰ç±»å‹åˆ—è¡¨å¯ä»¥æŸ¥è¯¢<a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplicationShortcutIcon_Class/index.html#//apple_ref/c/tdef/UIApplicationShortcutIconType" target="_blank" rel="external">è¿™é‡Œ</a></li>
<li>UIApplicationShortcutItemSubtitle:  ç”¨æˆ·å±•ç¤ºä½ çš„actionsçš„å­æ ‡é¢˜çš„å­—ç¬¦ä¸²ã€‚å®ƒå°†æ˜¾ç¤ºåœ¨ä½ çš„quick actionsæ ‡é¢˜çš„ä¸‹æ–¹ã€‚å¯ä»¥æœ¬åœ°åŒ–ã€‚</li>
<li>UIApplicationShortcutItemIconFileï¼šä¸€ä¸ªæŒ‡å®šAssets Catalogæˆ–è€…Bundleä¸­çš„å­—ç¬¦ä¸²ã€‚å¦‚æœæŒ‡å®šäº†æ­¤é”®ï¼Œåˆ™ç³»ç»Ÿä¼šå¿½ç•¥UIApplicationShortcutItemIconType</li>
<li>UIApplicationShortcutItemUserInfoï¼šä¸€ä¸ªå­—å…¸ï¼ŒåŒ…å«ä½ æƒ³è¦è§£æçš„å…¶ä»–ä¿¡æ¯ã€‚</li>
</ol>
<h2 id="ç¬¬äºŒæ­¥"><a href="#ç¬¬äºŒæ­¥" class="headerlink" title="ç¬¬äºŒæ­¥"></a>ç¬¬äºŒæ­¥</h2><p>åœ¨å…¥å£ç±»æ–‡ä»¶ï¼ˆappDelegateï¼‰ä¸­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -&gt; Bool &#123;</div><div class="line">        </div><div class="line">        //æ£€æµ‹ç‰ˆæœ¬</div><div class="line">        if UIDevice.current.systemVersion &gt;= &quot;9.0&quot; &#123;</div><div class="line">            let shortcutItem = launchOptions?[UIApplicationLaunchOptionsKey.shortcutItem] as? UIApplicationShortcutItem</div><div class="line">            if let shortcutItem = shortcutItem&#123;</div><div class="line">                self.quickActionWithShortcutItem(shortcutItem: shortcutItem)</div><div class="line">            &#125;</div><div class="line">            </div><div class="line">        &#125;</div><div class="line"></div><div class="line">        return true</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>è¿˜è¦å®ç°å¦ä¸€ä¸ªæ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//MARK: - 3D-Touch</div><div class="line"> func application(_ application: UIApplication, performActionFor shortcutItem: UIApplicationShortcutItem, completionHandler: @escaping (Bool) -&gt; Void) &#123;</div><div class="line">     self.quickActionWithShortcutItem(shortcutItem: shortcutItem)</div><div class="line">     completionHandler(true)</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<p>ç”±äºä»£ç çš„å†—ä½™ éœ€è¦å®šä¹‰ä¸€ä¸ªç§æœ‰çš„æ–¹æ³• å¯ä»¥æ ¹æ®<br><code>localizedTitle</code> æˆ–è€… <code>type</code> æ¥åŒºåˆ«ç‚¹å‡»çš„æ˜¯å“ªä¸ªã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">private  func quickActionWithShortcutItem(shortcutItem: UIApplicationShortcutItem)&#123;</div><div class="line">      let nav = self.window?.rootViewController as? UINavigationController</div><div class="line">      if shortcutItem.localizedTitle == &quot;å¼¹ä¸€å¼¹&quot;&#123;</div><div class="line">          </div><div class="line">      &#125;else if shortcutItem.localizedTitle == &quot;æ‘‡ä¸€æ‘‡&quot;&#123;</div><div class="line">          </div><div class="line">          let detailVC = UIStoryboard.init(name: &quot;Main&quot;, bundle: nil).instantiateViewController(withIdentifier: &quot;detail&quot;) as! DetailViewController</div><div class="line">          nav!.pushViewController(detailVC, animated: true)</div><div class="line">          </div><div class="line">      &#125;else&#123;</div><div class="line">          </div><div class="line">          nav!.pushViewController(ThirdViewController(), animated: true)</div><div class="line">      &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>åˆ°è¿™é‡Œå®Œå…¨è®¾ç½®å¥½äº†æ¡Œé¢å›¾æ ‡çš„3D - Touchã€‚ ç”±äºæœ€è¿‘ç³»ç»Ÿå‡çº§åˆ°äº†iOS10 æ¡Œé¢iconçš„3D - Touch æ–°å¢äº†widgetã€‚æ¥ä¸‹æ¥å°±æ¥æ—¶é€‚é…iOS10ã€‚</p>
<h1 id="Extention"><a href="#Extention" class="headerlink" title="Extention"></a>Extention</h1><p>(æ›´å¤šä¿¡æ¯ç§»æ­¥åˆ°<a href="https://onevcat.com/2014/08/notification-today-widget/" target="_blank" rel="external">è¿™é‡Œ</a>)(å–µç¥åšå®¢)</p>
<p>Extensionsä¸æ˜¯ç‹¬ç«‹çš„åº”ç”¨ç¨‹åºã€‚Extensionså¿…é¡»ä¾èµ–äºä¸€ä¸ªhost appï¼Œå«ä½œå®¿ä¸»APPï¼ŒåŒæ—¶ä»–ä»¬çš„ç”Ÿå‘½å‘¨æœŸç›¸äº’ç‹¬ç«‹ï¼Œå¹¶ä¸”å¯ä»¥äº’ç›¸è§¦å‘äº‹ä»¶ã€‚ä¸€ä¸ªå®¿ä¸»APPå¯ä»¥åŒ…å«å¤šä¸ªExtensionsã€‚æœ¬ç¯‡æ–‡ç« ä¸»è¦æ˜¯ Today Extentionã€‚åˆ›å»ºæ–¹æ³• <code>File-&gt;New-&gt;Target</code></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1421047-2c7a1a352ceedf42.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20160923-0@2x.png"></p>
<p>å·¥ç¨‹ä¸­ä¼šå¤šå‡ºè¿™äº›æ–‡ä»¶</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1421047-8d30c066607b9592.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20160923-1@2x.png"></p>
<p>åœ¨MainInterface.storyboardä¸­æˆ‘ä»¬å¯ä»¥å®šåˆ¶UIã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1421047-4ac148040ca13437.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20160923-3@2x.png"></p>
<p>å½“æˆ‘ä»¬æƒ³çº¯ä»£ç æ„å»ºUIæ—¶,åœ¨ä¸Šå›¾æ˜¾ç¤ºçš„Info.plistä¸­NSExtensionéœ€è¦å°†NSExtensionMainStoryboardåˆ æ‰,è§£é™¤ä¸storyboardçš„å…³è”</p>
<p>ä¾‹å­ä¸­ç”¨çš„storyboardæ„å»ºUIã€‚ å½“æˆ‘ä»¬éœ€è¦ä¸APPé€šä¿¡æ—¶ã€‚éœ€è¦ç”¨åˆ° URL Shchemesã€‚</p>
<h2 id="é¦–å…ˆç»™labelæ·»åŠ æ‰‹åŠ¿"><a href="#é¦–å…ˆç»™labelæ·»åŠ æ‰‹åŠ¿" class="headerlink" title="é¦–å…ˆç»™labelæ·»åŠ æ‰‹åŠ¿"></a>é¦–å…ˆç»™labelæ·»åŠ æ‰‹åŠ¿</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">widgetLabel.addGestureRecognizer(UITapGestureRecognizer.init(target: self</div><div class="line">            , action: #selector(TodayViewController.widgetLabelAction)))</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@objc private  func widgetLabelAction() -&gt; Void &#123;</div><div class="line">       extensionContext?.open(NSURL(string: &quot;simple://finished&quot;) as! URL, completionHandler: nil)</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<h2 id="è®¾ç½®URL-Schemes"><a href="#è®¾ç½®URL-Schemes" class="headerlink" title="è®¾ç½®URL Schemes"></a>è®¾ç½®URL Schemes</h2><p><img src="http://upload-images.jianshu.io/upload_images/1421047-a28aeabf864d2fc2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20160923-4@2x.png"></p>
<p>è¿è¡Œç¨‹åº</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1421047-108a96a4f30cd1bf.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="IMG_0609.PNG"></p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨widgetä¸­æ·»åŠ è‡ªå·±çš„APPæ˜¾ç¤ºä¿¡æ¯äº†</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/20/SwiftåŸºç¡€/" itemprop="url">
                  SwiftåŸºç¡€
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-09-20T22:54:59+08:00" content="2016-09-20">
              2016-09-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="strideä¸å¾ªç¯ç»“æ„"><a href="#strideä¸å¾ªç¯ç»“æ„" class="headerlink" title="strideä¸å¾ªç¯ç»“æ„"></a>strideä¸å¾ªç¯ç»“æ„</h1><p>åŒºé—´è¿ç®—ç¬¦<br>å¼€åŒºé—´ï¼š[a,b]<br>é—­åŒºé—´ï¼š[a,b)<br>ä¸¾ä¾‹ï¼š<br>1.å¼€åŒºé—´</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">for index in 1..&lt;10&#123;</div><div class="line">    index;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>indexçš„å€¼ä¸€æ¬¡ä¸º:0~9;å¯ä»¥ç”¨æ­¤æ–¹æ³•éå†æ•°ç»„ã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var scoreArr = [22,33,44,55,66,77,88,99];</div><div class="line">var count = scoreArr.count;</div><div class="line">for index in 0 ..&lt; count&#123;</div><div class="line">    var s = scoreArr[index];</div><div class="line">    print(s);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>2.é—­åŒºé—´</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">for index in 1...10&#123;</div><div class="line">    index;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>indexçš„å€¼ä»¥æ­¤ä¸ºï¼š0~10</p>
<h1 id="åœ¨swift3-0ä¸­strideè¯­æ³•å·²ç»æ”¹ä¸ºè¿™æ ·-stride-from-to-by-å‡½æ•°å’Œstride-from-through-by-å‡½æ•°"><a href="#åœ¨swift3-0ä¸­strideè¯­æ³•å·²ç»æ”¹ä¸ºè¿™æ ·-stride-from-to-by-å‡½æ•°å’Œstride-from-through-by-å‡½æ•°" class="headerlink" title="åœ¨swift3.0ä¸­strideè¯­æ³•å·²ç»æ”¹ä¸ºè¿™æ ·:stride(from: , to: , by: )å‡½æ•°å’Œstride(from: , through: , by: )å‡½æ•°"></a>åœ¨swift3.0ä¸­strideè¯­æ³•å·²ç»æ”¹ä¸ºè¿™æ ·:stride(from: , to: , by: )å‡½æ•°å’Œstride(from: , through: , by: )å‡½æ•°</h1><p>stride æ–¹æ³•å®šä¹‰åœ¨ Strideable åè®®ä¸­,swift3.0åºŸå¼ƒäº†ä¼ ç»ŸCçš„forå¾ªç¯ä¹‹åï¼Œå®šä¹‰çš„å…¨æ–°æ–¹æ³•ã€‚<br>stride(from: , to: , by: )ç›¸å½“äºå¼€åŒºé—´ï¼›<br>stride(from: , through: , by: )ç›¸å½“äºé—­åŒºé—´<br>ä¸ªäººç†è§£ï¼š<br>è¡¨ç¤ºä»åˆå§‹æ•°å€¼åˆ°ç›®æ ‡æ•°å€¼,by:è¡¨ç¤ºè·¨è¶Šçš„è¿›åº¦ï¼ˆå¯åŠ å¯å‡ï¼‰ã€‚<br>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">for index in stride(from: 10, through: 0, by: -1)&#123;</div><div class="line">    print(index);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/1421047-c9a76252e83621c3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2016-09-07 ä¸‹åˆ10.03.33.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">for index in stride(from: 10, to: 0, by: -1)&#123;</div><div class="line">    print(index);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>indexçš„æ•°å€¼:<br>index â€“10<br>index â€“9<br>index â€“8<br>index â€“7<br>index â€“6<br>index â€“5<br>index â€“4<br>index â€“3<br>index â€“2<br>index â€“1</p>
<h2 id="ç”¨strideæ–¹æ³•éå†scoreArræ•°ç»„"><a href="#ç”¨strideæ–¹æ³•éå†scoreArræ•°ç»„" class="headerlink" title="ç”¨strideæ–¹æ³•éå†scoreArræ•°ç»„"></a>ç”¨strideæ–¹æ³•éå†scoreArræ•°ç»„</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">for i in stride(from: 0, to: scoreArr.count, by: 1)&#123;</div><div class="line">    var arr = scoreArr[i];</div><div class="line">    print(arr);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/20/å¤šç§æ–¹æ³•ä½¿tableViewçš„Headerä¸‹æ‹‰æ”¾å¤§/" itemprop="url">
                  å¤šç§æ–¹æ³•ä½¿tableViewçš„Headerä¸‹æ‹‰æ”¾å¤§
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-09-20T22:15:16+08:00" content="2016-09-20">
              2016-09-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Objective-C/" itemprop="url" rel="index">
                    <span itemprop="name">Objective-C</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>çœ‹äº†<a href="http://www.jianshu.com/users/b09c3959ab3b/latest_articles" target="_blank" rel="external">å³¥å–</a>åŒå­¦çš„è¿™ç¯‡æ–‡ç« <a href="http://www.jianshu.com/p/859e3ef76b05" target="_blank" rel="external">ã€ä¸€è¡Œä»£ç å¿«é€Ÿé›†æˆtableViewå¤´éƒ¨ç¼©æ”¾è§†å›¾ã€‘</a>ä¹‹å ã€‚æƒ³ç€è‡ªå·±ç”¨å…¶ä»–çš„æ–¹æ³•æ¥å®ç°è¿™ä¸€æ•ˆæœï¼Œäºæ˜¯ä¹æƒ³åˆ°</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CGAffineTransformMakeScale</div></pre></td></tr></table></figure>
<p>è¿™ä¸€æ–¹æ³•ã€‚</p>
<h1 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h1><p><img src="http://upload-images.jianshu.io/upload_images/1421047-f9cf98990ebda6b2.gif?imageMogr2/auto-orient/strip" alt="ä¸‹æ‹‰æ”¾å¤§.gif"></p>
<h1 id="å¼€å§‹å®ç°"><a href="#å¼€å§‹å®ç°" class="headerlink" title="å¼€å§‹å®ç°"></a>å¼€å§‹å®ç°</h1><p>åœ¨è‡ªå·±å†™çš„è¿‡ç¨‹ä¸­å‘ç°äº†ä¸€äº›é—®é¢˜, ç›´æ¥æŠŠ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">self.tableView.tableHeaderView = self.imageView</div></pre></td></tr></table></figure>
<p>ä¹‹åå¹¶ä¸èƒ½è¾¾åˆ°æƒ³è¦çš„æ•ˆæœã€‚æ•´å¼ å›¾ç‰‡frameéƒ½éšç€tableviewçš„æ‹–åŠ¨è€Œæ”¹å˜ã€‚å¹¶ä¸æ˜¯åƒæ˜¯å›ºå®šåœ¨é‚£é‡Œã€‚tableviewçš„é¡¶éƒ¨ä¼šå‡ºç°å¤§éƒ¨åˆ†ç©ºç™½ã€‚ç„¶åæˆ‘ä»”ç»†çœ‹äº†ä¸€éæºç ã€‚å‘ç°åšæ³•æ˜¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[self.tableView insertSubview:imageView atIndex:0];</div></pre></td></tr></table></figure>
<p>æ¥ç€æŠŠä¸€ä¸ªé€æ˜viewå¡«å……åˆ°tableviewçš„header viewä¸­ã€‚   </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 0, 200)];    </div><div class="line">headerView.backgroundColor = [UIColor clearColor];    </div><div class="line">self.tableView.tableHeaderView = headerView;</div></pre></td></tr></table></figure>
<p>æ‰¾åˆ°è¿™ä¸€æŠ€å·§ä¹‹åã€‚è‡ªå·±å†™äº†ä¸€ä¸ªç¨å¾®ç®€å•çš„demoã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@<span class="string">"header"</span>]];</div><div class="line">imageView.frame = CGRectMake(0, 0, self.view.frame.size.width, imageViewH);</div><div class="line">[self.tableView insertSubview:imageView atIndex:0];</div><div class="line">self.imageView = imageView;</div><div class="line"></div><div class="line">UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 0, imageViewH)];</div><div class="line">headerView.backgroundColor = [UIColor clearColor];</div><div class="line">self.tableView.tableHeaderView = headerView;</div></pre></td></tr></table></figure>
<p>åœ¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (void)scrollViewDidScroll:(UIScrollView *)scrollView</div></pre></td></tr></table></figure>
<p>æ–¹æ³•ä¸­è¿™ä¹ˆå†™:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">CGFloat offsetY = scrollView.contentOffset.y;</div><div class="line">  <span class="keyword">if</span> (offsetY &lt; 0) &#123;</div><div class="line">      self.imageView.frame = CGRectMake(offsetY, offsetY, scrollView.bounds.size.width - offsetY * 2, imageViewH - offsetY);</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">      self.imageView.frame = CGRectMake(0, 0, scrollView.bounds.size.width, imageViewH);</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>åŸç†ä¸€æ¨¡ä¸€æ ·,æ‹¿åˆ°scrollviewçš„åç§»é‡è®¡ç®—ä¸‹æ‹‰imageviewçš„frame,ä½¿å…¶imageviewçš„å®½é«˜å¢å¤§ã€‚ä¸Šæ‹‰çš„æ—¶å€™æ¢å¤åŸæ¥çš„frameã€‚</p>
<h1 id="å¦ä¸€ç§æ–¹æ³•"><a href="#å¦ä¸€ç§æ–¹æ³•" class="headerlink" title="å¦ä¸€ç§æ–¹æ³•"></a>å¦ä¸€ç§æ–¹æ³•</h1><p>è¿˜æ˜¯åœ¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (void)scrollViewDidScroll:(UIScrollView *)scrollView</div></pre></td></tr></table></figure>
<p>æ–¹æ³•ä¸­æ‹¿åˆ°scrollviewçš„åç§»é‡è®¡ç®—ç¼©æ”¾ç³»æ•°</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">CGFloat offsetY = scrollView.contentOffset.y + scrollView.contentInset.top;</div><div class="line">CGFloat scale = 1.0;</div><div class="line"><span class="keyword">if</span> (offsetY &lt; 0) &#123;</div><div class="line">    //å‘ä¸‹æ‹‰</div><div class="line">    scale = MIN(2.5, 1 - offsetY / imageViewH);</div><div class="line">    self.imageView.transform = CGAffineTransformMakeScale(scale, scale);</div><div class="line">    CGRect frame = self.imageView.frame;</div><div class="line">    frame.origin.y = offsetY;</div><div class="line">    self.imageView.frame = frame;</div><div class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(offsetY &gt; 0)</div><div class="line">&#123;</div><div class="line">    //å‘ä¸Šæ‹‰</div><div class="line">    CGRect frame = self.imageView.frame;</div><div class="line">    frame.origin.y = -offsetY/imageViewH;</div><div class="line">    self.imageView.frame = frame;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å†å‘ä¸Šæ‹‰çš„è¿‡ç¨‹ä¸­è¦ä¿è¯imageviewä¸ä¼šè¿›è¡Œç¼©æ”¾ï¼Œåªæ˜¯æ”¹å˜ä¸‹imageviewçš„yè½´çš„å€¼ã€‚</p>
<h1 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h1><p>æ„Ÿè°¢<a href="http://www.jianshu.com/users/b09c3959ab3b/latest_articles" target="_blank" rel="external">å³¥å–</a>åŒå­¦æä¾›çš„æ€è·¯ã€‚demoåœ°å€:<a href="https://github.com/sunshineLixun/tableViewHeaderScale" target="_blank" rel="external">æˆ³æˆ‘</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.png"
               alt="Sunshine" />
          <p class="site-author-name" itemprop="name">Sunshine</p>
          <p class="site-description motion-element" itemprop="description">åšä¸€ä¸ªæœ‰æ–‡è‰ºæ°”æ¯çš„ç¨‹åºçŒ¿</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">8</span>
              <span class="site-state-item-name">æ—¥å¿—</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">åˆ†ç±»</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/sunshineLixun" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sunshine</span>
</div>

<div class="powered-by">
  ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
