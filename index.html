<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta property="og:type" content="website">
<meta property="og:title" content="Hello Li">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hello Li">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hello Li">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'åšä¸»'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/"/>

  <title> Hello Li </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Hello Li</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">lxçš„ä¸ªäººåšå®¢</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/08/30/upload/google87f79bd82369149b/" itemprop="url">
                  æœªå‘½å
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2018-08-30T15:37:53+08:00" content="2018-08-30">
              2018-08-30
            </time>
          </span>

          

          
            
          

          

          
          
             <span id="/2018/08/30/upload/google87f79bd82369149b/" class="leancloud_visitors" data-flag-title="">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="upload/google87f79bd82369149b.html">text</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/06/19/Reactæ›´æ–°propsä¸Echartså®é™…åº”ç”¨/" itemprop="url">
                  Reactæ›´æ–°propsä¸echartså®é™…åº”ç”¨
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2018-06-19T17:33:46+08:00" content="2018-06-19">
              2018-06-19
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/React/" itemprop="url" rel="index">
                    <span itemprop="name">React</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          
             <span id="/2018/06/19/Reactæ›´æ–°propsä¸Echartså®é™…åº”ç”¨/" class="leancloud_visitors" data-flag-title="Reactæ›´æ–°propsä¸echartså®é™…åº”ç”¨">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="å…³äºEchartsåˆå§‹åŒ–"><a href="#å…³äºEchartsåˆå§‹åŒ–" class="headerlink" title="å…³äºEchartsåˆå§‹åŒ–"></a>å…³äºEchartsåˆå§‹åŒ–</h1><p>åœ¨reacté¡¹ç›®ä¸­å¼•ç”¨Echartsç»„ä»¶ï¼Œéœ€è¦åœ¨ <code>render()</code>æ–¹æ³•ä¸­è¿”å›ä¸€ä¸ª<code>div</code>å…ƒç´ ã€‚å› ä¸ºEchartsåº•å±‚ä½¿ç”¨Canvasç»˜å›¾ï¼Œæ‰€ä»¥<code>div</code>å…ƒç´ çš„å®½é«˜ä¸€å®šæ˜¯å·²çŸ¥çš„ã€‚åˆ—å¦‚ï¼š</p>
<p>.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">render() &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div id=<span class="string">"pieCharts"</span> className=&#123;styles.pieCharts&#125;&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">componentDidMount() &#123;</span></span><br><span class="line"><span class="regexp">  let myChart = echarts.init(document.getElementById('pieCharts'))</span></span><br><span class="line"><span class="regexp">  let options = this.setOptions()</span></span><br><span class="line"><span class="regexp">  myChart.setOption(options)</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">setOptions() &#123;</span></span><br><span class="line"><span class="regexp">  const &#123;take_off, spray_off, spray_on, hand, total&#125; = this.props</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  /</span>*</span><br><span class="line">    è¯¥æ–¹æ³•ä¸­æ‹¿åˆ°çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„propsä¹‹åï¼Œå¼€å§‹å·´æ‹‰å·´æ‹‰æŒ‰ç…§echartså®˜æ–¹æ–‡æ¡£è®¾ç½®éœ€è¦çš„å‚æ•°ã€‚</span><br><span class="line">  *<span class="regexp">/</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>.less</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.pieCharts &#123;</span><br><span class="line">  width: 400px;</span><br><span class="line">  height: 250px;</span><br><span class="line">  margin: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åŠ¨æ€æ›´æ–°Echartsæ•°æ®å‚æ•°"><a href="#åŠ¨æ€æ›´æ–°Echartsæ•°æ®å‚æ•°" class="headerlink" title="åŠ¨æ€æ›´æ–°Echartsæ•°æ®å‚æ•°"></a>åŠ¨æ€æ›´æ–°Echartsæ•°æ®å‚æ•°</h1><p>å¦‚æœè¯¥ç»„ä»¶åªæ˜¯é™æ€å»å±•ç¤ºæŸä¸ªæ—¶é—´æ®µçš„æ•°æ®ï¼Œå®Œå…¨æ»¡è¶³éœ€æ±‚ã€‚ä½†æ˜¯å¦‚æœæ˜¯åŠ¨æ€çš„å»ç”Ÿæˆæ•°æ®æ—¶ï¼Œä¹Ÿå°±æ˜¯propsæ¯æ—¶æ¯åˆ»éƒ½åœ¨æ”¹å˜ï¼Œé‚£ä¹ˆä¼šå‘ç°echartsæ‰€å±•ç¤ºçš„æ•°æ®æ ¹æœ¬æ²¡æœ‰å‘ç°å˜åŒ–ã€‚æˆ‘ä»¬éƒ½çŸ¥é“<code>componentDidMount</code>æ–¹æ³•åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå°±æ˜¯åœ¨ç»„ä»¶æŒ‚è½½å®Œæˆä¹‹åè°ƒç”¨ã€‚è§£å†³è¯¥é—®é¢˜å°±éœ€è¦ç”¨åˆ°æ›´æ–°propsæˆ–è€…stateé‚£ä¸€å¥—æµç¨‹ã€‚(Reactç”Ÿå‘½å‘¨æœŸå‚è€ƒReactå®˜ç½‘)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">shouldComponentUpdate(nextProps) &#123;</span><br><span class="line">  <span class="keyword">if</span> (nextProps.take_off !== <span class="keyword">this</span>.take_off ||</span><br><span class="line">    nextProps.spray_off !== <span class="keyword">this</span>.spray_off ||</span><br><span class="line">    nextProps.spray_on !== <span class="keyword">this</span>.spray_on ||</span><br><span class="line">    nextProps.hand !== <span class="keyword">this</span>.hand) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">componentDidUpdate() &#123;</span><br><span class="line">  <span class="keyword">const</span> dom = <span class="built_in">document</span>.getElementById(<span class="string">'pieCharts'</span>)</span><br><span class="line">  <span class="keyword">var</span> myChart = echarts.getInstanceById(dom.getAttribute(<span class="string">'_echarts_instance_'</span>));</span><br><span class="line">  myChart.setOption(<span class="keyword">this</span>.setOptions())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>shouldComponentUpdate</code>åˆ¤æ–­å½“å‰ç»„ä»¶æ˜¯å¦éœ€è¦æ›´æ–°ï¼Œä¸€èˆ¬å¤šç”¨äºæ€§èƒ½ä¼˜åŒ–ï¼Œå‡å°‘ä¸å¿…è¦çš„ç»„ä»¶åˆ·æ–°æ¬¡æ•°ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæ¯”è¾ƒçˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„propsä¸ä¸Šä¸€æ¬¡propsçš„å¼‚åŒã€‚å½“è¿”å›trueæ—¶ï¼Œæˆ‘ä»¬åœ¨<code>componentDidUpdate</code>æ–¹æ³•ä¸­å–åˆ°echartsçš„å®ä¾‹ï¼Œé‡æ–°å¯¹echartsè®¾ç½®æ•°æ®å‚æ•°ã€‚</p>
<h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><p>éœ€æ±‚ä¸éš¾å®ç°ï¼Œæœ€ä¸»è¦çš„è¿˜æ˜¯è¦å¯¹Reactçš„ç”Ÿå‘½å‘¨æœŸæœ‰è¯¦ç»†çš„è®¤çŸ¥ã€‚</p>
<p><img src="https://raw.githubusercontent.com/sunshineLixun/bloggerImage/master/imagesreact_life_cycle.png" alt="Reactç”Ÿå‘½å‘¨æœŸ"></p>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://hackernoon.com/reactjs-component-lifecycle-methods-a-deep-dive-38275d9d13c0" target="_blank" rel="noopener">ReactJs component lifecycle methodsâ€Šâ€”â€ŠA deep dive</a><br><a href="https://github.com/apache/incubator-echarts/issues/1400" target="_blank" rel="noopener">å¦‚ä½•é€šè¿‡domå¯¹è±¡è·å–echartså¯¹è±¡</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/03/20/ç®—æ³•å°é›†-æŒç»­æ›´æ–°/" itemprop="url">
                  ç®—æ³•å°é›†(æŒç»­æ›´æ–°)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2018-03-20T10:24:13+08:00" content="2018-03-20">
              2018-03-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/ç®—æ³•/" itemprop="url" rel="index">
                    <span itemprop="name">ç®—æ³•</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          
             <span id="/2018/03/20/ç®—æ³•å°é›†-æŒç»­æ›´æ–°/" class="leancloud_visitors" data-flag-title="ç®—æ³•å°é›†(æŒç»­æ›´æ–°)">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h1><h2 id="æ¡¶æ’åº"><a href="#æ¡¶æ’åº" class="headerlink" title="æ¡¶æ’åº"></a>æ¡¶æ’åº</h2><p>OC</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *bucketSort(<span class="built_in">NSArray</span> *list)&#123;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">NSMutableArray</span> *a = @[].mutableCopy;</span><br><span class="line">	<span class="built_in">NSMutableArray</span> *c = [<span class="built_in">NSMutableArray</span> array];</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//åˆå§‹åŒ–æ•°ç»„aä¸­æ‰€æœ‰å…ƒç´ éƒ½ä¸º0</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="built_in">NSInteger</span> i = <span class="number">0</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">		a[i] = @<span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//éå†bä¸­æ‰€æœ‰å…ƒç´  å½“å‡ºç°æ•°ç»„aä¸­å‡ºç°bä¸­å…ƒç´  æ•°ç»„açš„è¿™ä¸ªå…ƒç´ å°±+1</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="built_in">NSNumber</span> *num <span class="keyword">in</span> list) &#123;</span><br><span class="line">		</span><br><span class="line">		<span class="built_in">NSInteger</span> index = [num integerValue];</span><br><span class="line">		<span class="comment">//index = 5,2,3,1,8</span></span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span> (a[index]) &#123;</span><br><span class="line">			a[index] = @([a[index] integerValue] + <span class="number">1</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			a[index] = @<span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//éå†æ•°ç»„a</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">//ä»å¤§åˆ°å°</span></span><br><span class="line"><span class="comment">//	for (NSInteger i = 10; i &lt; a.count; i --) &#123;</span></span><br><span class="line"><span class="comment">//		//æ‰¾åˆ°æ•°ç»„aä¸­è¢«å¢åŠ çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">//		if ([a[i] integerValue] &gt; 0) &#123;</span></span><br><span class="line"><span class="comment">//			[c addObject:@(i)];</span></span><br><span class="line"><span class="comment">//		&#125;</span></span><br><span class="line"><span class="comment">//	&#125;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">//ä»å°åˆ°å¤§</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="built_in">NSInteger</span> i = <span class="number">0</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">		<span class="keyword">if</span> ([a[i] integerValue] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">			[c addObject:@(i)];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span> (c.count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> c;</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>JS</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bucketSort</span>(<span class="params">list</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="built_in">Array</span>.isArray(list)) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> arrayA = []</span><br><span class="line">  <span class="keyword">let</span> arrayC = []</span><br><span class="line"></span><br><span class="line"> <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; <span class="number">10</span>; index++) &#123;</span><br><span class="line">   arrayA[index] = <span class="number">0</span></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> list.forEach(<span class="function"><span class="params">element</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (element == <span class="literal">undefined</span> || element == <span class="literal">null</span>) <span class="keyword">return</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (arrayA[element] != <span class="literal">undefined</span> || arrayA[element] != <span class="literal">null</span>) &#123;</span><br><span class="line">    arrayA[element] += <span class="number">1</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    arrayA[element] = <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line"> &#125;)</span><br><span class="line"></span><br><span class="line"> <span class="keyword">return</span> arrayA.map(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">   <span class="keyword">if</span> (item &gt; <span class="number">0</span>) <span class="keyword">return</span> index</span><br><span class="line"> &#125;)</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h2><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *quicksort(<span class="built_in">NSMutableArray</span> *array, <span class="built_in">NSInteger</span> left, <span class="built_in">NSInteger</span> right)&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span> (left &gt; right) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//temp åŸºå‡†æ•°</span></span><br><span class="line">	<span class="built_in">NSInteger</span> temp = [array[left] integerValue];</span><br><span class="line">	<span class="built_in">NSInteger</span> t = <span class="number">0</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">while</span> (left != right) &#123;</span><br><span class="line">		<span class="comment">//ä»å³å‘å·¦æ‰¾</span></span><br><span class="line">		<span class="keyword">while</span> ([array[right] integerValue] &gt; temp &amp;&amp; left &lt; right) &#123;</span><br><span class="line">			right --;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//ä»å·¦å‘å³æ‰¾</span></span><br><span class="line">		<span class="keyword">while</span> ([array[left] integerValue] &lt; temp &amp;&amp; left &lt; right) &#123;</span><br><span class="line">			left ++;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//æœªç›¸é‡</span></span><br><span class="line">		<span class="keyword">if</span> (left &lt; right) &#123;</span><br><span class="line">			<span class="comment">//äº¤æ¢ä½ç½®</span></span><br><span class="line">			t = [array[left] integerValue];</span><br><span class="line">			array[left] = array[right];</span><br><span class="line">			array[right] = @(t);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//left == right ç¡®å®šåŸºå‡†æ•°ä½ç½®</span></span><br><span class="line">	array[left] = @(temp);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//é€’å½’</span></span><br><span class="line">	<span class="comment">//å¤„ç†åŸºå‡†æ•°å·¦è¾¹æ•°æ®</span></span><br><span class="line">	quicksort(array, left, left - <span class="number">1</span>);</span><br><span class="line">	<span class="comment">//å¤„ç†åŸºå‡†æ•°å³è¾¹æ•°æ®</span></span><br><span class="line">	quicksort(array, left + <span class="number">1</span>, right);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h2><p>OC</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *bubblesort(<span class="built_in">NSMutableArray</span> *list)&#123;</span><br><span class="line">	<span class="built_in">NSNumber</span> *t;</span><br><span class="line">	<span class="keyword">for</span> (<span class="built_in">NSInteger</span> i = <span class="number">0</span>; i &lt; list.count - <span class="number">1</span>; i++) &#123; <span class="comment">//nä¸ªæ•°æ’åº,åªç”¨è¿›è¡Œn-1è¶Ÿ</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="built_in">NSInteger</span> j = <span class="number">0</span>; j &lt; list.count - <span class="number">1</span>; j++) &#123; <span class="comment">//ä»ç¬¬1ä½å¼€å§‹æ¯”è¾ƒç›´åˆ°æœ€åä¸€ä½å°šæœªå½’ä¸ºçš„æ•° å› ä¸ºåªè¿›è¡Œn-1è¶Ÿæ’åº,æ‰€ä»¥æœ€åä¸€ä½åˆ™æ˜¯n-1ã€‚</span></span><br><span class="line">			<span class="keyword">if</span> (list[j] &gt; list[j + <span class="number">1</span>]) &#123;</span><br><span class="line">				t = list[j];</span><br><span class="line">				list[j] = list[j+ <span class="number">1</span>];</span><br><span class="line">				list[j + <span class="number">1</span>] = t;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>JS</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bubbleSort</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">if</span> (!<span class="built_in">Array</span>.isArray(array)) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">let</span> T = <span class="number">0</span>;</span><br><span class="line"> <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; array.length - <span class="number">1</span>; index++) &#123;</span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; array.length <span class="number">-1</span>; j++) &#123;</span><br><span class="line">     <span class="keyword">if</span> (array[j] &gt; array[j + <span class="number">1</span>]) &#123;</span><br><span class="line">       T = array[j]</span><br><span class="line">       array[j] = array[j + <span class="number">1</span>]</span><br><span class="line">       array[j + <span class="number">1</span>] = T</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">return</span> array</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æŸ¥æ‰¾"><a href="#æŸ¥æ‰¾" class="headerlink" title="æŸ¥æ‰¾"></a>æŸ¥æ‰¾</h1><h2 id="äºŒåˆ†æŸ¥æ‰¾"><a href="#äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾"></a>äºŒåˆ†æŸ¥æ‰¾</h2><p>JS</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">binary_search</span>(<span class="params">list, item</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> low = <span class="number">0</span></span><br><span class="line">  <span class="keyword">let</span> high = list.length - <span class="number">1</span></span><br><span class="line">  <span class="keyword">while</span> (low &lt;= high) &#123;</span><br><span class="line">    <span class="keyword">const</span> mid = <span class="built_in">Math</span>.floor((low + high ) / <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">const</span> guess = list[mid]</span><br><span class="line">    <span class="keyword">if</span> (guess == item) &#123;</span><br><span class="line">        <span class="keyword">return</span> mid</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">if</span> (guess &gt; item) &#123;</span><br><span class="line">        high = mid - <span class="number">1</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        low = mid + <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/09/01/AutoLayout-çˆ¶è§†å›¾æ ¹æ®å­è§†å›¾è‡ªé€‚åº”/" itemprop="url">
                  AutoLayout - çˆ¶è§†å›¾æ ¹æ®å­è§†å›¾å¸ƒå±€è‡ªé€‚åº”å¤§å°
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2017-09-01T15:54:00+08:00" content="2017-09-01">
              2017-09-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          
             <span id="/2017/09/01/AutoLayout-çˆ¶è§†å›¾æ ¹æ®å­è§†å›¾è‡ªé€‚åº”/" class="leancloud_visitors" data-flag-title="AutoLayout - çˆ¶è§†å›¾æ ¹æ®å­è§†å›¾å¸ƒå±€è‡ªé€‚åº”å¤§å°">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬æ–‡è®°å½•AutoLayoutæ—¥å¸¸å¸ƒå±€UIæ—¶çš„æŠ€å·§ã€‚æ¯å½“æ‹¿åˆ°æ–°çš„ç•Œé¢è®¾è®¡æ—¶,æ¯”</p>
<p>å¦‚è¿™æ ·çš„: </p>
<p><img src="/images/1.png" width="50%" height="50%" align="center/"></p>
<p>å½“æŸä¸ªå­—æ®µçš„é•¿åº¦ä¸ç¡®å®šæ—¶,(å›¾1ä¸­çš„â€œä½œä¸šåœ°å€â€,å›¾2ä¸­â€é¢„çº¦åœ°å€â€å’Œâ€œå–æ¶ˆåŸå› â€)ã€‚Labelçš„è¡Œæ•°å°±è¦è®¾ç½®ä¸º0æˆ–è€… &gt;=1ã€‚æ€»è¯•å›¾çš„é«˜åº¦å°±ä¸ç¡®å®šã€‚äºæ˜¯ä¹å°±è¦å¼€å§‹å°±ç®—containerViewçš„é«˜åº¦äº†ã€‚</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">CGFloat</span>)cellHeight&#123;</span><br><span class="line">	<span class="built_in">CGFloat</span> publicHeight = kViewTopPadding + kImageSize().height + kViewTypeMargin + _nameStrSize.height + kViewTypePadding + _nameTextSize.height + kViewTypeMargin / <span class="number">2</span> + kCellBottomPadding;</span><br><span class="line">	<span class="keyword">switch</span> (_layoutViewType) &#123;</span><br><span class="line">		<span class="keyword">case</span> ViewLayoutBreviaryType:</span><br><span class="line">			<span class="keyword">return</span> publicHeight;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> ViewLayoutDetailType:</span><br><span class="line">			<span class="comment">//åˆ¤æ–­å½“å‰modelå­˜å‚¨çš„ä¿¡æ¯æ˜¯å¾…æ‰§è¡Œè¿˜æ˜¯å·²å–æ¶ˆçŠ¶æ€</span></span><br><span class="line">			<span class="keyword">if</span> (_orderModel.reserveType == YWBOrderReservationToBeConfirm) &#123;</span><br><span class="line">				<span class="keyword">return</span> publicHeight + kViewTypeMargin / <span class="number">2</span> + _addressStrSize.height + kViewTypePadding + _addressTextSize.height + kViewTypeMargin + _typeStrSize.height + _typeTextSize.height + kViewTypeMargin + kButtonHeight + kViewBottomPadding + kCellBottomPadding;</span><br><span class="line">			&#125;<span class="keyword">else</span> <span class="keyword">if</span>(_orderModel.reserveType == YWBOrderReservationCancledForSaler || _orderModel.reserveType == YWBOrderReservationCancledForClient)&#123;</span><br><span class="line">				<span class="keyword">return</span> publicHeight + kViewTypeMargin / <span class="number">2</span> + _addressStrSize.height + kViewTypePadding + _addressTextSize.height + kViewTypeMargin + _cancleStrSize.height + kViewTypePadding + _cancleTextSize.height + kViewBottomPadding + kCellBottomPadding;</span><br><span class="line">			&#125;</span><br><span class="line">		   <span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0.0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">CGFloat</span>)heightWithWidth:(<span class="built_in">CGFloat</span>)width font:(<span class="built_in">UIFont</span> *)font</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">CGRect</span> attrsRect = [<span class="keyword">self</span> boundingRectWithSize:<span class="built_in">CGSizeMake</span>(width, <span class="built_in">CGFLOAT_MAX</span>)</span><br><span class="line">										  options:<span class="built_in">NSStringDrawingUsesLineFragmentOrigin</span> | <span class="built_in">NSStringDrawingUsesFontLeading</span></span><br><span class="line">									   attributes:@&#123;<span class="built_in">NSFontAttributeName</span> : font&#125;</span><br><span class="line">										  context:<span class="literal">nil</span>];</span><br><span class="line">	<span class="keyword">return</span> attrsRect.size.height;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸ç»†å¿ƒæ¼æ‰æŸä¸€å¤„é«˜åº¦,æŸ¥æ‰¾èµ·æ¥ä¹Ÿæ¯”è¾ƒéº»çƒ¦ã€‚æ¯æ¬¡ç®—é«˜åº¦æ˜¯æˆ‘ä¸çˆ±å¹²çš„ä¸€ä»¶äº‹æƒ…ã€‚æ²¡æœ‰æŠ€æœ¯å«é‡ğŸ˜‚ã€‚å®Œå…¨å°±æ˜¯ç»†å¿ƒæ´»ã€‚å¤šäºAutoLayoutèƒ½è®©æˆ‘ä»¬ä»è¿™ä¸€æ¯«æ— å…´è¶£çš„å·¥ä½œä¸­è§£æ”¾å‡ºæ¥ã€‚</p>
<h1 id="çˆ¶è§†å›¾è‡ªé€‚åº”"><a href="#çˆ¶è§†å›¾è‡ªé€‚åº”" class="headerlink" title="çˆ¶è§†å›¾è‡ªé€‚åº”"></a>çˆ¶è§†å›¾è‡ªé€‚åº”</h1><p>æ–°å»ºXcodeå·¥ç¨‹ã€‚åœ¨Main.storyboardçš„ViewControllerä¸­éšæ„æ‹–å…¥viewæ§ä»¶ï¼Œé¢œè‰²æš‚å®šä¸ºblueã€‚æ”¾ç½®3ä¸ªLabelæ§ä»¶ã€‚</p>
<p><img src="https://i.loli.net/2018/03/02/5a98ee340eaab.png" alt="1.png"></p>
<ol>
<li>å…ˆä¸è®¾ç½®blueviewçš„çº¦æŸã€‚</li>
<li>é€æ­¥è®¾ç½®Labelçš„çº¦æŸã€‚</li>
</ol>
<p>é»‘è‰²Labelçº¦æŸå¦‚ä¸‹:</p>
<p><img src="https://i.loli.net/2018/03/02/5a98ee7ee44ec.png" alt="2.png"></p>
<p>åœ¨è¿™é‡Œæˆ‘è®¾ç½®äº†é»‘è‰²Labelçš„sizeã€‚è¿™ä¸ªå¹¶æ— å…³ç³»ï¼Œå¯è®¾å¯ä¸è®¾ã€‚ä½¿ç”¨Labelçš„å›ºæœ‰å¤§å°ä¹Ÿè¡Œã€‚</p>
<p>é»„è‰²Labelçº¦æŸå¦‚ä¸‹:</p>
<p><img src="https://i.loli.net/2018/03/02/5a98eea02e37a.png" alt="3.png"></p>
<p>çº¢è‰²Labelçº¦æŸå¦‚ä¸‹:</p>
<p><img src="https://i.loli.net/2018/03/02/5a98eeb892428.png" alt="4.png"></p>
<p>Labelçš„è¡Œæ•°éƒ½ä¸º0ã€‚</p>
<h2 id="é‡ç‚¹"><a href="#é‡ç‚¹" class="headerlink" title="é‡ç‚¹"></a>é‡ç‚¹</h2><p><strong><em>Labelä¸€å®šè¦è®¾ç½®è·ç¦»çˆ¶è§†å›¾çš„é—´è·ã€‚è¿™æ ·AutoLayoutæ‰èƒ½è®¡ç®—å‡ºçˆ¶è§†å›¾çš„å¤§å°ã€‚</em></strong></p>
<h1 id="æœ€é‡è¦çš„ä¸€æ­¥"><a href="#æœ€é‡è¦çš„ä¸€æ­¥" class="headerlink" title="æœ€é‡è¦çš„ä¸€æ­¥"></a>æœ€é‡è¦çš„ä¸€æ­¥</h1><p>çœ‹ä¸‹viewçš„çº¦æŸ<br><img src="https://i.loli.net/2018/03/02/5a98eed285ff8.png" alt="5.png"><br><img src="https://i.loli.net/2018/03/02/5a98eee554feb.png" alt="6.png"><br>å°†viewçš„å›ºæœ‰å°ºå¯¸è®¾ç½®ä¸ºplaceholderã€‚ æˆ‘ä»¬éƒ½çŸ¥é“Label Button ImageView(å·²ç»è®¾ç½®imageå±æ€§)è¿™äº›æ§ä»¶ï¼Œåœ¨ç”¨AutoLayoutå¸ƒå±€æ—¶ï¼Œåªéœ€è¦è®¾ç½®å¤–è¾¹è·å°±è¡Œäº†ã€‚AutoLayoutä¼šè‡ªåŠ¨é€‚åº”sizeå¤§å°ã€‚è¿™å°±æ˜¯å›ºæœ‰å°ºå¯¸ã€‚åè§‚Viewå°±ä¸è¡Œäº†ã€‚å‡å¦‚åªè®¾ç½®Viewçš„å¤–è¾¹è·ï¼Œè¿™æ—¶ä¸€å®šä¼šæŠ¥å‡ºçº¦æŸé”™è¯¯ã€‚ä½†æ˜¯Viewä½œä¸ºå®¹å™¨ã€‚å®ƒèƒ½æ ¹æ®å­æ§ä»¶çš„å¤§å°æ¥è‡ªé€‚åº”ã€‚åªéœ€è¦å°†å…¶å›ºæœ‰å°ºå¯¸(size)éƒ½è®¾ç½®ä¸º0ã€‚</p>
<p>è¿™æ˜¯å¯¹äºé«˜åº¦ä¸å›ºå®šçš„æ¥è®²ã€‚å¦‚æœå®½åº¦ä¸å›ºå®šå‘¢ï¼Ÿç­”æ¡ˆæ˜¯åŒæ ·é€‚ç”¨ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œviewçš„å®½åº¦æ˜¯å›ºå®šçš„ã€‚é«˜åº¦ä¸å›ºå®šã€‚</p>
<h2 id="éœ€è¦æ³¨æ„çš„é—®é¢˜"><a href="#éœ€è¦æ³¨æ„çš„é—®é¢˜" class="headerlink" title="éœ€è¦æ³¨æ„çš„é—®é¢˜"></a>éœ€è¦æ³¨æ„çš„é—®é¢˜</h2><p>å¦‚æœä¸è®¾ç½®viewçš„å·¦å³è¾¹é—´è·æˆ–è€…å®½åº¦ä½ å°±ä¼šå‘ç°å˜æˆäº†è¿™æ ·:<br><img src="https://i.loli.net/2018/03/02/5a98eefb35dd4.png" alt="7.png"><br>viewçš„å·¦å³è¾¹è·å·²ç»è¢«Labelæ’‘åˆ°å±å¹•å¤–é¢äº†ã€‚å› ä¸ºè¿™æ—¶viewçš„å®½åº¦ä¹Ÿæ˜¯ä¼šéšç€Labelå˜åŒ–çš„ã€‚<br>æ‰€ä»¥è¯´æˆ‘è®¾ç½®äº†viewçš„å·¦å³è¾¹è·(æˆ–è€…è®¾ç½®å…¶å›ºå®šçš„å®½åº¦)</p>
<h2 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h2><p>æ¥æ¥ä¸‹å°±å¯ä»¥è®¾ç½®Labelçš„textå±æ€§äº†ã€‚éšä¾¿è¾“å…¥æ±‰å­—æ¥éªŒè¯ä¸€ä¸‹ï¼š<br><img src="https://i.loli.net/2018/03/02/5a98ef188c27f.png" alt="8.png"><br><img src="https://i.loli.net/2018/03/02/5a98ef188f224.png" alt="9.png"></p>
<p>å¯ä»¥å‘ç°viewçš„é«˜åº¦å·²ç»éšç€Labelçš„å˜åŒ–è€Œå˜åŒ–äº†ã€‚å…¶ä»–çš„æ§ä»¶ä»¥æ­¤ç±»æ¨ã€‚éƒ½æ˜¯ä¸€æ ·çš„é“ç†ã€‚å¦å¤–çº¯ä»£ç å¸ƒå±€ä¹ŸåŒæ ·é€‚ç”¨ã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>viewä½œä¸ºå®¹å™¨ç±»å…¶æ‰¿è½½å…¶ä»–æ§ä»¶çš„æ˜¾ç¤ºã€‚åªè¦è®¾ç½®äº†å­æ§ä»¶çš„è·ç¦»è‡ªå·±çš„çº¦æŸã€‚å¹¶å°†è‡ªå·±çš„å›ºæœ‰å°ºå¯¸è®¾ç½®ä¸ºplaceholder(ä¹Ÿå°±æ˜¯widthå’Œheightéƒ½ä¸º0)ã€‚è¿™æ ·AutoLayoutå°±èƒ½è‡ªåŠ¨è®¡ç®—å‡ºviewçš„å¤§å°ã€‚</p>
<h1 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h1><p>æ€ä¹ˆæ ·æ‹¿åˆ°viewçš„å¤§å°å‘¢ï¼Ÿç³»ç»Ÿä¸ºæˆ‘ä»¬æä¾›äº†è¿™æ ·çš„API</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIView</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* The size fitting most closely to targetSize in which the receiver's subtree can be laid out while optimally satisfying the constraints. If you want the smallest possible size, pass UILayoutFittingCompressedSize; for the largest possible size, pass UILayoutFittingExpandedSize.</span></span><br><span class="line"><span class="comment">     Also see the comment for UILayoutPriorityFittingSizeLevel.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@available</span>(iOS <span class="number">6.0</span>, *)</span><br><span class="line">    <span class="keyword">open</span> <span class="function"><span class="keyword">func</span> <span class="title">systemLayoutSizeFitting</span><span class="params">(<span class="number">_</span> targetSize: CGSize)</span></span> -&gt; <span class="type">CGSize</span> <span class="comment">// Equivalent to sending -systemLayoutSizeFittingSize:withHorizontalFittingPriority:verticalFittingPriority: with UILayoutPriorityFittingSizeLevel for both priorities.</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@available</span>(iOS <span class="number">8.0</span>, *)</span><br><span class="line">    <span class="keyword">open</span> <span class="function"><span class="keyword">func</span> <span class="title">systemLayoutSizeFitting</span><span class="params">(<span class="number">_</span> targetSize: CGSize, withHorizontalFittingPriority horizontalFittingPriority: UILayoutPriority, verticalFittingPriority: UILayoutPriority)</span></span> -&gt; <span class="type">CGSize</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨viewDidLayoutSubviewsæˆ–è€…layoutSubviewsä¸­é€šè¿‡è°ƒç”¨ä¸Šé¢APIå°±èƒ½å¤Ÿè·å¾—é€šè¿‡AutoLayoutè®¡ç®—è¿‡åviewçš„å¤§å°ã€‚</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/10/React-Native-è‡ªå®šä¹‰ç»„ä»¶/" itemprop="url">
                  React Native è‡ªå®šä¹‰ç»„ä»¶
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2017-07-10T16:02:49+08:00" content="2017-07-10">
              2017-07-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/React-Native/" itemprop="url" rel="index">
                    <span itemprop="name">React Native</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          
             <span id="/2017/07/10/React-Native-è‡ªå®šä¹‰ç»„ä»¶/" class="leancloud_visitors" data-flag-title="React Native è‡ªå®šä¹‰ç»„ä»¶">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="æ–¹æ³•ä¸€ï¼š"><a href="#æ–¹æ³•ä¸€ï¼š" class="headerlink" title="æ–¹æ³•ä¸€ï¼š"></a>æ–¹æ³•ä¸€ï¼š</h1><p>è‡ªå®šä¹‰ç»„ä»¶(Button)ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Button</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">    render()&#123;</span><br><span class="line">        <span class="comment">//è§£æ„</span></span><br><span class="line">        <span class="keyword">const</span> &#123;title,onClick&#125; = <span class="keyword">this</span>.props;</span><br><span class="line">        <span class="keyword">return</span>(</span><br><span class="line">            &lt;TouchableOpacity style=&#123;styles.touchStyle&#125;</span><br><span class="line">                              onPress=&#123;onClick&#125;</span><br><span class="line">            &gt;</span><br><span class="line">                &lt;Text style=&#123;styles.textStyle&#125;&gt;&#123;<span class="keyword">this</span>.props.title&#125;&lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>TouchableOpacity&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>export default</code>å…³é”®å­—ï¼šå¯¼å‡ºè‡ªå®šä¹‰ç»„ä»¶,å¯ä»¥è¢«åˆ«çš„jsæ–‡ä»¶æ‰€å¼•ç”¨ã€‚å¦‚æœæ²¡æœ‰å…³é”®å­—,å°±åªèƒ½åœ¨æœ¬jsæ–‡ä»¶ä½¿ç”¨è¯¥ç±»ã€‚ä¾‹å¦‚åœ¨<code>Login.js</code>æ–‡ä»¶ä¸­å¯ä»¥ç”¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import Button from &apos;./Button&apos;</span><br></pre></td></tr></table></figure>
<p>å¯¼å…¥Buttonç»„ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è§£æ„</span></span><br><span class="line"><span class="keyword">const</span> &#123;title,onClick&#125; = <span class="keyword">this</span>.props;</span><br></pre></td></tr></table></figure>
<p>è§£æ„ä»çˆ¶ç»„ä»¶çš„ä¼ è¿‡æ¥çš„props, å­ç»„ä»¶æ‹¿åˆ°çˆ¶ç»„ä»¶è®¾ç½®çš„å±æ€§å€¼,æ˜¾ç¤ºä¼ é€’çš„å€¼æˆ–è€…å¤„ç†ä¼ é€’è¿‡æ¥çš„æ–¹æ³•ã€‚</p>
<p>åˆ—å¦‚ä¸Šé¢ä»£ç :</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">///æ˜¾ç¤ºButtonçš„title</span></span><br><span class="line">&lt;Text style=&#123;styles.textStyle&#125;&gt;&#123;<span class="keyword">this</span>.props.title&#125;&gt;</span><br><span class="line">&lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="comment">//å¤„ç†TouchableOpacityçš„ç‚¹å‡»äº‹ä»¶</span></span><br><span class="line">&lt;TouchableOpacity style=&#123;styles.touchStyle&#125;</span><br><span class="line">                  onPress=&#123;onClick&#125;&gt;</span><br><span class="line">&lt;<span class="regexp">/TouchableOpacity&gt;</span></span><br></pre></td></tr></table></figure>
<p>çˆ¶ç»„ä»¶è°ƒç”¨ä»£ç : ä¼ é€’titleä¿¡æ¯å’ŒonClickæ–¹æ³•å›è°ƒ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button title=<span class="string">"ç™»å½•"</span></span><br><span class="line">        onClick=&#123;() =&gt; alert(<span class="string">'ç‚¹å‡»äº†ç™»å½•æŒ‰é’®'</span>)&#125;/&gt;</span><br></pre></td></tr></table></figure>
<h1 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h1><p>ä¸æ–¹æ³•ä¸€çš„åŒºåˆ«ä¸å¤§</p>
<p>ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component,PropTypes &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Text,TouchableOpacity,StyleSheet &#125; <span class="keyword">from</span> <span class="string">'react-native'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Button</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">        title: PropTypes.string,</span><br><span class="line">        onPress: PropTypes.func</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render()&#123;</span><br><span class="line">        <span class="keyword">return</span>(</span><br><span class="line">            &lt;TouchableOpacity style=&#123;styles.touchStyle&#125;</span><br><span class="line">                              onPress=&#123;()=&gt;&#123;</span><br><span class="line">                                <span class="keyword">if</span> (<span class="keyword">this</span>.props.onPress) &#123;</span><br><span class="line">                                    <span class="keyword">this</span>.props.onPress(<span class="keyword">this</span>)</span><br><span class="line">                                &#125;</span><br><span class="line">                              &#125;&#125;</span><br><span class="line">            &gt;</span><br><span class="line">                &lt;Text style=&#123;styles.textStyle&#125;&gt;&#123;<span class="keyword">this</span>.props.title&#125;&lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>TouchableOpacity&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">        title: PropTypes.string,</span><br><span class="line">        onPress: PropTypes.func</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>æš´éœ²å‡ºç»„ä»¶çš„å±æ€§(title)å’Œæ–¹æ³•(onPress)ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;TouchableOpacity style=&#123;styles.touchStyle&#125;</span><br><span class="line">                              onPress=&#123;()=&gt;&#123;</span><br><span class="line">                                <span class="keyword">if</span> (<span class="keyword">this</span>.props.onPress) &#123;</span><br><span class="line">                                    <span class="keyword">this</span>.props.onPress(<span class="keyword">this</span>)</span><br><span class="line">                                &#125;</span><br><span class="line">                              &#125;&#125;</span><br><span class="line">            &gt;</span><br><span class="line">                &lt;Text style=&#123;styles.textStyle&#125;&gt;&#123;<span class="keyword">this</span>.props.title&#125;&lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>TouchableOpacity&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>å¤„ç†TouchableOpacityçš„ç‚¹å‡»äº‹ä»¶,è®¾ç½®å›è°ƒå‡½æ•°</li>
<li>æ˜¾ç¤ºButtonçš„title</li>
</ul>
<p>ç»„ä»¶è°ƒç”¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button  title=&quot;ç™»å½•&quot;</span><br><span class="line">        onPress=&#123;() =&gt; alert(&apos;ç‚¹å‡»äº†ç™»å½•æŒ‰é’®&apos;)&#125;/&gt;</span><br></pre></td></tr></table></figure>
<h1 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h1><p><img src="https://i.loli.net/2018/03/02/5a98efa4c7dc0.gif" alt="RNCustomComponent.gif"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/06/è®°ä¸€æ¬¡React-Native-StackNavigatorä½¿ç”¨å°ç»“/" itemprop="url">
                  è®°ä¸€æ¬¡React Nativeçš„StackNavigatorä½¿ç”¨å°ç»“
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2017-07-06T16:10:49+08:00" content="2017-07-06">
              2017-07-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/React-Native/" itemprop="url" rel="index">
                    <span itemprop="name">React Native</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          
             <span id="/2017/07/06/è®°ä¸€æ¬¡React-Native-StackNavigatorä½¿ç”¨å°ç»“/" class="leancloud_visitors" data-flag-title="è®°ä¸€æ¬¡React Nativeçš„StackNavigatorä½¿ç”¨å°ç»“">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h1><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (</span><br><span class="line">  routeConfigMap: NavigationRouteConfigMap,</span><br><span class="line">  stackConfig: StackNavigatorConfig = &#123;&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>åœ¨<code>StackNavigator</code>çš„åˆå§‹åŒ–ä¸­éœ€è¦ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼š<code>routeConfigMap</code> è¡¨ç¤ºè·¯ç”±é…ç½®å‚æ•°, <code>stackConfig</code>è¡¨ç¤ºé…ç½®<code>StackNavigatorConfig</code>ä¸€äº›æ ·å¼æˆ–è€…å±æ€§ã€‚</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MainSrceenStackNavigator = StackNavigator(</span><br><span class="line">    &#123;</span><br><span class="line">        MainScreenNavigator: &#123;screen: MainScreenNavigator&#125;,</span><br><span class="line">        DiscoverDetail: &#123;screen: DiscoverDetail&#125;,</span><br><span class="line">        SettingDetail: &#123;screen: SettingDetail&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        initialRouteName: <span class="string">'MainScreenNavigator'</span>,</span><br><span class="line">        mode:<span class="string">'card'</span>,</span><br><span class="line">        headerMode:<span class="string">'screen'</span>,</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç å—é…ç½®äº†3ä¸ªä¸åŒè·¯ç”±çš„ç•Œé¢ï¼Œ<code>initialRouteName</code>è®¾ç½®æ ¹å¯¼èˆªæ§åˆ¶å™¨ç•Œé¢,é»˜è®¤ç¬¬ä¸€ä¸ªä¸ºæ ¹è·¯ç”±ã€‚<code>mode</code>è¡¨ç¤ºç•Œé¢çš„è·³è½¬æ–¹å¼:pushæˆ–è€…æ¨¡æ€å¼¹å‡ºã€‚<code>headerMode</code>è¡¨ç¤ºç•Œé¢åœ¨åšè·³è½¬æ—¶çš„åŒºåŸŸã€‚æœ‰ä¸‰ç§æ–¹å¼:<code>float</code>,<code>screen</code>,<code>none</code>ã€‚<code>float</code>è¡¨ç¤ºä¸åŒ…æ‹¬å¯¼èˆªæ¡åœ¨å†…;<code>screen</code>è¡¨ç¤ºæ•´ä¸ªå±å¹•(åŒ…æ‹¬å¯¼èˆªæ¡);<code>none</code>è¡¨ç¤ºå¯¼èˆªæ¡çš„éšè—ã€‚è¿˜æœ‰å¾ˆå¤šå±æ€§å¯é€‰é…ç½®ã€‚ç”¨åˆ°å¯åœ¨å®˜ç½‘æŸ¥è¯¢<a href="https://reactnavigation.org/docs/navigators/stack" target="_blank" rel="noopener">React Navigation
</a>ã€‚</p>
<h1 id="ğŸŒ°"><a href="#ğŸŒ°" class="headerlink" title="ğŸŒ°"></a>ğŸŒ°</h1><p>åœ¨<code>æˆ‘çš„</code>ç•Œé¢é…ç½®å¯¼èˆªæ¡æ ·å¼</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> navigationOptions = <span class="function">(<span class="params">&#123;navigation&#125;</span>)=&gt;</span>(&#123;</span><br><span class="line">        <span class="comment">// tabBarLabel: 'æˆ‘çš„',</span></span><br><span class="line">        title: <span class="string">'æˆ‘'</span>,</span><br><span class="line">        headerStyle:&#123;</span><br><span class="line">            backgroundColor: <span class="string">'black'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        headerTitleStyle:&#123;</span><br><span class="line">            color: <span class="string">'white'</span> </span><br><span class="line">        &#125;,</span><br><span class="line">        tabBarIcon:<span class="function">(<span class="params">&#123;tintColor,focused&#125;</span>) =&gt;</span> (</span><br><span class="line">            &lt;TabBarItem  </span><br><span class="line">              tintColor=&#123;tintColor&#125;  </span><br><span class="line">              focused=&#123;focused&#125;  </span><br><span class="line">              normalImage=&#123;<span class="built_in">require</span>(<span class="string">'./source/æˆ‘çš„@2x.png'</span>)&#125;  </span><br><span class="line">              selectedImage=&#123;<span class="built_in">require</span>(<span class="string">'./source/æˆ‘çš„-é€‰ä¸­@2x.png'</span>)&#125;  </span><br><span class="line">            /&gt;  </span><br><span class="line">        ),</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<p>ç„¶åå†æ˜¾ç¤ºå‡ºListView(ä¸‰ä¸ªåˆ†åŒºçš„ListView)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">        <span class="keyword">super</span>(props);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> ds = <span class="keyword">new</span> ListView.DataSource(&#123;<span class="attr">rowHasChanged</span>: <span class="function">(<span class="params">r1, r2</span>) =&gt;</span> r1 !== r2,<span class="attr">sectionHeaderHasChanged</span>:<span class="function">(<span class="params">s1,s2</span>)=&gt;</span>s1 !== s2&#125;);</span><br><span class="line">        <span class="keyword">this</span>.state = &#123;</span><br><span class="line">            dataSource: ds.cloneWithRowsAndSections([[<span class="string">'é’±åŒ…'</span>],[<span class="string">'æ”¶è—'</span>,<span class="string">'ç›¸å†Œ'</span>,<span class="string">'å¡åŒ…'</span>,<span class="string">'è¡¨æƒ…'</span>],[<span class="string">'è®¾ç½®'</span>]]),</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">render()&#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View style=&#123;styles.container&#125;&gt;</span><br><span class="line">                &lt;ListView </span><br><span class="line">                dataSource=&#123;<span class="keyword">this</span>.state.dataSource&#125;</span><br><span class="line">                renderRow=&#123;<span class="keyword">this</span>._renderRow.bind(<span class="keyword">this</span>)&#125;</span><br><span class="line">                renderSeparator=&#123;<span class="keyword">this</span>._renderSeparator&#125;&gt;</span><br><span class="line">                &lt;<span class="regexp">/ListView&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>View&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>åˆ†å‰²çº¿</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">_renderSeparator(sectionID, rowID, adjacentRowHighlighted)  &#123;</span><br><span class="line">        <span class="keyword">if</span>(sectionID == <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View style=&#123;styles.separatorStyle&#125;&gt;&lt;/View&gt;</span><br><span class="line">        )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>ListViewæ¯ä¸ªåˆ†åŒºæ¯ä¸€è¡Œçš„æ•°æ®</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">_renderRow(rowData, sectionID, rowID, highlightRow)&#123;</span><br><span class="line">       <span class="keyword">if</span> (sectionID == <span class="number">0</span>) &#123;</span><br><span class="line">           <span class="keyword">return</span>(</span><br><span class="line">               &lt;TouchableOpacity onPress=&#123;() =&gt;&#123;</span><br><span class="line">                   highlightRow(sectionID,rowID),</span><br><span class="line">                   <span class="keyword">this</span>.props.navigation.navigate(<span class="string">'SettingDetail'</span>,&#123;<span class="string">'name'</span>: rowData&#125;)</span><br><span class="line">               &#125;&#125;&gt;</span><br><span class="line">                   &lt;View style=&#123;styles.section_0_style&#125;&gt;</span><br><span class="line">                       &lt;Text style=&#123;&#123;<span class="attr">fontSize</span>:<span class="number">15</span>&#125;&#125;&gt;&#123;rowData&#125;&lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">                   &lt;/</span>View&gt;</span><br><span class="line">               &lt;<span class="regexp">/TouchableOpacity&gt;</span></span><br><span class="line"><span class="regexp">           )</span></span><br><span class="line"><span class="regexp">       &#125;else if(sectionID == 1)&#123;</span></span><br><span class="line"><span class="regexp">           return(</span></span><br><span class="line"><span class="regexp">           &lt;TouchableOpacity onPress=&#123;() =&gt;&#123;</span></span><br><span class="line"><span class="regexp">                   highlightRow(sectionID,rowID),</span></span><br><span class="line"><span class="regexp">                   this.props.navigation.navigate('SettingDetail',&#123;'name': rowData&#125;)</span></span><br><span class="line"><span class="regexp">               &#125;&#125;&gt;   </span></span><br><span class="line"><span class="regexp">           &lt;View style=&#123;styles.viewStyle&#125;&gt;</span></span><br><span class="line"><span class="regexp">               &lt;Text style=&#123;&#123;fontSize:15&#125;&#125;&gt;&#123;rowData&#125;&lt;/</span>Text&gt;</span><br><span class="line">           &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">           &lt;/</span>TouchableOpacity&gt;</span><br><span class="line">           )</span><br><span class="line">       &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">           <span class="keyword">return</span>(</span><br><span class="line">               &lt;TouchableOpacity onPress=&#123;() =&gt;&#123;</span><br><span class="line">                   highlightRow(sectionID,rowID),</span><br><span class="line">                   <span class="keyword">this</span>.props.navigation.navigate(<span class="string">'SettingDetail'</span>,&#123;<span class="string">'name'</span>: rowData&#125;)</span><br><span class="line">               &#125;&#125;&gt;</span><br><span class="line">               &lt;View style=&#123;styles.section_0_style&#125;&gt;</span><br><span class="line">                    &lt;Text style=&#123;&#123;<span class="attr">fontSize</span>:<span class="number">15</span>&#125;&#125;&gt;&#123;rowData&#125;&lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">               &lt;/</span>View&gt;</span><br><span class="line">               &lt;<span class="regexp">/TouchableOpacity&gt;</span></span><br><span class="line"><span class="regexp">           )</span></span><br><span class="line"><span class="regexp">       &#125;</span></span><br><span class="line"><span class="regexp">   &#125;</span></span><br></pre></td></tr></table></figure>
<p><code>this.props.navigation.navigate(&#39;SettingDetail&#39;,{&#39;name&#39;: rowData})</code> navigationå¯ç”¨å±æ€§æ¥è·å–ã€‚ è¯¥å‡½æ•°ä¼ é€’å‚æ•°<code>{rowData}</code>å³ListViewæ¯è¡Œæ•°æ®åˆ°<code>SettingDetail</code>ç•Œé¢ã€‚</p>
<p>å†<code>SettingDetail</code>ç•Œé¢ä¸­å¯ç”¨ä¸‹é¢æ–¹æ³•</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> navigationOptions = <span class="function">(<span class="params">&#123;navigation&#125;</span>) =&gt;</span> (&#123;</span><br><span class="line">       title:<span class="string">`<span class="subst">$&#123;navigation.state.params.name&#125;</span>`</span>,</span><br><span class="line">       headerBackTitle: <span class="string">'è¿”å›'</span>,</span><br><span class="line">   &#125;)</span><br></pre></td></tr></table></figure>
<p>æ¥è·å–ä¼ é€’è¿‡æ¥çš„å‚æ•°æ˜¾ç¤ºåˆ°å¯¼èˆªæ¡çš„titleã€‚</p>
<p><img src="https://i.loli.net/2018/03/02/5a98f066c0e5b.gif" alt="RN.gif"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/13/iOSç•Œé¢ä¼˜åŒ–ç³»åˆ—ä¹‹ï¼šå¤„ç†å›¾ç‰‡ç¼©æ”¾é—®é¢˜/" itemprop="url">
                  iOSç•Œé¢ä¼˜åŒ–ç³»åˆ—ä¹‹ï¼šå¤„ç†å›¾ç‰‡ç¼©æ”¾é—®é¢˜
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2017-02-13T14:56:05+08:00" content="2017-02-13">
              2017-02-13
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Objective-C/" itemprop="url" rel="index">
                    <span itemprop="name">Objective-C</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          
             <span id="/2017/02/13/iOSç•Œé¢ä¼˜åŒ–ç³»åˆ—ä¹‹ï¼šå¤„ç†å›¾ç‰‡ç¼©æ”¾é—®é¢˜/" class="leancloud_visitors" data-flag-title="iOSç•Œé¢ä¼˜åŒ–ç³»åˆ—ä¹‹ï¼šå¤„ç†å›¾ç‰‡ç¼©æ”¾é—®é¢˜">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>åœ¨ä¼—å¤šé˜…è¯»ç±»çš„APPä¸­ï¼Œæ¯”å¦‚:</p>
<figure class="half"><br>    <img src="http://upload-images.jianshu.io/upload_images/1421047-cefaed703108a4aa.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/320/h/568"><br>    <img src="http://upload-images.jianshu.io/upload_images/1421047-8b81cc02257ab29f.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/320/h/568"><br></figure>

<p>è¿™ç±»æ¯”è¾ƒç¨å¾®ç®€å•çš„ç•Œé¢ä¸­å……æ–¥ç€å¤§é‡çš„çš„å›¾ç‰‡ï¼Œå¤šåˆ™6å¼ ,å°‘åˆ™3-4å¼ ã€‚å†è€…åƒå¾®åšè¿™ç±»é‡å‹ç¤¾äº¤çš„APPï¼Œæœ‰çš„celléƒ½å·²ç»æœ‰9å¼ å›¾ç‰‡ã€‚å›¾ç‰‡çš„ä¼˜åŒ–ç¨‹åº¦å¯¹æ•´ä¸ªç•Œé¢çš„æµç•…åº¦æ¥è¯´éƒ½æ˜¯é‡ä¸­ä¹‹é‡ã€‚ï¼ˆå¦å¤–ä¸€ä¸ªä¹Ÿå¾ˆé‡è¦çš„åœ°æ–¹å°±æ˜¯æ–‡æœ¬çš„å¼‚æ­¥æ¸²æŸ“ï¼‰ï¼Œåå‡ ä¸ªç³»åˆ—ä¹Ÿä¼šè¯´åˆ°ã€‚</p>
<p>åƒè¿™ç§å¼‚æ­¥åŠ è½½å›¾ç‰‡çš„å¼€æºåº“æœ‰å¾ˆå¤šï¼š<code>SD_WebImageView</code>  <code>YYWebImage  Kingfisher</code>  <code>PINRemoteImage</code> â€¦<br>å¼€å‘è€…å¦‚æœåªæ˜¯ç®€å•çš„è°ƒç”¨ä¸€ä¸‹ <code>sd_setImageWithURL:</code> å›¾ç‰‡èƒ½å¤Ÿå¾ˆå¥½çš„æ˜¾ç¤ºå‡ºæ¥ã€‚å‡å¦‚ä»ç½‘ç»œåŠ è½½çš„å›¾ç‰‡ä¸è‡ªå·±è®¾ç½®çš„UIImageViewçš„å°ºå¯¸ä¸ä¸€è‡´,å°±ä¼šå¯¼è‡´è¿™ç§ç»“æœã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1421047-8aeb9245ca7573ca.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/320/h/568" alt="Jietu20170112-131912.png"><br>å¦‚æœæ˜¯çœŸæœºè°ƒè¯• æ‰“å¼€<code>Instruments</code>ä¸­<code>Core Animation</code><br><img src="https://i.loli.net/2018/03/02/5a98f166a8d51.png" alt="Jietu20170112-135233.png"><br>åœ¨å³ä¾§æ ä¸­æ‰“å¼€<br><img src="http://upload-images.jianshu.io/upload_images/1421047-7ce789d8152d0bff.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/320/h/568" alt="Jietu20170112-135327.png"><br>å¦‚æœæ˜¯æ¨¡æ‹Ÿå™¨ï¼Œæ‰“å¼€Debug -&gt;Color Misaligned Images</p>
<p>è¿™ä¸ªé€‰é¡¹æ£€æŸ¥äº†å›¾ç‰‡æ˜¯å¦è¢«ç¼©æ”¾ï¼Œä»¥åŠåƒç´ æ˜¯å¦å¯¹é½ã€‚è¢«æ”¾ç¼©çš„å›¾ç‰‡ä¼šè¢«æ ‡è®°ä¸ºé»„è‰²ï¼Œåƒç´ ä¸å¯¹é½åˆ™ä¼šæ ‡æ³¨ä¸ºç´«è‰²ã€‚**é»„è‰²ã€ç´«è‰²è¶Šå¤šï¼Œæ€§èƒ½è¶Šå·®ã€‚</p>
<p>è§£å†³åŠæ³•ï¼š<br>1.ä¸åå°åå•†ï¼Œè®©åå°è¿”å›çš„å›¾ç‰‡å°ºå¯¸ä¸å®¢æˆ·ç«¯UIImageViewå°ºå¯¸ä¸€è‡´;<br>2.è‡ªå·±å¤„ç†ã€‚</p>
<p>ä¸‹é¢ä»‹ç»ä¸‹å¦‚ä½•è‡ªå·±å¤„ç†</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIImage</span> </span>&#123;</span><br><span class="line">Â  Â  <span class="function"><span class="keyword">func</span> <span class="title">resizeImage</span><span class="params">(<span class="number">_</span> image: UIImage, targetSize: CGSize)</span></span> -&gt; <span class="type">UIImage</span>? &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  <span class="keyword">let</span> newRect = <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: targetSize.width, height: targetSize.height).integral</span><br><span class="line">Â  Â  Â  Â  Â  Â  <span class="type">UIGraphicsBeginImageContextWithOptions</span>(targetSize, <span class="literal">false</span>, <span class="number">0</span>)</span><br><span class="line">Â  Â  Â  Â  Â  Â  <span class="keyword">if</span> <span class="keyword">let</span> context = <span class="type">UIGraphicsGetCurrentContext</span>() &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  context.interpolationQuality = .high</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  <span class="keyword">let</span> flipVertical = <span class="type">CGAffineTransform</span>(a: <span class="number">1</span>, b: <span class="number">0</span>, <span class="built_in">c</span>: <span class="number">0</span>, d: -<span class="number">1</span>, tx: <span class="number">0</span>, ty: targetSize.height)</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  context.concatenate(flipVertical)</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  context.draw(<span class="keyword">self</span>.cgImage!, <span class="keyword">in</span>: newRect)</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  <span class="keyword">let</span> newImage = <span class="type">UIImage</span>(cgImage: context.makeImage()!)</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  <span class="type">UIGraphicsEndImageContext</span>()</span><br><span class="line">Â Â  Â  Â  Â  Â  Â  Â  <span class="keyword">return</span> newImage</span><br><span class="line">Â  Â  Â  Â  Â  Â  &#125;</span><br><span class="line">Â  Â  Â  Â  <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">Â  Â  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¾ˆç®€å•å°±æ˜¯ç½‘ç»œä¸‹è½½ä¸‹æ¥çš„å›¾ç‰‡æŒ‰ç…§è‡ªå·±è®¾ç½®çš„UIImageViewçš„å°ºå¯¸æ¥é‡æ–°drawä¸€ä¸ªã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">setImage</span>&lt;T: UIImageView&gt;<span class="params">(<span class="number">_</span> imageView: T, URLString: String, targetSize: CGSize)</span></span>&#123;</span><br><span class="line">Â  Â  Â  Â  imageView.pin_setImage(from: <span class="type">URL</span>.<span class="keyword">init</span>(string: <span class="type">URLString</span>), completion: &#123;(<span class="type">PINRemoteImageManagerResult</span>) <span class="keyword">in</span></span><br><span class="line">Â  Â  Â  Â  Â  Â  <span class="keyword">if</span> <span class="keyword">let</span> image = <span class="type">PINRemoteImageManagerResult</span>.image&#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  imageView.image = image.resizeImage(image, targetSize: targetSize)</span><br><span class="line">Â  Â  Â  Â  Â  Â  &#125;</span><br><span class="line">Â  Â  Â  Â  &#125;)</span><br><span class="line">Â  Â  &#125;</span><br></pre></td></tr></table></figure>
<p>é‡æ–°ç»™UIImageViewè®¾ç½®imageå±æ€§</p>
<p>é‡æ–°æ‰“å¼€Color Misaligned ImagesåŠŸèƒ½æ¥æ£€æµ‹ä¸€ä¸‹<br><img src="http://upload-images.jianshu.io/upload_images/1421047-95561fdba06255d9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/320/h/568" alt="Jietu20170112-140353.png"></p>
<p>å—¯ï¼ ä¸é”™å“¦ï¼Œä¹‹å‰çš„é»„è‰²æ²¡æœ‰äº†ã€‚ æœ¬ä»¥ä¸ºå°±è¾¾åˆ°äº†çš„è¦æ±‚ã€‚</p>
<p>ä½†æ˜¯ç”¨<code>Instruments</code>ä¸­<code>Time Profiler</code><br><img src="https://i.loli.net/2018/03/02/5a98f197b4aaa.png" alt="Jietu20170112-140732.png"><br>æ¥æ£€æµ‹ä¸‹å¤„ç†è¯¥å‡½æ•°æ‰€éœ€è¦çš„æ—¶é—´</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1421047-758e84ae67a3697e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Jietu20170112-141255.png"></p>
<p>ç”¨Core Animationæ¥æµ‹ä¸‹FPS</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1421047-7663f55e36043484.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Jietu20170112-142314.png"></p>
<p>è™½ç„¶å·²ç»å¾ˆæµç•…äº†ï¼ˆæ³¨ï¼šæ–‡æœ¬ç”¨åˆ°äº†å¼‚æ­¥ç»˜åˆ¶ï¼‰,  åŸºæœ¬åœ¨54å·¦å³ï¼Œ ä½†æ˜¯è·ç¦»æ»¡å¸§59 - 60è¿˜å·®é‚£ä¹ˆä¸€ä¸¢ä¸¢ã€‚</p>
<p>å†æ¥è§‚å¯Ÿç»™UIImageæ‰©å±•çš„è¿™ä¸ªæ–¹æ³• å‘ç°å®ƒæ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œå½“å¿«é€Ÿæ»‘åŠ¨è¡¨æ ¼æ—¶ï¼Œä¼šæœ‰å¤§é‡çš„å›¾ç‰‡åœ¨ä¸»çº¿ç¨‹ä¸­é‡æ–°ç»˜åˆ¶ã€‚è¿™ä¸ªæ˜¯é€ æˆç¼ºå¤±é‚£å‡ å¸§çš„ä¸»è¦åŸå› ã€‚</p>
<p>è§£å†³åŠæ³•ï¼šé‚£å°±åœ¨å­çº¿ç¨‹æ€»å»draw, åœ¨ä¸»çº¿ç¨‹ä¸­å»æ˜¾ç¤º</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIImageView</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">drawImage</span><span class="params">(<span class="number">_</span> image: UIImage, targetSize: CGSize)</span></span> &#123;</span><br><span class="line">        <span class="type">DispatchQueue</span>.global().async &#123;</span><br><span class="line">            <span class="keyword">let</span> newRect = <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: targetSize.width, height: targetSize.height).integral</span><br><span class="line">            <span class="type">UIGraphicsBeginImageContextWithOptions</span>(targetSize, <span class="literal">false</span>, <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> context = <span class="type">UIGraphicsGetCurrentContext</span>() &#123;</span><br><span class="line">                context.interpolationQuality = .high</span><br><span class="line">                <span class="keyword">let</span> flipVertical = <span class="type">CGAffineTransform</span>(a: <span class="number">1</span>, b: <span class="number">0</span>, <span class="built_in">c</span>: <span class="number">0</span>, d: -<span class="number">1</span>, tx: <span class="number">0</span>, ty: targetSize.height)</span><br><span class="line">                context.concatenate(flipVertical)</span><br><span class="line">                context.saveGState()</span><br><span class="line">                context.draw(image.cgImage!, <span class="keyword">in</span>: newRect)</span><br><span class="line">                context.restoreGState()</span><br><span class="line">                <span class="keyword">let</span> newImage = <span class="type">UIGraphicsGetImageFromCurrentImageContext</span>()</span><br><span class="line">                <span class="type">UIGraphicsEndImageContext</span>()</span><br><span class="line">                <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">                    <span class="keyword">if</span> <span class="keyword">let</span> newImage = newImage&#123;</span><br><span class="line">                        <span class="keyword">self</span>.layer.contents = newImage.cgImage</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Objective-C</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="keyword">void</span>)drawImage:(<span class="built_in">UIImage</span> *)image targetSize:(<span class="built_in">CGSize</span> )size&#123;</span><br><span class="line">    <span class="built_in">dispatch_async</span>(dispatch_get_global_queue(QOS_CLASS_DEFAULT, <span class="number">0</span>), ^&#123;</span><br><span class="line">        <span class="built_in">CGRect</span> newRect = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, size.width, size.height);</span><br><span class="line">        <span class="built_in">CGRectIntegral</span>(newRect);</span><br><span class="line">        <span class="built_in">UIGraphicsBeginImageContextWithOptions</span>(size, <span class="literal">NO</span>, [<span class="built_in">UIScreen</span> mainScreen].scale);</span><br><span class="line">        <span class="built_in">CGContextRef</span> context = <span class="built_in">UIGraphicsGetCurrentContext</span>();</span><br><span class="line">        <span class="built_in">CGContextSetInterpolationQuality</span>(context, kCGInterpolationHigh);</span><br><span class="line">        <span class="built_in">CGAffineTransform</span> transform = <span class="built_in">CGAffineTransformMake</span>(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>, size.height);</span><br><span class="line">        <span class="built_in">CGContextConcatCTM</span>(context, transform);</span><br><span class="line">        <span class="built_in">CGContextSaveGState</span>(context);</span><br><span class="line">        <span class="built_in">CGContextDrawImage</span>(context, newRect, image.CGImage);</span><br><span class="line">        <span class="built_in">CGContextRestoreGState</span>(context);</span><br><span class="line">        <span class="built_in">UIImage</span> *newImage = <span class="built_in">UIGraphicsGetImageFromCurrentImageContext</span>();</span><br><span class="line">        <span class="built_in">UIGraphicsEndImageContext</span>();</span><br><span class="line">        <span class="built_in">dispatch_async</span>(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">            <span class="keyword">if</span> (newImage) &#123;</span><br><span class="line">                <span class="keyword">self</span>.layer.contents = (<span class="keyword">id</span>)(newImage.CGImage);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯¥æ–¹æ³•ä¹Ÿå¾ˆç®€å•,åœ¨å­çº¿ç¨‹ä¸­å»é‡æ–°drawä¸€ä¸ªUIImage,åœ¨ä¸»çº¿ç¨‹ä¸­å»æ˜¾ç¤ºã€‚</p>
<p>è°ƒç”¨ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">setImage</span>&lt;T: UIImageView&gt;<span class="params">(<span class="number">_</span> imageView: T, URLString: String, targetSize: CGSize)</span></span>&#123;</span><br><span class="line">Â  Â  Â  Â  imageView.pin_setImage(from: <span class="type">URL</span>.<span class="keyword">init</span>(string: <span class="type">URLString</span>), completion: &#123;(<span class="type">PINRemoteImageManagerResult</span>) <span class="keyword">in</span></span><br><span class="line">Â  Â  Â  Â  Â  Â  <span class="keyword">if</span> <span class="keyword">let</span> image = <span class="type">PINRemoteImageManagerResult</span>.image&#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  imageView.drawImage(image, targetSize: targetSize)</span><br><span class="line"><span class="comment">//Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  imageView.image = image.resizeImage(image, targetSize: targetSize)</span></span><br><span class="line">Â  Â  Â  Â  Â  Â  &#125;</span><br><span class="line">Â  Â  Â  Â  &#125;)</span><br><span class="line">Â  Â  &#125;</span><br></pre></td></tr></table></figure>
<p>é‡æ–°æµ‹ä¸‹å¸§æ•°ä»¥åŠTime Profile</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1421047-2c7369df156405e6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Jietu20170112-143643.png"><br>å½“å¿«é€Ÿæ»‘åŠ¨çš„æ—¶å€™åŸºæœ¬ä¸Šèƒ½å¤Ÿè¾¾åˆ°æ…¢å¸§çš„çŠ¶æ€</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1421047-833bed416800300a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Jietu20170112-143924.png"><br>æ‰€ç”¨çš„æ—¶é—´ä¹Ÿæ˜¯éå¸¸å°‘çš„ã€‚åœ¨16msä»¥å†…ã€‚</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/08/dispatch-semaphore-t-ä¿¡å·é‡/" itemprop="url">
                  dispatch_semaphore_t ä¿¡å·é‡
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-12-08T16:20:14+08:00" content="2016-12-08">
              2016-12-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Objective-C/" itemprop="url" rel="index">
                    <span itemprop="name">Objective-C</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          
             <span id="/2016/12/08/dispatch-semaphore-t-ä¿¡å·é‡/" class="leancloud_visitors" data-flag-title="dispatch_semaphore_t ä¿¡å·é‡">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="dispatch-semaphore-create"><a href="#dispatch-semaphore-create" class="headerlink" title="dispatch_semaphore_create"></a><code>dispatch_semaphore_create</code></h1><p><code>dispatch_semaphore_create(long value)</code> ä¼ å…¥çš„æ˜¯ä¸€ä¸ªæ•°å­—,è¯¥æ•°å­—å¿…é¡»å¤§äºç­‰äº0ã€‚åˆ—å¦‚ä¼ å…¥10ï¼Œè¡¨ç¤ºåˆ›å»ºä¸€ä¸ªä¿¡å·æ€»é‡ä¸º10ä¿¡å·é‡ï¼ˆå°±å¥½æ¯”ä¸€å…±æœ‰10ä¸ªåœè½¦ä½ï¼‰ã€‚å‡å¦‚ä¼ å…¥0</p>
<p>The starting value for the semaphore. Passing a value less than zero will cause NULL to be returned.</p>
<p>åˆ™è¿”å›ä¸ºNULL</p>
<h1 id="dispatch-semaphore-wait"><a href="#dispatch-semaphore-wait" class="headerlink" title="dispatch_semaphore_wait"></a><code>dispatch_semaphore_wait</code></h1><p>è¯¥å‡½æ•°ä¼šä½¿ä¼ å…¥çš„ä¿¡å·é‡å‡1,å½“ä¿¡å·é‡æœ‰ &gt;= 1æ—¶,å°±ä¼šç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚å¦‚æœæ²¡æœ‰,è¯¥çº¿ç¨‹å°±ä¼šä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€ï¼Œå¯é˜»å¡å½“å‰çº¿ç¨‹ã€‚è¯¥å‡½æ•°éœ€è¦ä¼ å…¥å¦ä¸€ä¸ªå‚æ•° </p>
<p><code>#define DISPATCH_TIME_NOW  è¡¨ç¤ºä»ç°åœ¨å¼€å§‹ #define DISPATCH_TIME_FOREVER  è¡¨ç¤ºæ°¸ä¸è¶…æ—¶</code></p>
<h1 id="dispatch-semaphore-single"><a href="#dispatch-semaphore-single" class="headerlink" title="dispatch_semaphore_single"></a><code>dispatch_semaphore_single</code></h1><p>è¯¥å‡½æ•°ä¼šä½¿ä¼ å…¥çš„ä¿¡å·é‡åŠ 1,ä¸<code>dispatch_ semaphore _ wait</code>æˆå¯¹å‡ºç°ã€‚</p>
<p>æ‹¿YYKitæºç æ¥ä¸¾ä¾‹ï¼šåœ¨#import â€œUIButton+YYWebImage.mâ€ä¸­</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">instancetype</span>)init &#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</span><br><span class="line">    <span class="comment">//å£°æ˜ä¸€ä¸ªä¿¡å·æ€»é‡ä¸º1ä¿¡å·é‡</span></span><br><span class="line">    _lock = dispatch_semaphore_create(<span class="number">1</span>);</span><br><span class="line">    _dic = [<span class="built_in">NSMutableDictionary</span> new];</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (_YYWebImageSetter *)setterForState:(<span class="built_in">NSNumber</span> *)state &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ˜¯å½“å‰çº¿ç¨‹å¤„äºé˜»å¡çŠ¶æ€,ç›´åˆ°æœ‰ &gt;= 1 ä¿¡å·é‡æ‰ä¼šç»§ç»­æ‰§è¡Œä¸‹é¢çš„å–å€¼æ“ä½œ</span></span><br><span class="line">    dispatch_semaphore_wait(_lock, DISPATCH_TIME_FOREVER);</span><br><span class="line">    <span class="comment">//å¦‚æœä¸åŠ å…¥çº¿ç¨‹é”ï¼Œå°±å¾ˆæœ‰å¯èƒ½å‘ç”Ÿå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®_dicå­—å…¸,é€ æˆèµ„æºç«äº‰ã€‚</span></span><br><span class="line">    _YYWebImageSetter *<span class="keyword">setter</span> = _dic[state];</span><br><span class="line">    <span class="comment">//ä½¿è¯¥ä¿¡å·é‡åŠ 1ã€‚ä¿æŒä¿¡å·é‡çš„å¹³è¡¡ï¼Œå¦‚æœæ²¡æœ‰ä¿æŒä¿¡å·é‡çš„å¹³è¡¡,å¯èƒ½ä¼šå‡ºç°è«åçš„bug,ç”šè‡³crashã€‚</span></span><br><span class="line">    dispatch_semaphore_signal(_lock);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">setter</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (_YYWebImageSetter *)lazySetterForState:(<span class="built_in">NSNumber</span> *)state &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åŒç†</span></span><br><span class="line">    dispatch_semaphore_wait(_lock, DISPATCH_TIME_FOREVER);</span><br><span class="line">    _YYWebImageSetter *<span class="keyword">setter</span> = _dic[state];</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">setter</span>) &#123;</span><br><span class="line">        <span class="keyword">setter</span> = [_YYWebImageSetter new];</span><br><span class="line">        _dic[state] = <span class="keyword">setter</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    dispatch_semaphore_signal(_lock);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">setter</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¯»å–_YYWebImageSetterè¯¥å‡½æ•°ä¸­ä½¿ç”¨<code>dispatch_semaphore_wait</code>å’Œ<code>dispatch_semaphore_signal</code>ä½¿å½“å‰å‡½æ•°ä¸ºçº¿ç¨‹å®‰å…¨ã€‚å®é™…ä¸Šä¿¡å·é‡å°±æ˜¯é”ï¼Œå®ƒä¸ <code>@synchronized</code> å‡½æ•°çœ‹èµ·æ¥å¾ˆåƒã€‚æ‰€èµ·åˆ°çš„ä½œç”¨å°±æ˜¯è‡³å§‹è‡³ç»ˆåªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹å»è®¿é—®è¯¥å‡½æ•°ã€‚</p>
<p>åœ¨ <a href="http://www.cnblogs.com/snailHL/p/3906112.html" target="_blank" rel="noopener">è¿™è¾¹æ–‡ç« ä¸­</a>å¾ˆå½¢è±¡çš„æ¯”å–»äº†ä¿¡å·é‡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">å…³äºä¿¡å·é‡ï¼Œä¸€èˆ¬å¯ä»¥ç”¨åœè½¦æ¥æ¯”å–»ã€‚</span><br><span class="line"></span><br><span class="line">ã€€ã€€åœè½¦åœºå‰©ä½™4ä¸ªè½¦ä½ï¼Œé‚£ä¹ˆå³ä½¿åŒæ—¶æ¥äº†å››è¾†è½¦ä¹Ÿèƒ½åœçš„ä¸‹ã€‚å¦‚æœæ­¤æ—¶æ¥äº†äº”è¾†è½¦ï¼Œé‚£ä¹ˆå°±æœ‰ä¸€è¾†éœ€è¦ç­‰å¾…ã€‚</span><br><span class="line"></span><br><span class="line">ã€€ã€€ä¿¡å·é‡çš„å€¼å°±ç›¸å½“äºå‰©ä½™è½¦ä½çš„æ•°ç›®ï¼Œdispatch_semaphore_waitå‡½æ•°å°±ç›¸å½“äºæ¥äº†ä¸€è¾†è½¦ï¼Œdispatch_semaphore_signal</span><br><span class="line"></span><br><span class="line">ã€€ã€€å°±ç›¸å½“äºèµ°äº†ä¸€è¾†è½¦ã€‚åœè½¦ä½çš„å‰©ä½™æ•°ç›®åœ¨åˆå§‹åŒ–çš„æ—¶å€™å°±å·²ç»æŒ‡æ˜äº†ï¼ˆdispatch_semaphore_createï¼ˆlong valueï¼‰ï¼‰ï¼Œ</span><br><span class="line"></span><br><span class="line">ã€€ã€€è°ƒç”¨ä¸€æ¬¡dispatch_semaphore_signalï¼Œå‰©ä½™çš„è½¦ä½å°±å¢åŠ ä¸€ä¸ªï¼›è°ƒç”¨ä¸€æ¬¡dispatch_semaphore_waitå‰©ä½™è½¦ä½å°±å‡å°‘ä¸€ä¸ªï¼›</span><br><span class="line"></span><br><span class="line">ã€€ã€€å½“å‰©ä½™è½¦ä½ä¸º0æ—¶ï¼Œå†æ¥è½¦ï¼ˆå³è°ƒç”¨dispatch_semaphore_waitï¼‰å°±åªèƒ½ç­‰å¾…ã€‚æœ‰å¯èƒ½åŒæ—¶æœ‰å‡ è¾†è½¦ç­‰å¾…ä¸€ä¸ªåœè½¦ä½ã€‚æœ‰äº›è½¦ä¸»</span><br><span class="line"></span><br><span class="line">ã€€ã€€æ²¡æœ‰è€å¿ƒï¼Œç»™è‡ªå·±è®¾å®šäº†ä¸€æ®µç­‰å¾…æ—¶é—´ï¼Œè¿™æ®µæ—¶é—´å†…ç­‰ä¸åˆ°åœè½¦ä½å°±èµ°äº†ï¼Œå¦‚æœç­‰åˆ°äº†å°±å¼€è¿›å»åœè½¦ã€‚è€Œæœ‰äº›è½¦ä¸»å°±åƒæŠŠè½¦åœåœ¨è¿™ï¼Œ</span><br><span class="line"></span><br><span class="line">ã€€ã€€æ‰€ä»¥å°±ä¸€ç›´ç­‰ä¸‹å»ã€‚</span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¸ªğŸŒ°   NSMutableArrayä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„,æˆ‘ä»¬å¯ä»¥ç¨ä½œä¿®é¥°,çº¿ç¨‹å®‰å…¨çš„å»æ›´æ–°æ•°ç»„</p>
<p>ã€€<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSMutableArray</span> *array = [<span class="built_in">NSMutableArray</span> array];</span><br><span class="line"> dispatch_semaphore_t semphore = dispatch_semaphore_create(<span class="number">1</span>);</span><br><span class="line"> <span class="built_in">dispatch_queue_t</span> concurrentQueue = dispatch_queue_create(<span class="string">"com.lx.gcddemo"</span>,DISPATCH_QUEUE_CONCURRENT);</span><br><span class="line">      dispatch_apply(<span class="number">100</span>, concurrentQueue, ^(size_t i) &#123;</span><br><span class="line">          dispatch_semaphore_wait(semphore, DISPATCH_TIME_FOREVER);</span><br><span class="line">          <span class="comment">/*</span></span><br><span class="line"><span class="comment">          @synchronized (array) &#123;</span></span><br><span class="line"><span class="comment">              [array addObject:[NSNumber numberWithUnsignedInteger:i]];</span></span><br><span class="line"><span class="comment">          &#125;</span></span><br><span class="line"><span class="comment">           */</span></span><br><span class="line">          [array addObject:[<span class="built_in">NSNumber</span> numberWithUnsignedInteger:i]];</span><br><span class="line">          dispatch_semaphore_signal(semphore);</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,array);</span><br></pre></td></tr></table></figure></p>
<p>ã€€ã€€
ã€€ã€€</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/14/cocoapodså‡çº§1.1.0/" itemprop="url">
                  cocoapods æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬(1.1.0)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-10-14T20:45:52+08:00" content="2016-10-14">
              2016-10-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/å…¶ä»–/" itemprop="url" rel="index">
                    <span itemprop="name">å…¶ä»–</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          
             <span id="/2016/10/14/cocoapodså‡çº§1.1.0/" class="leancloud_visitors" data-flag-title="cocoapods æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬(1.1.0)">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>åœ¨Apple å‘å¸ƒswift3.0ä¹‹å ä¸€å¤§éƒ¨åˆ†è‘—åçš„ç¬¬ä¸‰æ–¹å¼€æºåº“,æ¯”å¦‚Alamofire,snapKit ä¹‹åéƒ½é™†ç»­æ›´æ–°åˆ°swift3.0ã€‚å½“æˆ‘ä»¬ç”¨cocoapodsç®¡ç†å®ƒä»¬æˆ–è€…ä½¿ç”¨å®ƒä»¬çš„æ—¶å€™éƒ½ä¼šçœ‹åˆ°è¿™æ ·ä¸€å¥è¯:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CocoaPods 1.1.0+ is required to build Alamofire 4.0.0+.</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CocoaPods 1.1.0+ is required to build SnapKit 3.0.0+.</span><br></pre></td></tr></table></figure>
<p>éœ€è¦å°†cocoapodsæ›´æ–°åˆ°1.1.0ç‰ˆæœ¬ä»¥ä¸Š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gem install cocoapods --pre //å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ä¼šé‡åˆ°æƒé™é—®é¢˜</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR:  While executing gem ... (Errno::EPERM) Operation not permitted - /usr/bin/pod</span><br></pre></td></tr></table></figure>
<p>éœ€è¦è¿™ä¹ˆä¸€å¥è¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gem install cocoapods --pre -n /usr/local/bin cocoa pods</span><br></pre></td></tr></table></figure>
<p>åœ¨10.11ä»¥ä¸Šçš„ç³»ç»Ÿä¸­Appleå·²ç»å¯ç”¨æ— æ ¹çš„å®‰è£… stack overflowè¿™ä¹ˆè§£é‡Š:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">This is happening because Apple has enabled rootless on the new install</span><br></pre></td></tr></table></figure>
<p><a href="http://stackoverflow.com/questions/30812777/cannot-install-cocoa-pods-after-uninstalling-results-in-error/" target="_blank" rel="noopener">å‚è€ƒé“¾æ¥</a></p>
<p>æŸ¥çœ‹cocoapodså½“å‰ç‰ˆæœ¬</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod --version</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.1.0.beta.2</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶cocoapodsç‰ˆæœ¬å°±ä¼šæ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/10/iOSå¼€å‘å°æŠ€å·§(ä¸€)/" itemprop="url">
                  iOSå¼€å‘å°æŠ€å·§(ä¸€)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-10-10T20:44:20+08:00" content="2016-10-10">
              2016-10-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Objective-C/" itemprop="url" rel="index">
                    <span itemprop="name">Objective-C</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          
             <span id="/2016/10/10/iOSå¼€å‘å°æŠ€å·§(ä¸€)/" class="leancloud_visitors" data-flag-title="iOSå¼€å‘å°æŠ€å·§(ä¸€)">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="æ”¹å˜UIImagePickerControllerçš„å¯¼èˆªæ¡ä»¥åŠtitleçš„é¢œè‰²"><a href="#æ”¹å˜UIImagePickerControllerçš„å¯¼èˆªæ¡ä»¥åŠtitleçš„é¢œè‰²" class="headerlink" title="æ”¹å˜UIImagePickerControllerçš„å¯¼èˆªæ¡ä»¥åŠtitleçš„é¢œè‰²"></a>æ”¹å˜UIImagePickerControllerçš„å¯¼èˆªæ¡ä»¥åŠtitleçš„é¢œè‰²</h1><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)navigationController:(<span class="built_in">UINavigationController</span> *)navigationController willShowViewController:(<span class="built_in">UIViewController</span> *)viewController animated:(<span class="built_in">BOOL</span>)animated</span><br><span class="line">&#123;</span><br><span class="line">   [<span class="built_in">UIApplication</span> sharedApplication].statusBarStyle = <span class="built_in">UIStatusBarStyleLightContent</span>;</span><br><span class="line">    <span class="built_in">UINavigationBar</span> *bar = [<span class="built_in">UINavigationBar</span> appearance];</span><br><span class="line">    <span class="built_in">NSMutableDictionary</span> *titleDictionary = [<span class="built_in">NSMutableDictionary</span> dictionary];</span><br><span class="line">    titleDictionary[<span class="built_in">NSForegroundColorAttributeName</span>] = [<span class="built_in">UIColor</span> whiteColor];</span><br><span class="line">    [bar setTitleTextAttributes:titleDictionary];</span><br><span class="line">    viewController.navigationController.navigationBar.barTintColor = DIF_BASE_COLOR;</span><br><span class="line">    viewController.navigationController.navigationBar.tintColor = [<span class="built_in">UIColor</span> whiteColor];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åˆ©ç”¨KVCæ”¹å˜TextFieldçš„å ä½ç¬¦çš„é¢œè‰²"><a href="#åˆ©ç”¨KVCæ”¹å˜TextFieldçš„å ä½ç¬¦çš„é¢œè‰²" class="headerlink" title="åˆ©ç”¨KVCæ”¹å˜TextFieldçš„å ä½ç¬¦çš„é¢œè‰²"></a>åˆ©ç”¨KVCæ”¹å˜TextFieldçš„å ä½ç¬¦çš„é¢œè‰²</h1><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">self</span>.nickNameTextField setValue:[<span class="built_in">UIColor</span> whiteColor] forKeyPath:<span class="string">@"_placeholderLabel.textColor"</span>];</span><br></pre></td></tr></table></figure>
<h1 id="TextViewçš„å­—æ•°é™åˆ¶"><a href="#TextViewçš„å­—æ•°é™åˆ¶" class="headerlink" title="TextViewçš„å­—æ•°é™åˆ¶"></a>TextViewçš„å­—æ•°é™åˆ¶</h1><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#define MaxNumberOfDescriptionChars  150</span></span><br><span class="line"></span><br><span class="line">-(<span class="keyword">void</span>)textViewEditChanged:(<span class="built_in">NSNotification</span> *)obj&#123;</span><br><span class="line">    <span class="built_in">UITextView</span> *textView = (<span class="built_in">UITextView</span> *)obj.object;</span><br><span class="line">    <span class="built_in">NSString</span> *toBeString = textView.text;</span><br><span class="line">    <span class="built_in">NSString</span> *lang = [[<span class="built_in">UITextInputMode</span> currentInputMode] primaryLanguage]; <span class="comment">// é”®ç›˜è¾“å…¥æ¨¡å¼</span></span><br><span class="line">    <span class="keyword">if</span> ([lang isEqualToString:<span class="string">@"zh-Hans"</span>]) &#123; <span class="comment">// ç®€ä½“ä¸­æ–‡è¾“å…¥ï¼ŒåŒ…æ‹¬ç®€ä½“æ‹¼éŸ³ï¼Œå¥ä½“äº”ç¬”ï¼Œç®€ä½“æ‰‹å†™</span></span><br><span class="line">        <span class="built_in">UITextRange</span> *selectedRange = [textView markedTextRange];</span><br><span class="line">        <span class="comment">//è·å–é«˜äº®éƒ¨åˆ†</span></span><br><span class="line">        <span class="built_in">UITextPosition</span> *position = [textView positionFromPosition:selectedRange.start offset:<span class="number">0</span>];</span><br><span class="line">        <span class="comment">// æ²¡æœ‰é«˜äº®é€‰æ‹©çš„å­—ï¼Œåˆ™å¯¹å·²è¾“å…¥çš„æ–‡å­—è¿›è¡Œå­—æ•°ç»Ÿè®¡å’Œé™åˆ¶</span></span><br><span class="line">        <span class="keyword">if</span> (!position) &#123;</span><br><span class="line">            <span class="keyword">if</span> (toBeString.length &gt; MaxNumberOfDescriptionChars) &#123;</span><br><span class="line">                textView.text = [toBeString substringToIndex:MaxNumberOfDescriptionChars];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æœ‰é«˜äº®é€‰æ‹©çš„å­—ç¬¦ä¸²ï¼Œåˆ™æš‚ä¸å¯¹æ–‡å­—è¿›è¡Œç»Ÿè®¡å’Œé™åˆ¶</span></span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ä¸­æ–‡è¾“å…¥æ³•ä»¥å¤–çš„ç›´æ¥å¯¹å…¶ç»Ÿè®¡é™åˆ¶å³å¯ï¼Œä¸è€ƒè™‘å…¶ä»–è¯­ç§æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (toBeString.length &gt; MaxNumberOfDescriptionChars) &#123;</span><br><span class="line">            </span><br><span class="line">            textView.text = [toBeString substringToIndex:MaxNumberOfDescriptionChars];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">BOOL</span>)textView:(<span class="built_in">UITextView</span> *)textView shouldChangeTextInRange:(<span class="built_in">NSRange</span>)range replacementText:(<span class="built_in">NSString</span> *)text&#123;</span><br><span class="line">    <span class="built_in">NSString</span> *new = [textView.text stringByReplacingCharactersInRange:range withString:text];</span><br><span class="line">    <span class="keyword">self</span>.numLabel.text = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%zdå­—"</span>,(MaxNumberOfDescriptionChars - new.length)];</span><br><span class="line">    <span class="keyword">if</span>(new.length &gt; MaxNumberOfDescriptionChars)&#123;</span><br><span class="line">         <span class="keyword">self</span>.numLabel.text = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%zdå­—"</span>,<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">if</span> (![text isEqualToString:<span class="string">@""</span>]) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åˆ¤æ–­å­—ç¬¦ä¸²æˆ–è€…é›†åˆç±»å‹æ˜¯å¦ä¸ºç©º"><a href="#åˆ¤æ–­å­—ç¬¦ä¸²æˆ–è€…é›†åˆç±»å‹æ˜¯å¦ä¸ºç©º" class="headerlink" title="åˆ¤æ–­å­—ç¬¦ä¸²æˆ–è€…é›†åˆç±»å‹æ˜¯å¦ä¸ºç©º"></a>åˆ¤æ–­å­—ç¬¦ä¸²æˆ–è€…é›†åˆç±»å‹æ˜¯å¦ä¸ºç©º</h1><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="built_in">BOOL</span>)isEmpty:(<span class="keyword">id</span> )obj</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> ([obj isKindOfClass:[<span class="built_in">NSString</span> <span class="keyword">class</span>]]) &#123;</span><br><span class="line">        <span class="keyword">if</span>(obj == <span class="literal">nil</span> || [obj <span class="keyword">class</span>] == [<span class="built_in">NSNull</span> null] || [obj isEqualToString:<span class="string">@""</span>] || [obj isEqualToString:<span class="string">@"(null)"</span>] || [obj isEqualToString:<span class="string">@"NULL"</span>] || [obj isEqualToString:<span class="string">@"&lt;null&gt;"</span>] || [obj isEqualToString:<span class="string">@"null"</span>])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (obj == <span class="literal">nil</span> || (<span class="built_in">NSNull</span> *)obj == [<span class="built_in">NSNull</span> null] || ([obj respondsToSelector:<span class="keyword">@selector</span>(length)] &amp;&amp; [obj length] == <span class="number">0</span>) || ([obj respondsToSelector:<span class="keyword">@selector</span>(count)] &amp;&amp; [obj count] == <span class="number">0</span>))&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ç»™UIResponderæ·»åŠ indexPathå±æ€§"><a href="#ç»™UIResponderæ·»åŠ indexPathå±æ€§" class="headerlink" title="ç»™UIResponderæ·»åŠ indexPathå±æ€§"></a>ç»™UIResponderæ·»åŠ indexPathå±æ€§</h1><h2 id="åˆ—å¦‚åœ¨cellä¸­æœ‰button-imageview-å¯ä»¥åˆ©ç”¨è¯¥å±æ€§æ‰¾åˆ°cellä¸­æ”¹è¯¥è§†å›¾"><a href="#åˆ—å¦‚åœ¨cellä¸­æœ‰button-imageview-å¯ä»¥åˆ©ç”¨è¯¥å±æ€§æ‰¾åˆ°cellä¸­æ”¹è¯¥è§†å›¾" class="headerlink" title="åˆ—å¦‚åœ¨cellä¸­æœ‰button imageview å¯ä»¥åˆ©ç”¨è¯¥å±æ€§æ‰¾åˆ°cellä¸­æ”¹è¯¥è§†å›¾"></a>åˆ—å¦‚åœ¨cellä¸­æœ‰button imageview å¯ä»¥åˆ©ç”¨è¯¥å±æ€§æ‰¾åˆ°cellä¸­æ”¹è¯¥è§†å›¾</h2><h3 id="objective-C"><a href="#objective-C" class="headerlink" title="objective - C"></a>objective - C</h3><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">UIResponder</span> (<span class="title">Externtion</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSIndexPath</span> *indexPath;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)setIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath</span><br><span class="line">&#123;</span><br><span class="line">    objc_setAssociatedObject(<span class="keyword">self</span>, <span class="keyword">@selector</span>(indexPath), indexPath, OBJC_ASSOCIATION_RETAIN_NONATOMIC);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSIndexPath</span> *)indexPath&#123;</span><br><span class="line">    <span class="keyword">return</span> objc_getAssociatedObject(<span class="keyword">self</span>, <span class="keyword">@selector</span>(indexPath));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="swift"><a href="#swift" class="headerlink" title="swift"></a>swift</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIResponder</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">   <span class="keyword">private</span> <span class="class"><span class="keyword">struct</span> <span class="title">AssociatedKey</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> <span class="type">AssociatedName</span> = <span class="string">"AssociatedName"</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> indexPath: <span class="type">NSIndexPath</span>?&#123;</span><br><span class="line">        <span class="keyword">get</span>&#123;</span><br><span class="line">           <span class="keyword">return</span> objc_getAssociatedObject(<span class="keyword">self</span>, &amp;<span class="type">AssociatedKey</span>.<span class="type">AssociatedName</span>) <span class="keyword">as</span>? <span class="type">NSIndexPath</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">set</span>&#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> newValue = newValue &#123;</span><br><span class="line">                objc_setAssociatedObject(<span class="keyword">self</span>, &amp;<span class="type">AssociatedKey</span>.<span class="type">AssociatedName</span>, newValue <span class="keyword">as</span> <span class="type">NSIndexPath</span> , .<span class="type">OBJC_ASSOCIATION_RETAIN_NONATOMIC</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="UIRefreshControl"><a href="#UIRefreshControl" class="headerlink" title="UIRefreshControl"></a>UIRefreshControl</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> refresh = <span class="type">UIRefreshControl</span>.<span class="keyword">init</span>()</span><br><span class="line">        refresh.tintColor = <span class="type">UIColor</span>.red</span><br><span class="line">        refresh.attributedTitle = <span class="type">NSAttributedString</span>.<span class="keyword">init</span>(string: <span class="string">"æ­£åœ¨åŠ è½½"</span>)</span><br><span class="line">        refresh.addTarget(<span class="keyword">self</span>, action: #selector(<span class="type">ViewController</span>.refreshTabeleView(sender:)), <span class="keyword">for</span>: <span class="type">UIControlEvents</span>.valueChanged)</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        tableView.refreshControl = refresh</span><br><span class="line">        tableView.addSubview(refresh)</span><br><span class="line">        tableView.reloadData()</span><br></pre></td></tr></table></figure>
<h1 id="å°†HTMLå­—ç¬¦ä¸²è½¬åŒ–ä¸ºNSAttributedStringå¯Œæ–‡æœ¬å­—ç¬¦ä¸²"><a href="#å°†HTMLå­—ç¬¦ä¸²è½¬åŒ–ä¸ºNSAttributedStringå¯Œæ–‡æœ¬å­—ç¬¦ä¸²" class="headerlink" title="å°†HTMLå­—ç¬¦ä¸²è½¬åŒ–ä¸ºNSAttributedStringå¯Œæ–‡æœ¬å­—ç¬¦ä¸²"></a>å°†HTMLå­—ç¬¦ä¸²è½¬åŒ–ä¸ºNSAttributedStringå¯Œæ–‡æœ¬å­—ç¬¦ä¸²</h1><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">NSAttributedString</span> *)attributedStringWithHTMLString:(<span class="built_in">NSString</span> *)htmlString</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSDictionary</span> *options = @&#123; <span class="built_in">NSDocumentTypeDocumentAttribute</span> : <span class="built_in">NSHTMLTextDocumentType</span>,</span><br><span class="line">                               <span class="built_in">NSCharacterEncodingDocumentAttribute</span> :@(<span class="built_in">NSUTF8StringEncoding</span>) &#125;;</span><br><span class="line">   </span><br><span class="line">    <span class="built_in">NSData</span> *data = [htmlString dataUsingEncoding:<span class="built_in">NSUTF8StringEncoding</span>];</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">return</span> [[<span class="built_in">NSAttributedString</span> alloc] initWithData:data options:options documentAttributes:<span class="literal">nil</span> error:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="CABasicAnimationï¼ˆCAKeyframeAnimationï¼‰key-path-å–å€¼"><a href="#CABasicAnimationï¼ˆCAKeyframeAnimationï¼‰key-path-å–å€¼" class="headerlink" title="CABasicAnimationï¼ˆCAKeyframeAnimationï¼‰key path å–å€¼"></a>CABasicAnimationï¼ˆCAKeyframeAnimationï¼‰key path å–å€¼</h1><h2 id="keyPathå¯ä»¥ä½¿ç”¨çš„key"><a href="#keyPathå¯ä»¥ä½¿ç”¨çš„key" class="headerlink" title="keyPathå¯ä»¥ä½¿ç”¨çš„key"></a>keyPathå¯ä»¥ä½¿ç”¨çš„key</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">- define angle2Radian(angle) ((angle)/180.0*M_PI)</span><br><span class="line"></span><br><span class="line">transform.rotation.x å›´ç»•xè½´ç¿»è½¬ å‚æ•°ï¼šè§’åº¦ angle2Radian(4)</span><br><span class="line"></span><br><span class="line">transform.rotation.y å›´ç»•yè½´ç¿»è½¬ å‚æ•°ï¼šåŒä¸Š</span><br><span class="line"></span><br><span class="line">transform.rotation.z å›´ç»•zè½´ç¿»è½¬ å‚æ•°ï¼šåŒä¸Š</span><br><span class="line"></span><br><span class="line">transform.rotation é»˜è®¤å›´ç»•zè½´</span><br><span class="line"></span><br><span class="line">transform.scale.x xæ–¹å‘ç¼©æ”¾ å‚æ•°ï¼šç¼©æ”¾æ¯”ä¾‹ 1.5</span><br><span class="line"></span><br><span class="line">transform.scale.y yæ–¹å‘ç¼©æ”¾ å‚æ•°ï¼šåŒä¸Š</span><br><span class="line"></span><br><span class="line">transform.scale.z zæ–¹å‘ç¼©æ”¾ å‚æ•°ï¼šåŒä¸Š</span><br><span class="line"></span><br><span class="line">transform.scale æ‰€æœ‰æ–¹å‘ç¼©æ”¾ å‚æ•°ï¼šåŒä¸Š</span><br><span class="line"></span><br><span class="line">transform.translation.x xæ–¹å‘ç§»åŠ¨ å‚æ•°ï¼šxè½´ä¸Šçš„åæ ‡ 100</span><br><span class="line"></span><br><span class="line">transform.translation.y xæ–¹å‘ç§»åŠ¨ å‚æ•°ï¼šyè½´ä¸Šçš„åæ ‡</span><br><span class="line"></span><br><span class="line">transform.translation.z xæ–¹å‘ç§»åŠ¨ å‚æ•°ï¼šzè½´ä¸Šçš„åæ ‡</span><br><span class="line"></span><br><span class="line">transform.translation ç§»åŠ¨ å‚æ•°ï¼šç§»åŠ¨åˆ°çš„ç‚¹ ï¼ˆ100ï¼Œ100ï¼‰</span><br><span class="line"></span><br><span class="line">opacity é€æ˜åº¦ å‚æ•°ï¼šé€æ˜åº¦ 0.5</span><br><span class="line"></span><br><span class="line">backgroundColor èƒŒæ™¯é¢œè‰² å‚æ•°ï¼šé¢œè‰² (id)[[UIColor redColor] CGColor]</span><br><span class="line"></span><br><span class="line">cornerRadius åœ†è§’ å‚æ•°ï¼šåœ†è§’åŠå¾„ 5</span><br><span class="line"></span><br><span class="line">borderWidth è¾¹æ¡†å®½åº¦ å‚æ•°ï¼šè¾¹æ¡†å®½åº¦ 5</span><br><span class="line"></span><br><span class="line">bounds å¤§å° å‚æ•°ï¼šCGRect</span><br><span class="line"></span><br><span class="line">contents å†…å®¹ å‚æ•°ï¼šCGImage</span><br><span class="line"></span><br><span class="line">contentsRect å¯è§†å†…å®¹ å‚æ•°ï¼šCGRect å€¼æ˜¯0ï½1ä¹‹é—´çš„å°æ•°</span><br><span class="line"></span><br><span class="line">hidden æ˜¯å¦éšè—</span><br><span class="line"></span><br><span class="line">position</span><br><span class="line"></span><br><span class="line">shadowColor</span><br><span class="line"></span><br><span class="line">shadowOffset</span><br><span class="line"></span><br><span class="line">shadowOpacity</span><br><span class="line"></span><br><span class="line">shadowRadius</span><br></pre></td></tr></table></figure>
<h1 id="éšè—å¯¼èˆªæ¡å’ŒtabBarçš„ç›´çº¿"><a href="#éšè—å¯¼èˆªæ¡å’ŒtabBarçš„ç›´çº¿" class="headerlink" title="éšè—å¯¼èˆªæ¡å’ŒtabBarçš„ç›´çº¿"></a>éšè—å¯¼èˆªæ¡å’ŒtabBarçš„ç›´çº¿</h1><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UINavigationBar</span> *bar = [<span class="built_in">UINavigationBar</span> appearance];</span><br><span class="line">bar.shadowImage = [<span class="built_in">UIImage</span> new];</span><br><span class="line">[bar setBackgroundImage:[<span class="built_in">UIImage</span> new] forBarMetrics:<span class="built_in">UIBarMetricsDefault</span>];</span><br></pre></td></tr></table></figure>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UITabBar</span> *tabBar = [<span class="built_in">UITabBar</span> appearance];</span><br><span class="line">tabBar.shadowImage = [<span class="built_in">UIImage</span> new];</span><br><span class="line">tabBar.backgroundImage = [<span class="built_in">UIImage</span> new];</span><br></pre></td></tr></table></figure>
<h1 id="å…¨å±æ‰‹åŠ¿è¿”å›"><a href="#å…¨å±æ‰‹åŠ¿è¿”å›" class="headerlink" title="å…¨å±æ‰‹åŠ¿è¿”å›"></a>å…¨å±æ‰‹åŠ¿è¿”å›</h1><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIPanGestureRecognizer</span> *pan = [[<span class="built_in">UIPanGestureRecognizer</span> alloc] initWithTarget:<span class="keyword">self</span>.interactivePopGestureRecognizer.delegate action:<span class="keyword">@selector</span>(handleNavigationTransition:)];</span><br><span class="line">pan.delegate = <span class="keyword">self</span>;</span><br><span class="line">[<span class="keyword">self</span>.view addGestureRecognizer:pan];</span><br></pre></td></tr></table></figure>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">BOOL</span>)gestureRecognizer:(<span class="built_in">UIGestureRecognizer</span> *)gestureRecognizer shouldReceiveTouch:(<span class="built_in">UITouch</span> *)touch</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>.childViewControllers.count &gt; <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="UITextViewçš„placeholder"><a href="#UITextViewçš„placeholder" class="headerlink" title="UITextViewçš„placeholder"></a>UITextViewçš„placeholder</h1><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)textViewDidBeginEditing:(<span class="built_in">UITextView</span> *)textView &#123;</span><br><span class="line">    [<span class="keyword">self</span> resetTextViewPlaceholderWithText:textView];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)textViewDidEndEditing:(<span class="built_in">UITextView</span> *)textView &#123;</span><br><span class="line">    [<span class="keyword">self</span> resetTextViewPlaceholderWithText:textView];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)resetTextViewPlaceholderWithText:(<span class="built_in">UITextView</span> *)textView</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> ([textView.text isEqualToString:<span class="string">@"è¦æ˜¾ç¤ºçš„placeholder"</span>]) &#123;</span><br><span class="line">        textView.text = <span class="string">@""</span>;</span><br><span class="line">        textView.textColor = [<span class="built_in">UIColor</span> blackColor];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (textView.text.length &lt; <span class="number">1</span>) &#123;</span><br><span class="line">        textView.text = <span class="string">@"è¦æ˜¾ç¤ºçš„placeholder"</span>;</span><br><span class="line">        textView.textColor = [<span class="built_in">UIColor</span> colorWithRed:<span class="number">0.87</span> green:<span class="number">0.87</span> blue:<span class="number">0.87</span> alpha:<span class="number">1.00</span>];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è®©åº”ç”¨æ”¯æŒæ‘‡ä¸€æ‘‡"><a href="#è®©åº”ç”¨æ”¯æŒæ‘‡ä¸€æ‘‡" class="headerlink" title="è®©åº”ç”¨æ”¯æŒæ‘‡ä¸€æ‘‡"></a>è®©åº”ç”¨æ”¯æŒæ‘‡ä¸€æ‘‡</h1><ul>
<li>å¼€å¯æ‘‡ä¸€æ‘‡æƒé™</li>
</ul>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="built_in">UIApplication</span> sharedApplication].applicationSupportsShakeToEdit = <span class="literal">YES</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>è®©view/viewcontrolleræˆä¸ºç¬¬ä¸€å“åº”è€…</li>
</ul>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#pragma mark - UIResponder</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)canBecomeFirstResponder &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>å®ç°æ–¹å‘</li>
</ul>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#pragma mark - æ‘‡åŠ¨</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  æ‘‡åŠ¨å¼€å§‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)motionBegan:(<span class="built_in">UIEventSubtype</span>)motion withEvent:(<span class="built_in">UIEvent</span> *)event &#123;</span><br><span class="line">    <span class="keyword">if</span> (motion == <span class="built_in">UIEventSubtypeMotionShake</span>) &#123;</span><br><span class="line">    <span class="comment">// do some thing</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  æ‘‡åŠ¨ç»“æŸ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)motionEnded:(<span class="built_in">UIEventSubtype</span>)motion withEvent:(<span class="built_in">UIEvent</span> *)event &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  æ‘‡åŠ¨å–æ¶ˆ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)motionCancelled:(<span class="built_in">UIEventSubtype</span>)motion withEvent:(<span class="built_in">UIEvent</span> *)event &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="HeaderViewéštableviewä¸€èµ·æ»‘åŠ¨"><a href="#HeaderViewéštableviewä¸€èµ·æ»‘åŠ¨" class="headerlink" title="HeaderViewéštableviewä¸€èµ·æ»‘åŠ¨"></a>HeaderViewéštableviewä¸€èµ·æ»‘åŠ¨</h1><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)scrollViewDidScroll:(<span class="built_in">UIScrollView</span> *)scrollView</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (scrollView == <span class="keyword">self</span>.tableView) &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">CGFloat</span> headerHeight = DIF_SCREEN_HEIGHT / <span class="number">3</span>;</span><br><span class="line">        <span class="keyword">if</span> (scrollView.contentOffset.y &lt;= headerHeight &amp;&amp; scrollView.contentOffset.y &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            scrollView.contentInset = <span class="built_in">UIEdgeInsetsMake</span>(-scrollView.contentOffset.y, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (scrollView.contentOffset.y &gt;= headerHeight)&#123;</span><br><span class="line">            scrollView.contentInset = <span class="built_in">UIEdgeInsetsMake</span>(-headerHeight, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.png"
               alt="Hello Li" />
          <p class="site-author-name" itemprop="name">Hello Li</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">15</span>
              <span class="site-state-item-name">æ—¥å¿—</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">åˆ†ç±»</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/sunshineLixun" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hello Li</span>
</div>

<div class="powered-by">
  ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("2i0jddK6AkBmJ3LyGqEbNhfO-gzGzoHsz", "j7dHuehi8Wf97HyMAU4tQb7a");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

</body>
</html>
