<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="åšä¸€ä¸ªæœ‰æ–‡è‰ºæ°”æ¯çš„ç¨‹åºçŒ¿">
<meta property="og:type" content="website">
<meta property="og:title" content="Sunshine">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Sunshine">
<meta property="og:description" content="åšä¸€ä¸ªæœ‰æ–‡è‰ºæ°”æ¯çš„ç¨‹åºçŒ¿">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sunshine">
<meta name="twitter:description" content="åšä¸€ä¸ªæœ‰æ–‡è‰ºæ°”æ¯çš„ç¨‹åºçŒ¿">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'åšä¸»'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/"/>

  <title> Sunshine </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Sunshine</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">lxçš„ä¸ªäººåšå®¢</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/09/01/AutoLayout-çˆ¶è§†å›¾æ ¹æ®å­è§†å›¾è‡ªé€‚åº”/" itemprop="url">
                  AutoLayout - çˆ¶è§†å›¾æ ¹æ®å­è§†å›¾å¸ƒå±€è‡ªé€‚åº”å¤§å°
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2017-09-01T15:54:00+08:00" content="2017-09-01">
              2017-09-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬æ–‡è®°å½•AutoLayoutæ—¥å¸¸å¸ƒå±€UIæ—¶çš„æŠ€å·§ã€‚æ¯å½“æ‹¿åˆ°æ–°çš„ç•Œé¢è®¾è®¡æ—¶,æ¯”å¦‚è¿™æ ·çš„: </p>
<p><img src="http://upload-images.jianshu.io/upload_images/1421047-bdaebdfbc2cc1e82.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2017-09-04 ä¸‹åˆ8.25.17.png"><img src="http://upload-images.jianshu.io/upload_images/1421047-21afdb0616ae47af.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2017-09-04 ä¸‹åˆ8.26.28.png"></p>
<p>å½“æŸä¸ªå­—æ®µçš„é•¿åº¦ä¸ç¡®å®šæ—¶,(å›¾1ä¸­çš„â€œä½œä¸šåœ°å€â€,å›¾2ä¸­â€é¢„çº¦åœ°å€â€å’Œâ€œå–æ¶ˆåŸå› â€)ã€‚Labelçš„è¡Œæ•°å°±è¦è®¾ç½®ä¸º0æˆ–è€… &gt;=1ã€‚æ€»è¯•å›¾çš„é«˜åº¦å°±ä¸ç¡®å®šã€‚äºæ˜¯ä¹å°±è¦å¼€å§‹å°±ç®—containerViewçš„é«˜åº¦äº†ã€‚</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">CGFloat</span>)cellHeight&#123;</div><div class="line">	<span class="built_in">CGFloat</span> publicHeight = kViewTopPadding + kImageSize().height + kViewTypeMargin + _nameStrSize.height + kViewTypePadding + _nameTextSize.height + kViewTypeMargin / <span class="number">2</span> + kCellBottomPadding;</div><div class="line">	<span class="keyword">switch</span> (_layoutViewType) &#123;</div><div class="line">		<span class="keyword">case</span> ViewLayoutBreviaryType:</div><div class="line">			<span class="keyword">return</span> publicHeight;</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">case</span> ViewLayoutDetailType:</div><div class="line">			<span class="comment">//åˆ¤æ–­å½“å‰modelå­˜å‚¨çš„ä¿¡æ¯æ˜¯å¾…æ‰§è¡Œè¿˜æ˜¯å·²å–æ¶ˆçŠ¶æ€</span></div><div class="line">			<span class="keyword">if</span> (_orderModel.reserveType == YWBOrderReservationToBeConfirm) &#123;</div><div class="line">				<span class="keyword">return</span> publicHeight + kViewTypeMargin / <span class="number">2</span> + _addressStrSize.height + kViewTypePadding + _addressTextSize.height + kViewTypeMargin + _typeStrSize.height + _typeTextSize.height + kViewTypeMargin + kButtonHeight + kViewBottomPadding + kCellBottomPadding;</div><div class="line">			&#125;<span class="keyword">else</span> <span class="keyword">if</span>(_orderModel.reserveType == YWBOrderReservationCancledForSaler || _orderModel.reserveType == YWBOrderReservationCancledForClient)&#123;</div><div class="line">				<span class="keyword">return</span> publicHeight + kViewTypeMargin / <span class="number">2</span> + _addressStrSize.height + kViewTypePadding + _addressTextSize.height + kViewTypeMargin + _cancleStrSize.height + kViewTypePadding + _cancleTextSize.height + kViewBottomPadding + kCellBottomPadding;</div><div class="line">			&#125;</div><div class="line">		   <span class="keyword">break</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0.0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">CGFloat</span>)heightWithWidth:(<span class="built_in">CGFloat</span>)width font:(<span class="built_in">UIFont</span> *)font</div><div class="line">&#123;</div><div class="line">	<span class="built_in">CGRect</span> attrsRect = [<span class="keyword">self</span> boundingRectWithSize:<span class="built_in">CGSizeMake</span>(width, <span class="built_in">CGFLOAT_MAX</span>)</div><div class="line">										  options:<span class="built_in">NSStringDrawingUsesLineFragmentOrigin</span> | <span class="built_in">NSStringDrawingUsesFontLeading</span></div><div class="line">									   attributes:@&#123;<span class="built_in">NSFontAttributeName</span> : font&#125;</div><div class="line">										  context:<span class="literal">nil</span>];</div><div class="line">	<span class="keyword">return</span> attrsRect.size.height;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœä¸ç»†å¿ƒæ¼æ‰æŸä¸€å¤„é«˜åº¦,æŸ¥æ‰¾èµ·æ¥ä¹Ÿæ¯”è¾ƒéº»çƒ¦ã€‚æ¯æ¬¡ç®—é«˜åº¦æ˜¯æˆ‘ä¸çˆ±å¹²çš„ä¸€ä»¶äº‹æƒ…ã€‚æ²¡æœ‰æŠ€æœ¯å«é‡ğŸ˜‚ã€‚å®Œå…¨å°±æ˜¯ç»†å¿ƒæ´»ã€‚å¤šäºAutoLayoutèƒ½è®©æˆ‘ä»¬ä»è¿™ä¸€æ¯«æ— å…´è¶£çš„å·¥ä½œä¸­è§£æ”¾å‡ºæ¥ã€‚</p>
<h1 id="çˆ¶è§†å›¾è‡ªé€‚åº”"><a href="#çˆ¶è§†å›¾è‡ªé€‚åº”" class="headerlink" title="çˆ¶è§†å›¾è‡ªé€‚åº”"></a>çˆ¶è§†å›¾è‡ªé€‚åº”</h1><p>æ–°å»ºXcodeå·¥ç¨‹ã€‚åœ¨Main.storyboardçš„ViewControllerä¸­éšæ„æ‹–å…¥viewæ§ä»¶ï¼Œé¢œè‰²æš‚å®šä¸ºblueã€‚æ”¾ç½®3ä¸ªLabelæ§ä»¶ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1421047-b4d0e9c9020bdb46.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2017-09-04 ä¸‹åˆ4.10.54.png"></p>
<ol>
<li>å…ˆä¸è®¾ç½®blueviewçš„çº¦æŸã€‚</li>
<li>é€æ­¥è®¾ç½®Labelçš„çº¦æŸã€‚</li>
</ol>
<p>é»‘è‰²Labelçº¦æŸå¦‚ä¸‹:<br><img src="http://upload-images.jianshu.io/upload_images/1421047-c822fe25e461f77e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2017-09-04 ä¸‹åˆ4.13.23.png"></p>
<p>åœ¨è¿™é‡Œæˆ‘è®¾ç½®äº†é»‘è‰²Labelçš„sizeã€‚è¿™ä¸ªå¹¶æ— å…³ç³»ï¼Œå¯è®¾å¯ä¸è®¾ã€‚ä½¿ç”¨Labelçš„å›ºæœ‰å¤§å°ä¹Ÿè¡Œã€‚</p>
<p>é»„è‰²Labelçº¦æŸå¦‚ä¸‹:<br><img src="http://upload-images.jianshu.io/upload_images/1421047-3d11bb6ca27fb675.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2017-09-04 ä¸‹åˆ4.27.41.png"></p>
<p>çº¢è‰²Labelçº¦æŸå¦‚ä¸‹:<br><img src="http://upload-images.jianshu.io/upload_images/1421047-d13f82f73fd35039.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2017-09-04 ä¸‹åˆ4.28.55.png"></p>
<p>Labelçš„è¡Œæ•°éƒ½ä¸º0ã€‚</p>
<h2 id="é‡ç‚¹"><a href="#é‡ç‚¹" class="headerlink" title="é‡ç‚¹"></a>é‡ç‚¹</h2><p><strong><em>Labelä¸€å®šè¦è®¾ç½®è·ç¦»çˆ¶è§†å›¾çš„é—´è·ã€‚è¿™æ ·AutoLayoutæ‰èƒ½è®¡ç®—å‡ºçˆ¶è§†å›¾çš„å¤§å°ã€‚</em></strong></p>
<h1 id="æœ€é‡è¦çš„ä¸€æ­¥"><a href="#æœ€é‡è¦çš„ä¸€æ­¥" class="headerlink" title="æœ€é‡è¦çš„ä¸€æ­¥"></a>æœ€é‡è¦çš„ä¸€æ­¥</h1><p>çœ‹ä¸‹viewçš„çº¦æŸ<br><img src="http://upload-images.jianshu.io/upload_images/1421047-ee98b0f899f58feb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2017-09-04 ä¸‹åˆ4.32.40.png"><br><img src="http://upload-images.jianshu.io/upload_images/1421047-13629cf2409d7556.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2017-09-04 ä¸‹åˆ4.33.49.png"><br>å°†viewçš„å›ºæœ‰å°ºå¯¸è®¾ç½®ä¸ºplaceholderã€‚ æˆ‘ä»¬éƒ½çŸ¥é“Label Button ImageView(å·²ç»è®¾ç½®imageå±æ€§)è¿™äº›æ§ä»¶ï¼Œåœ¨ç”¨AutoLayoutå¸ƒå±€æ—¶ï¼Œåªéœ€è¦è®¾ç½®å¤–è¾¹è·å°±è¡Œäº†ã€‚AutoLayoutä¼šè‡ªåŠ¨é€‚åº”sizeå¤§å°ã€‚è¿™å°±æ˜¯å›ºæœ‰å°ºå¯¸ã€‚åè§‚Viewå°±ä¸è¡Œäº†ã€‚å‡å¦‚åªè®¾ç½®Viewçš„å¤–è¾¹è·ï¼Œè¿™æ—¶ä¸€å®šä¼šæŠ¥å‡ºçº¦æŸé”™è¯¯ã€‚ä½†æ˜¯Viewä½œä¸ºå®¹å™¨ã€‚å®ƒèƒ½æ ¹æ®å­æ§ä»¶çš„å¤§å°æ¥è‡ªé€‚åº”ã€‚åªéœ€è¦å°†å…¶å›ºæœ‰å°ºå¯¸(size)éƒ½è®¾ç½®ä¸º0ã€‚</p>
<p>è¿™æ˜¯å¯¹äºé«˜åº¦ä¸å›ºå®šçš„æ¥è®²ã€‚å¦‚æœå®½åº¦ä¸å›ºå®šå‘¢ï¼Ÿç­”æ¡ˆæ˜¯åŒæ ·é€‚ç”¨ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œviewçš„å®½åº¦æ˜¯å›ºå®šçš„ã€‚é«˜åº¦ä¸å›ºå®šã€‚</p>
<h2 id="éœ€è¦æ³¨æ„çš„é—®é¢˜"><a href="#éœ€è¦æ³¨æ„çš„é—®é¢˜" class="headerlink" title="éœ€è¦æ³¨æ„çš„é—®é¢˜"></a>éœ€è¦æ³¨æ„çš„é—®é¢˜</h2><p>å¦‚æœä¸è®¾ç½®viewçš„å·¦å³è¾¹é—´è·æˆ–è€…å®½åº¦ä½ å°±ä¼šå‘ç°å˜æˆäº†è¿™æ ·:<br><img src="http://upload-images.jianshu.io/upload_images/1421047-d5e451567f22d607.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2017-09-04 ä¸‹åˆ4.47.40.png"><br>viewçš„å·¦å³è¾¹è·å·²ç»è¢«Labelæ’‘åˆ°å±å¹•å¤–é¢äº†ã€‚å› ä¸ºè¿™æ—¶viewçš„å®½åº¦ä¹Ÿæ˜¯ä¼šéšç€Labelå˜åŒ–çš„ã€‚<br>æ‰€ä»¥è¯´æˆ‘è®¾ç½®äº†viewçš„å·¦å³è¾¹è·(æˆ–è€…è®¾ç½®å…¶å›ºå®šçš„å®½åº¦)</p>
<h2 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h2><p>æ¥æ¥ä¸‹å°±å¯ä»¥è®¾ç½®Labelçš„textå±æ€§äº†ã€‚éšä¾¿è¾“å…¥æ±‰å­—æ¥éªŒè¯ä¸€ä¸‹ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/1421047-ec22a6eb4f798608.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2017-09-04 ä¸‹åˆ4.51.05.png"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1421047-9e35bd06022a8ccd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2017-09-04 ä¸‹åˆ4.51.47.png"></p>
<p>å¯ä»¥å‘ç°viewçš„é«˜åº¦å·²ç»éšç€Labelçš„å˜åŒ–è€Œå˜åŒ–äº†ã€‚å…¶ä»–çš„æ§ä»¶ä»¥æ­¤ç±»æ¨ã€‚éƒ½æ˜¯ä¸€æ ·çš„é“ç†ã€‚å¦å¤–çº¯ä»£ç å¸ƒå±€ä¹ŸåŒæ ·é€‚ç”¨ã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>viewä½œä¸ºå®¹å™¨ç±»å…¶æ‰¿è½½å…¶ä»–æ§ä»¶çš„æ˜¾ç¤ºã€‚åªè¦è®¾ç½®äº†å­æ§ä»¶çš„è·ç¦»è‡ªå·±çš„çº¦æŸã€‚å¹¶å°†è‡ªå·±çš„å›ºæœ‰å°ºå¯¸è®¾ç½®ä¸ºplaceholder(ä¹Ÿå°±æ˜¯widthå’Œheightéƒ½ä¸º0)ã€‚è¿™æ ·AutoLayoutå°±èƒ½è‡ªåŠ¨è®¡ç®—å‡ºviewçš„å¤§å°ã€‚</p>
<h1 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h1><p>æ€ä¹ˆæ ·æ‹¿åˆ°viewçš„å¤§å°å‘¢ï¼Ÿç³»ç»Ÿä¸ºæˆ‘ä»¬æä¾›äº†è¿™æ ·çš„API</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIView</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">/* The size fitting most closely to targetSize in which the receiver's subtree can be laid out while optimally satisfying the constraints. If you want the smallest possible size, pass UILayoutFittingCompressedSize; for the largest possible size, pass UILayoutFittingExpandedSize.</span></div><div class="line">     Also see the comment for UILayoutPriorityFittingSizeLevel.</div><div class="line">     */</div><div class="line">    <span class="meta">@available</span>(iOS <span class="number">6.0</span>, *)</div><div class="line">    open <span class="function"><span class="keyword">func</span> <span class="title">systemLayoutSizeFitting</span><span class="params">(<span class="number">_</span> targetSize: CGSize)</span></span> -&gt; <span class="type">CGSize</span> <span class="comment">// Equivalent to sending -systemLayoutSizeFittingSize:withHorizontalFittingPriority:verticalFittingPriority: with UILayoutPriorityFittingSizeLevel for both priorities.</span></div><div class="line"></div><div class="line">    <span class="meta">@available</span>(iOS <span class="number">8.0</span>, *)</div><div class="line">    open <span class="function"><span class="keyword">func</span> <span class="title">systemLayoutSizeFitting</span><span class="params">(<span class="number">_</span> targetSize: CGSize, withHorizontalFittingPriority horizontalFittingPriority: UILayoutPriority, verticalFittingPriority: UILayoutPriority)</span></span> -&gt; <span class="type">CGSize</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨viewDidLayoutSubviewsæˆ–è€…layoutSubviewsä¸­é€šè¿‡è°ƒç”¨ä¸Šé¢APIå°±èƒ½å¤Ÿè·å¾—é€šè¿‡AutoLayoutè®¡ç®—è¿‡åviewçš„å¤§å°ã€‚</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/10/React-Native-è‡ªå®šä¹‰ç»„ä»¶/" itemprop="url">
                  React-Native è‡ªå®šä¹‰ç»„ä»¶
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2017-07-10T16:02:49+08:00" content="2017-07-10">
              2017-07-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/React-Native/" itemprop="url" rel="index">
                    <span itemprop="name">React Native</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="æ–¹æ³•ä¸€ï¼š"><a href="#æ–¹æ³•ä¸€ï¼š" class="headerlink" title="æ–¹æ³•ä¸€ï¼š"></a>æ–¹æ³•ä¸€ï¼š</h1><p>è‡ªå®šä¹‰ç»„ä»¶(Button)ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Button</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</div><div class="line">    render()&#123;</div><div class="line">        <span class="comment">//è§£æ„</span></div><div class="line">        <span class="keyword">const</span> &#123;title,onClick&#125; = <span class="keyword">this</span>.props;</div><div class="line">        <span class="keyword">return</span>(</div><div class="line">            &lt;TouchableOpacity style=&#123;styles.touchStyle&#125;</div><div class="line">                              onPress=&#123;onClick&#125;</div><div class="line">            &gt;</div><div class="line">                &lt;Text style=&#123;styles.textStyle&#125;&gt;&#123;this.props.title&#125;&lt;/Text&gt;</div><div class="line">            &lt;/TouchableOpacity&gt;</div><div class="line">        )</div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>export default</code>å…³é”®å­—ï¼šå¯¼å‡ºè‡ªå®šä¹‰ç»„ä»¶,å¯ä»¥è¢«åˆ«çš„jsæ–‡ä»¶æ‰€å¼•ç”¨ã€‚å¦‚æœæ²¡æœ‰å…³é”®å­—,å°±åªèƒ½åœ¨æœ¬jsæ–‡ä»¶ä½¿ç”¨è¯¥ç±»ã€‚ä¾‹å¦‚åœ¨<code>Login.js</code>æ–‡ä»¶ä¸­å¯ä»¥ç”¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">import Button from &apos;./Button&apos;</div></pre></td></tr></table></figure>
<p>å¯¼å…¥Buttonç»„ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//è§£æ„</span></div><div class="line"><span class="keyword">const</span> &#123;title,onClick&#125; = <span class="keyword">this</span>.props;</div></pre></td></tr></table></figure>
<p>è§£æ„ä»çˆ¶ç»„ä»¶çš„ä¼ è¿‡æ¥çš„props, å­ç»„ä»¶æ‹¿åˆ°çˆ¶ç»„ä»¶è®¾ç½®çš„å±æ€§å€¼,æ˜¾ç¤ºä¼ é€’çš„å€¼æˆ–è€…å¤„ç†ä¼ é€’è¿‡æ¥çš„æ–¹æ³•ã€‚</p>
<p>åˆ—å¦‚ä¸Šé¢ä»£ç :</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">///æ˜¾ç¤ºButtonçš„title</span></div><div class="line">&lt;Text style=&#123;styles.textStyle&#125;&gt;&#123;<span class="keyword">this</span>.props.title&#125;&gt;</div><div class="line">&lt;/Text&gt;</div><div class="line"></div><div class="line"><span class="comment">///å¤„ç†TouchableOpacityçš„ç‚¹å‡»äº‹ä»¶</span></div><div class="line">&lt;TouchableOpacity style=&#123;styles.touchStyle&#125;</div><div class="line">                  onPress=&#123;onClick&#125;&gt;</div><div class="line">&lt;/TouchableOpacity&gt;</div></pre></td></tr></table></figure>
<p>çˆ¶ç»„ä»¶è°ƒç”¨ä»£ç : ä¼ é€’titleä¿¡æ¯å’ŒonClickæ–¹æ³•å›è°ƒ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;Button title=<span class="string">"ç™»å½•"</span></div><div class="line">        onClick=&#123;() =&gt; alert(<span class="string">'ç‚¹å‡»äº†ç™»å½•æŒ‰é’®'</span>)&#125;/&gt;</div></pre></td></tr></table></figure>
<h1 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h1><p>ä¸æ–¹æ³•ä¸€çš„åŒºåˆ«ä¸å¤§</p>
<p>ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React, &#123; Component,PropTypes &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> &#123; Text,TouchableOpacity,StyleSheet &#125; <span class="keyword">from</span> <span class="string">'react-native'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Button</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</div><div class="line">    <span class="keyword">static</span> propTypes = &#123;</div><div class="line">        title: PropTypes.string,</div><div class="line">        onPress: PropTypes.func</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    render()&#123;</div><div class="line">        <span class="keyword">return</span>(</div><div class="line">            &lt;TouchableOpacity style=&#123;styles.touchStyle&#125;</div><div class="line">                              onPress=&#123;()=&gt;&#123;</div><div class="line">                                if (this.props.onPress) &#123;</div><div class="line">                                    this.props.onPress(this)</div><div class="line">                                &#125;</div><div class="line">                              &#125;&#125;</div><div class="line">            &gt;</div><div class="line">                &lt;Text style=&#123;styles.textStyle&#125;&gt;&#123;this.props.title&#125;&lt;/Text&gt;</div><div class="line">            &lt;/TouchableOpacity&gt;</div><div class="line">        )</div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å…¶ä¸­</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">static</span> propTypes = &#123;</div><div class="line">        title: PropTypes.string,</div><div class="line">        onPress: PropTypes.func</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>æš´éœ²å‡ºç»„ä»¶çš„å±æ€§(title)å’Œæ–¹æ³•(onPress)ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;TouchableOpacity style=&#123;styles.touchStyle&#125;</div><div class="line">                              onPress=&#123;()=&gt;&#123;</div><div class="line">                                <span class="keyword">if</span> (<span class="keyword">this</span>.props.onPress) &#123;</div><div class="line">                                    <span class="keyword">this</span>.props.onPress(<span class="keyword">this</span>)</div><div class="line">                                &#125;</div><div class="line">                              &#125;&#125;</div><div class="line">            &gt;</div><div class="line">                &lt;Text style=&#123;styles.textStyle&#125;&gt;&#123;this.props.title&#125;&lt;/Text&gt;</div><div class="line">            &lt;<span class="regexp">/TouchableOpacity&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>å¤„ç†TouchableOpacityçš„ç‚¹å‡»äº‹ä»¶,è®¾ç½®å›è°ƒå‡½æ•°</li>
<li>æ˜¾ç¤ºButtonçš„title</li>
</ul>
<p>ç»„ä»¶è°ƒç”¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;Button  title=&quot;ç™»å½•&quot;</div><div class="line">        onPress=&#123;() =&gt; alert(&apos;ç‚¹å‡»äº†ç™»å½•æŒ‰é’®&apos;)&#125;/&gt;</div></pre></td></tr></table></figure>
<h1 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h1><p><img src="http://upload-images.jianshu.io/upload_images/1421047-1b8215ad4e4f2d0b.gif?imageMogr2/auto-orient/strip" alt="RNCustomComponent.gif"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/06/è®°ä¸€æ¬¡React-Natice-StackNavigatorä½¿ç”¨å°ç»“/" itemprop="url">
                  è®°ä¸€æ¬¡React Naticeçš„StackNavigatorä½¿ç”¨å°ç»“
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2017-07-06T16:10:49+08:00" content="2017-07-06">
              2017-07-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/React-Native/" itemprop="url" rel="index">
                    <span itemprop="name">React Native</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h1><figure class="highlight ts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> (</div><div class="line">  routeConfigMap: NavigationRouteConfigMap,</div><div class="line">  stackConfig: StackNavigatorConfig = &#123;&#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<p>åœ¨<code>StackNavigator</code>çš„åˆå§‹åŒ–ä¸­éœ€è¦ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼š<code>routeConfigMap</code> è¡¨ç¤ºè·¯ç”±é…ç½®å‚æ•°, <code>stackConfig</code>è¡¨ç¤ºé…ç½®<code>StackNavigatorConfig</code>ä¸€äº›æ ·å¼æˆ–è€…å±æ€§ã€‚</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> MainSrceenStackNavigator = StackNavigator(</div><div class="line">    &#123;</div><div class="line">        MainScreenNavigator: &#123;screen: MainScreenNavigator&#125;,</div><div class="line">        DiscoverDetail: &#123;screen: DiscoverDetail&#125;,</div><div class="line">        SettingDetail: &#123;screen: SettingDetail&#125;</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        initialRouteName: <span class="string">'MainScreenNavigator'</span>,</div><div class="line">        mode:<span class="string">'card'</span>,</div><div class="line">        headerMode:<span class="string">'screen'</span>,</div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç å—é…ç½®äº†3ä¸ªä¸åŒè·¯ç”±çš„ç•Œé¢ï¼Œ<code>initialRouteName</code>è®¾ç½®æ ¹å¯¼èˆªæ§åˆ¶å™¨ç•Œé¢,é»˜è®¤ç¬¬ä¸€ä¸ªä¸ºæ ¹è·¯ç”±ã€‚<code>mode</code>è¡¨ç¤ºç•Œé¢çš„è·³è½¬æ–¹å¼:pushæˆ–è€…æ¨¡æ€å¼¹å‡ºã€‚<code>headerMode</code>è¡¨ç¤ºç•Œé¢åœ¨åšè·³è½¬æ—¶çš„åŒºåŸŸã€‚æœ‰ä¸‰ç§æ–¹å¼:<code>float</code>,<code>screen</code>,<code>none</code>ã€‚<code>float</code>è¡¨ç¤ºä¸åŒ…æ‹¬å¯¼èˆªæ¡åœ¨å†…;<code>screen</code>è¡¨ç¤ºæ•´ä¸ªå±å¹•(åŒ…æ‹¬å¯¼èˆªæ¡);<code>none</code>è¡¨ç¤ºå¯¼èˆªæ¡çš„éšè—ã€‚è¿˜æœ‰å¾ˆå¤šå±æ€§å¯é€‰é…ç½®ã€‚ç”¨åˆ°å¯åœ¨å®˜ç½‘æŸ¥è¯¢<a href="https://reactnavigation.org/docs/navigators/stack" target="_blank" rel="external">React Navigation
</a>ã€‚</p>
<h1 id="ğŸŒ°"><a href="#ğŸŒ°" class="headerlink" title="ğŸŒ°"></a>ğŸŒ°</h1><p>åœ¨<code>æˆ‘çš„</code>ç•Œé¢é…ç½®å¯¼èˆªæ¡æ ·å¼</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">static</span> navigationOptions = (&#123;navigation&#125;)=&gt;(&#123;</div><div class="line">        <span class="comment">// tabBarLabel: 'æˆ‘çš„',</span></div><div class="line">        title: <span class="string">'æˆ‘'</span>,</div><div class="line">        headerStyle:&#123;</div><div class="line">            backgroundColor: <span class="string">'black'</span></div><div class="line">        &#125;,</div><div class="line">        headerTitleStyle:&#123;</div><div class="line">            color: <span class="string">'white'</span> </div><div class="line">        &#125;,</div><div class="line">        tabBarIcon:(&#123;tintColor,focused&#125;) =&gt; (</div><div class="line">            &lt;TabBarItem  </div><div class="line">              tintColor=&#123;tintColor&#125;  </div><div class="line">              focused=&#123;focused&#125;  </div><div class="line">              normalImage=&#123;<span class="built_in">require</span>(<span class="string">'./source/æˆ‘çš„@2x.png'</span>)&#125;  </div><div class="line">              selectedImage=&#123;<span class="built_in">require</span>(<span class="string">'./source/æˆ‘çš„-é€‰ä¸­@2x.png'</span>)&#125;  </div><div class="line">            /&gt;  </div><div class="line">        ),</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<p>ç„¶åå†æ˜¾ç¤ºå‡ºListView(ä¸‰ä¸ªåˆ†åŒºçš„ListView)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">constructor</span>(props) &#123;</div><div class="line">        <span class="keyword">super</span>(props);</div><div class="line"></div><div class="line">        <span class="keyword">var</span> ds = <span class="keyword">new</span> ListView.DataSource(&#123;rowHasChanged: (r1, r2) =&gt; r1 !== r2,sectionHeaderHasChanged:(s1,s2)=&gt;s1 !== s2&#125;);</div><div class="line">        <span class="keyword">this</span>.state = &#123;</div><div class="line">            dataSource: ds.cloneWithRowsAndSections([[<span class="string">'é’±åŒ…'</span>],[<span class="string">'æ”¶è—'</span>,<span class="string">'ç›¸å†Œ'</span>,<span class="string">'å¡åŒ…'</span>,<span class="string">'è¡¨æƒ…'</span>],[<span class="string">'è®¾ç½®'</span>]]),</div><div class="line">        &#125;;</div><div class="line"></div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">render()&#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            &lt;View style=&#123;styles.container&#125;&gt;</div><div class="line">                &lt;ListView </div><div class="line">                dataSource=&#123;this.state.dataSource&#125;</div><div class="line">                renderRow=&#123;this._renderRow.bind(this)&#125;</div><div class="line">                renderSeparator=&#123;this._renderSeparator&#125;&gt;</div><div class="line">                &lt;/ListView&gt;</div><div class="line">            &lt;/View&gt;</div><div class="line">        )</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>åˆ†å‰²çº¿</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">_renderSeparator(sectionID, rowID, adjacentRowHighlighted)  &#123;</div><div class="line">        <span class="keyword">if</span>(sectionID == <span class="number">1</span>)&#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            &lt;View style=&#123;styles.separatorStyle&#125;&gt;&lt;/View&gt;</div><div class="line">        )</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>ListViewæ¯ä¸ªåˆ†åŒºæ¯ä¸€è¡Œçš„æ•°æ®</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">_renderRow(rowData, sectionID, rowID, highlightRow)&#123;</div><div class="line">       <span class="keyword">if</span> (sectionID == <span class="number">0</span>) &#123;</div><div class="line">           <span class="keyword">return</span>(</div><div class="line">               &lt;TouchableOpacity onPress=&#123;() =&gt;&#123;</div><div class="line">                   highlightRow(sectionID,rowID),</div><div class="line">                   this.props.navigation.navigate('SettingDetail',&#123;'name': rowData&#125;)</div><div class="line">               &#125;&#125;&gt;</div><div class="line">                   &lt;View style=&#123;styles.section_0_style&#125;&gt;</div><div class="line">                       &lt;Text style=&#123;&#123;fontSize:15&#125;&#125;&gt;&#123;rowData&#125;&lt;/Text&gt;</div><div class="line">                   &lt;/View&gt;</div><div class="line">               &lt;/TouchableOpacity&gt;</div><div class="line">           )</div><div class="line">       &#125;<span class="keyword">else</span> <span class="keyword">if</span>(sectionID == <span class="number">1</span>)&#123;</div><div class="line">           <span class="keyword">return</span>(</div><div class="line">           &lt;TouchableOpacity onPress=&#123;() =&gt;&#123;</div><div class="line">                   highlightRow(sectionID,rowID),</div><div class="line">                   this.props.navigation.navigate('SettingDetail',&#123;'name': rowData&#125;)</div><div class="line">               &#125;&#125;&gt;   </div><div class="line">           &lt;View style=&#123;styles.viewStyle&#125;&gt;</div><div class="line">               &lt;Text style=&#123;&#123;fontSize:15&#125;&#125;&gt;&#123;rowData&#125;&lt;/Text&gt;</div><div class="line">           &lt;/View&gt;</div><div class="line">           &lt;/TouchableOpacity&gt;</div><div class="line">           )</div><div class="line">       &#125;<span class="keyword">else</span>&#123;</div><div class="line">           <span class="keyword">return</span>(</div><div class="line">               &lt;TouchableOpacity onPress=&#123;() =&gt;&#123;</div><div class="line">                   highlightRow(sectionID,rowID),</div><div class="line">                   this.props.navigation.navigate('SettingDetail',&#123;'name': rowData&#125;)</div><div class="line">               &#125;&#125;&gt;</div><div class="line">               &lt;View style=&#123;styles.section_0_style&#125;&gt;</div><div class="line">                    &lt;Text style=&#123;&#123;fontSize:15&#125;&#125;&gt;&#123;rowData&#125;&lt;/Text&gt;</div><div class="line">               &lt;/View&gt;</div><div class="line">               &lt;/TouchableOpacity&gt;</div><div class="line">           )</div><div class="line">       &#125;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p><code>this.props.navigation.navigate(&#39;SettingDetail&#39;,{&#39;name&#39;: rowData})</code> navigationå¯ç”¨å±æ€§æ¥è·å–ã€‚ è¯¥å‡½æ•°ä¼ é€’å‚æ•°<code>{rowData}</code>å³ListViewæ¯è¡Œæ•°æ®åˆ°<code>SettingDetail</code>ç•Œé¢ã€‚</p>
<p>å†<code>SettingDetail</code>ç•Œé¢ä¸­å¯ç”¨ä¸‹é¢æ–¹æ³•</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">static</span> navigationOptions = (&#123;navigation&#125;) =&gt; (&#123;</div><div class="line">       title:<span class="string">`<span class="subst">$&#123;navigation.state.params.name&#125;</span>`</span>,</div><div class="line">       headerBackTitle: <span class="string">'è¿”å›'</span>,</div><div class="line">   &#125;)</div></pre></td></tr></table></figure>
<p>æ¥è·å–ä¼ é€’è¿‡æ¥çš„å‚æ•°æ˜¾ç¤ºåˆ°å¯¼èˆªæ¡çš„titleã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1421047-c8dd202cfb2f01b5.gif?imageMogr2/auto-orient/strip" alt="RN.gif"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/13/iOSç•Œé¢ä¼˜åŒ–ç³»åˆ—ä¹‹ï¼šå¤„ç†å›¾ç‰‡ç¼©æ”¾é—®é¢˜/" itemprop="url">
                  iOSç•Œé¢ä¼˜åŒ–ç³»åˆ—ä¹‹ï¼šå¤„ç†å›¾ç‰‡ç¼©æ”¾é—®é¢˜
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2017-02-13T14:56:05+08:00" content="2017-02-13">
              2017-02-13
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Objective-C/" itemprop="url" rel="index">
                    <span itemprop="name">Objective-C</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>åœ¨ä¼—å¤šé˜…è¯»ç±»çš„APPä¸­ï¼Œæ¯”å¦‚:<br><img src="http://upload-images.jianshu.io/upload_images/1421047-8b81cc02257ab29f.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="
![IMG_0782.PNG](http://upload-images.jianshu.io/upload_images/1421047-cefaed703108a4aa.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
"></p>
<p>è¿™ç±»æ¯”è¾ƒç¨å¾®ç®€å•çš„ç•Œé¢ä¸­å……æ–¥ç€å¤§é‡çš„çš„å›¾ç‰‡ï¼Œå¤šåˆ™6å¼ ,å°‘åˆ™3-4å¼ ã€‚å†è€…åƒå¾®åšè¿™ç±»é‡å‹ç¤¾äº¤çš„APPï¼Œæœ‰çš„celléƒ½å·²ç»æœ‰9å¼ å›¾ç‰‡ã€‚å›¾ç‰‡çš„ä¼˜åŒ–ç¨‹åº¦å¯¹æ•´ä¸ªç•Œé¢çš„æµç•…åº¦æ¥è¯´éƒ½æ˜¯é‡ä¸­ä¹‹é‡ã€‚ï¼ˆå¦å¤–ä¸€ä¸ªä¹Ÿå¾ˆé‡è¦çš„åœ°æ–¹å°±æ˜¯æ–‡æœ¬çš„å¼‚æ­¥æ¸²æŸ“ï¼‰ï¼Œåå‡ ä¸ªç³»åˆ—ä¹Ÿä¼šè¯´åˆ°ã€‚</p>
<p>åƒè¿™ç§å¼‚æ­¥åŠ è½½å›¾ç‰‡çš„å¼€æºåº“æœ‰å¾ˆå¤šï¼š<code>SD_WebImageView</code>  <code>YYWebImage  Kingfisher</code>  <code>PINRemoteImage</code> â€¦<br>å¼€å‘è€…å¦‚æœåªæ˜¯ç®€å•çš„è°ƒç”¨ä¸€ä¸‹ <code>sd_setImageWithURL:</code> å›¾ç‰‡èƒ½å¤Ÿå¾ˆå¥½çš„æ˜¾ç¤ºå‡ºæ¥ã€‚å‡å¦‚ä»ç½‘ç»œåŠ è½½çš„å›¾ç‰‡ä¸è‡ªå·±è®¾ç½®çš„UIImageViewçš„å°ºå¯¸ä¸ä¸€è‡´,å°±ä¼šå¯¼è‡´è¿™ç§ç»“æœã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1421047-8aeb9245ca7573ca.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Jietu20170112-131912.png"><br>å¦‚æœæ˜¯çœŸæœºè°ƒè¯• æ‰“å¼€<code>Instruments</code>ä¸­<code>Core Animation</code><br><img src="http://upload-images.jianshu.io/upload_images/1421047-66c55b53453df8db.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Jietu20170112-135233.png"><br>åœ¨å³ä¾§æ ä¸­æ‰“å¼€<br><img src="http://upload-images.jianshu.io/upload_images/1421047-7ce789d8152d0bff.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Jietu20170112-135327.png"><br>å¦‚æœæ˜¯æ¨¡æ‹Ÿå™¨ï¼Œæ‰“å¼€Debug -&gt;Color Misaligned Images</p>
<p>è¿™ä¸ªé€‰é¡¹æ£€æŸ¥äº†å›¾ç‰‡æ˜¯å¦è¢«ç¼©æ”¾ï¼Œä»¥åŠåƒç´ æ˜¯å¦å¯¹é½ã€‚è¢«æ”¾ç¼©çš„å›¾ç‰‡ä¼šè¢«æ ‡è®°ä¸ºé»„è‰²ï¼Œåƒç´ ä¸å¯¹é½åˆ™ä¼šæ ‡æ³¨ä¸ºç´«è‰²ã€‚**é»„è‰²ã€ç´«è‰²è¶Šå¤šï¼Œæ€§èƒ½è¶Šå·®ã€‚</p>
<p>è§£å†³åŠæ³•ï¼š<br>1.ä¸åå°åå•†ï¼Œè®©åå°è¿”å›çš„å›¾ç‰‡å°ºå¯¸ä¸å®¢æˆ·ç«¯UIImageViewå°ºå¯¸ä¸€è‡´;<br>2.è‡ªå·±å¤„ç†ã€‚</p>
<p>ä¸‹é¢ä»‹ç»ä¸‹å¦‚ä½•è‡ªå·±å¤„ç†</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIImage</span> </span>&#123;</div><div class="line">Â  Â  <span class="function"><span class="keyword">func</span> <span class="title">resizeImage</span><span class="params">(<span class="number">_</span> image: UIImage, targetSize: CGSize)</span></span> -&gt; <span class="type">UIImage</span>? &#123;</div><div class="line">Â  Â  Â  Â  Â  Â  <span class="keyword">let</span> newRect = <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: targetSize.width, height: targetSize.height).integral</div><div class="line">Â  Â  Â  Â  Â  Â  <span class="type">UIGraphicsBeginImageContextWithOptions</span>(targetSize, <span class="literal">false</span>, <span class="number">0</span>)</div><div class="line">Â  Â  Â  Â  Â  Â  <span class="keyword">if</span> <span class="keyword">let</span> context = <span class="type">UIGraphicsGetCurrentContext</span>() &#123;</div><div class="line">Â  Â  Â  Â  Â  Â  Â  Â  context.interpolationQuality = .high</div><div class="line">Â  Â  Â  Â  Â  Â  Â  Â  <span class="keyword">let</span> flipVertical = <span class="type">CGAffineTransform</span>(a: <span class="number">1</span>, b: <span class="number">0</span>, <span class="built_in">c</span>: <span class="number">0</span>, d: -<span class="number">1</span>, tx: <span class="number">0</span>, ty: targetSize.height)</div><div class="line">Â  Â  Â  Â  Â  Â  Â  Â  context.concatenate(flipVertical)</div><div class="line">Â  Â  Â  Â  Â  Â  Â  Â  context.draw(<span class="keyword">self</span>.cgImage!, <span class="keyword">in</span>: newRect)</div><div class="line">Â  Â  Â  Â  Â  Â  Â  Â  <span class="keyword">let</span> newImage = <span class="type">UIImage</span>(cgImage: context.makeImage()!)</div><div class="line">Â  Â  Â  Â  Â  Â  Â  Â  <span class="type">UIGraphicsEndImageContext</span>()</div><div class="line">Â Â  Â  Â  Â  Â  Â  Â  <span class="keyword">return</span> newImage</div><div class="line">Â  Â  Â  Â  Â  Â  &#125;</div><div class="line">Â  Â  Â  Â  <span class="keyword">return</span> <span class="literal">nil</span></div><div class="line">Â  Â  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¾ˆç®€å•å°±æ˜¯ç½‘ç»œä¸‹è½½ä¸‹æ¥çš„å›¾ç‰‡æŒ‰ç…§è‡ªå·±è®¾ç½®çš„UIImageViewçš„å°ºå¯¸æ¥é‡æ–°drawä¸€ä¸ªã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">setImage</span>&lt;T: UIImageView&gt;<span class="params">(<span class="number">_</span> imageView: T, URLString: String, targetSize: CGSize)</span></span>&#123;</div><div class="line">Â  Â  Â  Â  imageView.pin_setImage(from: <span class="type">URL</span>.<span class="keyword">init</span>(string: <span class="type">URLString</span>), completion: &#123;(<span class="type">PINRemoteImageManagerResult</span>) <span class="keyword">in</span></div><div class="line">Â  Â  Â  Â  Â  Â  <span class="keyword">if</span> <span class="keyword">let</span> image = <span class="type">PINRemoteImageManagerResult</span>.image&#123;</div><div class="line">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  imageView.image = image.resizeImage(image, targetSize: targetSize)</div><div class="line">Â  Â  Â  Â  Â  Â  &#125;</div><div class="line">Â  Â  Â  Â  &#125;)</div><div class="line">Â  Â  &#125;</div></pre></td></tr></table></figure>
<p>é‡æ–°ç»™UIImageViewè®¾ç½®imageå±æ€§</p>
<p>é‡æ–°æ‰“å¼€Color Misaligned ImagesåŠŸèƒ½æ¥æ£€æµ‹ä¸€ä¸‹<br><img src="http://upload-images.jianshu.io/upload_images/1421047-95561fdba06255d9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Jietu20170112-140353.png"></p>
<p>å—¯ï¼ ä¸é”™å“¦ï¼Œä¹‹å‰çš„é»„è‰²æ²¡æœ‰äº†ã€‚ æœ¬ä»¥ä¸ºå°±è¾¾åˆ°äº†çš„è¦æ±‚ã€‚</p>
<p>ä½†æ˜¯ç”¨<code>Instruments</code>ä¸­<code>Time Profiler</code><br><img src="http://upload-images.jianshu.io/upload_images/1421047-0556297eefe06581.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Jietu20170112-140732.png"><br>æ¥æ£€æµ‹ä¸‹å¤„ç†è¯¥å‡½æ•°æ‰€éœ€è¦çš„æ—¶é—´</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1421047-758e84ae67a3697e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Jietu20170112-141255.png"></p>
<p>ç”¨Core Animationæ¥æµ‹ä¸‹FPS</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1421047-7663f55e36043484.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Jietu20170112-142314.png"></p>
<p>è™½ç„¶å·²ç»å¾ˆæµç•…äº†ï¼ˆæ³¨ï¼šæ–‡æœ¬ç”¨åˆ°äº†å¼‚æ­¥ç»˜åˆ¶ï¼‰,  åŸºæœ¬åœ¨54å·¦å³ï¼Œ ä½†æ˜¯è·ç¦»æ»¡å¸§59 - 60è¿˜å·®é‚£ä¹ˆä¸€ä¸¢ä¸¢ã€‚</p>
<p>å†æ¥è§‚å¯Ÿç»™UIImageæ‰©å±•çš„è¿™ä¸ªæ–¹æ³• å‘ç°å®ƒæ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œå½“å¿«é€Ÿæ»‘åŠ¨è¡¨æ ¼æ—¶ï¼Œä¼šæœ‰å¤§é‡çš„å›¾ç‰‡åœ¨ä¸»çº¿ç¨‹ä¸­é‡æ–°ç»˜åˆ¶ã€‚è¿™ä¸ªæ˜¯é€ æˆç¼ºå¤±é‚£å‡ å¸§çš„ä¸»è¦åŸå› ã€‚</p>
<p>è§£å†³åŠæ³•ï¼šé‚£å°±åœ¨å­çº¿ç¨‹æ€»å»draw, åœ¨ä¸»çº¿ç¨‹ä¸­å»æ˜¾ç¤º</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIImageView</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">drawImage</span><span class="params">(<span class="number">_</span> image: UIImage, targetSize: CGSize)</span></span> &#123;</div><div class="line">        <span class="type">DispatchQueue</span>.global().async &#123;</div><div class="line">            <span class="keyword">let</span> newRect = <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: targetSize.width, height: targetSize.height).integral</div><div class="line">            <span class="type">UIGraphicsBeginImageContextWithOptions</span>(targetSize, <span class="literal">false</span>, <span class="number">0</span>)</div><div class="line">            <span class="keyword">if</span> <span class="keyword">let</span> context = <span class="type">UIGraphicsGetCurrentContext</span>() &#123;</div><div class="line">                context.interpolationQuality = .high</div><div class="line">                <span class="keyword">let</span> flipVertical = <span class="type">CGAffineTransform</span>(a: <span class="number">1</span>, b: <span class="number">0</span>, <span class="built_in">c</span>: <span class="number">0</span>, d: -<span class="number">1</span>, tx: <span class="number">0</span>, ty: targetSize.height)</div><div class="line">                context.concatenate(flipVertical)</div><div class="line">                context.saveGState()</div><div class="line">                context.draw(image.cgImage!, <span class="keyword">in</span>: newRect)</div><div class="line">                context.restoreGState()</div><div class="line">                <span class="keyword">let</span> newImage = <span class="type">UIGraphicsGetImageFromCurrentImageContext</span>()</div><div class="line">                <span class="type">UIGraphicsEndImageContext</span>()</div><div class="line">                <span class="type">DispatchQueue</span>.main.async &#123;</div><div class="line">                    <span class="keyword">if</span> <span class="keyword">let</span> newImage = newImage&#123;</div><div class="line">                        <span class="keyword">self</span>.layer.contents = newImage.cgImage</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Objective-C</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">-(<span class="keyword">void</span>)drawImage:(<span class="built_in">UIImage</span> *)image targetSize:(<span class="built_in">CGSize</span> )size&#123;</div><div class="line">    <span class="built_in">dispatch_async</span>(dispatch_get_global_queue(QOS_CLASS_DEFAULT, <span class="number">0</span>), ^&#123;</div><div class="line">        <span class="built_in">CGRect</span> newRect = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, size.width, size.height);</div><div class="line">        <span class="built_in">CGRectIntegral</span>(newRect);</div><div class="line">        <span class="built_in">UIGraphicsBeginImageContextWithOptions</span>(size, <span class="literal">NO</span>, [<span class="built_in">UIScreen</span> mainScreen].scale);</div><div class="line">        <span class="built_in">CGContextRef</span> context = <span class="built_in">UIGraphicsGetCurrentContext</span>();</div><div class="line">        <span class="built_in">CGContextSetInterpolationQuality</span>(context, kCGInterpolationHigh);</div><div class="line">        <span class="built_in">CGAffineTransform</span> transform = <span class="built_in">CGAffineTransformMake</span>(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>, size.height);</div><div class="line">        <span class="built_in">CGContextConcatCTM</span>(context, transform);</div><div class="line">        <span class="built_in">CGContextSaveGState</span>(context);</div><div class="line">        <span class="built_in">CGContextDrawImage</span>(context, newRect, image.CGImage);</div><div class="line">        <span class="built_in">CGContextRestoreGState</span>(context);</div><div class="line">        <span class="built_in">UIImage</span> *newImage = <span class="built_in">UIGraphicsGetImageFromCurrentImageContext</span>();</div><div class="line">        <span class="built_in">UIGraphicsEndImageContext</span>();</div><div class="line">        <span class="built_in">dispatch_async</span>(dispatch_get_main_queue(), ^&#123;</div><div class="line">            <span class="keyword">if</span> (newImage) &#123;</div><div class="line">                <span class="keyword">self</span>.layer.contents = (<span class="keyword">id</span>)(newImage.CGImage);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¯¥æ–¹æ³•ä¹Ÿå¾ˆç®€å•,åœ¨å­çº¿ç¨‹ä¸­å»é‡æ–°drawä¸€ä¸ªUIImage,åœ¨ä¸»çº¿ç¨‹ä¸­å»æ˜¾ç¤ºã€‚</p>
<p>è°ƒç”¨ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">setImage</span>&lt;T: UIImageView&gt;<span class="params">(<span class="number">_</span> imageView: T, URLString: String, targetSize: CGSize)</span></span>&#123;</div><div class="line">Â  Â  Â  Â  imageView.pin_setImage(from: <span class="type">URL</span>.<span class="keyword">init</span>(string: <span class="type">URLString</span>), completion: &#123;(<span class="type">PINRemoteImageManagerResult</span>) <span class="keyword">in</span></div><div class="line">Â  Â  Â  Â  Â  Â  <span class="keyword">if</span> <span class="keyword">let</span> image = <span class="type">PINRemoteImageManagerResult</span>.image&#123;</div><div class="line">Â  Â  Â  Â  Â  Â  Â  Â  imageView.drawImage(image, targetSize: targetSize)</div><div class="line"><span class="comment">//Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  imageView.image = image.resizeImage(image, targetSize: targetSize)</span></div><div class="line">Â  Â  Â  Â  Â  Â  &#125;</div><div class="line">Â  Â  Â  Â  &#125;)</div><div class="line">Â  Â  &#125;</div></pre></td></tr></table></figure>
<p>é‡æ–°æµ‹ä¸‹å¸§æ•°ä»¥åŠTime Profile</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1421047-2c7369df156405e6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Jietu20170112-143643.png"><br>å½“å¿«é€Ÿæ»‘åŠ¨çš„æ—¶å€™åŸºæœ¬ä¸Šèƒ½å¤Ÿè¾¾åˆ°æ…¢å¸§çš„çŠ¶æ€</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1421047-833bed416800300a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Jietu20170112-143924.png"><br>æ‰€ç”¨çš„æ—¶é—´ä¹Ÿæ˜¯éå¸¸å°‘çš„ã€‚åœ¨16msä»¥å†…ã€‚</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/08/dispatch-semaphore-t-ä¿¡å·é‡/" itemprop="url">
                  dispatch_semaphore_t ä¿¡å·é‡
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-12-08T16:20:14+08:00" content="2016-12-08">
              2016-12-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Objective-C/" itemprop="url" rel="index">
                    <span itemprop="name">Objective-C</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="dispatch-semaphore-create"><a href="#dispatch-semaphore-create" class="headerlink" title="dispatch_semaphore_create"></a><code>dispatch_semaphore_create</code></h1><p><code>dispatch_semaphore_create(long value)</code> ä¼ å…¥çš„æ˜¯ä¸€ä¸ªæ•°å­—,è¯¥æ•°å­—å¿…é¡»å¤§äºç­‰äº0ã€‚åˆ—å¦‚ä¼ å…¥10ï¼Œè¡¨ç¤ºåˆ›å»ºä¸€ä¸ªä¿¡å·æ€»é‡ä¸º10ä¿¡å·é‡ï¼ˆå°±å¥½æ¯”ä¸€å…±æœ‰10ä¸ªåœè½¦ä½ï¼‰ã€‚å‡å¦‚ä¼ å…¥0</p>
<p>The starting value for the semaphore. Passing a value less than zero will cause NULL to be returned.</p>
<p>åˆ™è¿”å›ä¸ºNULL</p>
<h1 id="dispatch-semaphore-wait"><a href="#dispatch-semaphore-wait" class="headerlink" title="dispatch_semaphore_wait"></a><code>dispatch_semaphore_wait</code></h1><p>è¯¥å‡½æ•°ä¼šä½¿ä¼ å…¥çš„ä¿¡å·é‡å‡1,å½“ä¿¡å·é‡æœ‰ &gt;= 1æ—¶,å°±ä¼šç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚å¦‚æœæ²¡æœ‰,è¯¥çº¿ç¨‹å°±ä¼šä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€ï¼Œå¯é˜»å¡å½“å‰çº¿ç¨‹ã€‚è¯¥å‡½æ•°éœ€è¦ä¼ å…¥å¦ä¸€ä¸ªå‚æ•° </p>
<p><code>#define DISPATCH_TIME_NOW  è¡¨ç¤ºä»ç°åœ¨å¼€å§‹ #define DISPATCH_TIME_FOREVER  è¡¨ç¤ºæ°¸ä¸è¶…æ—¶</code></p>
<h1 id="dispatch-semaphore-single"><a href="#dispatch-semaphore-single" class="headerlink" title="dispatch_semaphore_single"></a><code>dispatch_semaphore_single</code></h1><p>è¯¥å‡½æ•°ä¼šä½¿ä¼ å…¥çš„ä¿¡å·é‡åŠ 1,ä¸<code>dispatch_ semaphore _ wait</code>æˆå¯¹å‡ºç°ã€‚</p>
<p>æ‹¿YYKitæºç æ¥ä¸¾ä¾‹ï¼šåœ¨#import â€œUIButton+YYWebImage.mâ€ä¸­</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">instancetype</span>)init &#123;</div><div class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</div><div class="line">    <span class="comment">//å£°æ˜ä¸€ä¸ªä¿¡å·æ€»é‡ä¸º1ä¿¡å·é‡</span></div><div class="line">    _lock = dispatch_semaphore_create(<span class="number">1</span>);</div><div class="line">    _dic = [<span class="built_in">NSMutableDictionary</span> new];</div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (_YYWebImageSetter *)setterForState:(<span class="built_in">NSNumber</span> *)state &#123;</div><div class="line"></div><div class="line"><span class="comment">//æ˜¯å½“å‰çº¿ç¨‹å¤„äºé˜»å¡çŠ¶æ€,ç›´åˆ°æœ‰ &gt;= 1 ä¿¡å·é‡æ‰ä¼šç»§ç»­æ‰§è¡Œä¸‹é¢çš„å–å€¼æ“ä½œ</span></div><div class="line">    dispatch_semaphore_wait(_lock, DISPATCH_TIME_FOREVER);</div><div class="line">    _YYWebImageSetter *<span class="keyword">setter</span> = _dic[state];</div><div class="line">    <span class="comment">//ä½¿è¯¥ä¿¡å·é‡åŠ 1ã€‚ä¿æŒä¿¡å·é‡çš„å¹³è¡¡ï¼Œå¦‚æœæ²¡æœ‰ä¿æŒä¿¡å·é‡çš„å¹³è¡¡,å¯èƒ½ä¼šå‡ºç°è«åçš„bug,ç”šè‡³crashã€‚</span></div><div class="line">    dispatch_semaphore_signal(_lock);</div><div class="line">    <span class="keyword">return</span> <span class="keyword">setter</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">- (_YYWebImageSetter *)lazySetterForState:(<span class="built_in">NSNumber</span> *)state &#123;</div><div class="line">    dispatch_semaphore_wait(_lock, DISPATCH_TIME_FOREVER);</div><div class="line">    _YYWebImageSetter *<span class="keyword">setter</span> = _dic[state];</div><div class="line">    <span class="keyword">if</span> (!<span class="keyword">setter</span>) &#123;</div><div class="line">        <span class="keyword">setter</span> = [_YYWebImageSetter new];</div><div class="line">        _dic[state] = <span class="keyword">setter</span>;</div><div class="line">    &#125;</div><div class="line">    dispatch_semaphore_signal(_lock);</div><div class="line">    <span class="keyword">return</span> <span class="keyword">setter</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨è¯»å–_YYWebImageSetterè¯¥å‡½æ•°ä¸­ä½¿ç”¨<code>dispatch_semaphore_wait</code>å’Œ<code>dispatch_semaphore_signal</code>ä½¿å½“å‰å‡½æ•°ä¸ºçº¿ç¨‹å®‰å…¨ã€‚å®é™…ä¸Šä¿¡å·é‡å°±æ˜¯é”ï¼Œå®ƒä¸ <code>@synchronized</code> å‡½æ•°çœ‹èµ·æ¥å¾ˆåƒã€‚æ‰€èµ·åˆ°çš„ä½œç”¨å°±æ˜¯è‡³å§‹è‡³ç»ˆåªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹å»è®¿é—®è¯¥å‡½æ•°ã€‚</p>
<p>åœ¨ <a href="http://www.cnblogs.com/snailHL/p/3906112.html" target="_blank" rel="external">è¿™è¾¹æ–‡ç« ä¸­</a>å¾ˆå½¢è±¡çš„æ¯”å–»äº†ä¿¡å·é‡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">å…³äºä¿¡å·é‡ï¼Œä¸€èˆ¬å¯ä»¥ç”¨åœè½¦æ¥æ¯”å–»ã€‚</div><div class="line"></div><div class="line">ã€€ã€€åœè½¦åœºå‰©ä½™4ä¸ªè½¦ä½ï¼Œé‚£ä¹ˆå³ä½¿åŒæ—¶æ¥äº†å››è¾†è½¦ä¹Ÿèƒ½åœçš„ä¸‹ã€‚å¦‚æœæ­¤æ—¶æ¥äº†äº”è¾†è½¦ï¼Œé‚£ä¹ˆå°±æœ‰ä¸€è¾†éœ€è¦ç­‰å¾…ã€‚</div><div class="line"></div><div class="line">ã€€ã€€ä¿¡å·é‡çš„å€¼å°±ç›¸å½“äºå‰©ä½™è½¦ä½çš„æ•°ç›®ï¼Œdispatch_semaphore_waitå‡½æ•°å°±ç›¸å½“äºæ¥äº†ä¸€è¾†è½¦ï¼Œdispatch_semaphore_signal</div><div class="line"></div><div class="line">ã€€ã€€å°±ç›¸å½“äºèµ°äº†ä¸€è¾†è½¦ã€‚åœè½¦ä½çš„å‰©ä½™æ•°ç›®åœ¨åˆå§‹åŒ–çš„æ—¶å€™å°±å·²ç»æŒ‡æ˜äº†ï¼ˆdispatch_semaphore_createï¼ˆlong valueï¼‰ï¼‰ï¼Œ</div><div class="line"></div><div class="line">ã€€ã€€è°ƒç”¨ä¸€æ¬¡dispatch_semaphore_signalï¼Œå‰©ä½™çš„è½¦ä½å°±å¢åŠ ä¸€ä¸ªï¼›è°ƒç”¨ä¸€æ¬¡dispatch_semaphore_waitå‰©ä½™è½¦ä½å°±å‡å°‘ä¸€ä¸ªï¼›</div><div class="line"></div><div class="line">ã€€ã€€å½“å‰©ä½™è½¦ä½ä¸º0æ—¶ï¼Œå†æ¥è½¦ï¼ˆå³è°ƒç”¨dispatch_semaphore_waitï¼‰å°±åªèƒ½ç­‰å¾…ã€‚æœ‰å¯èƒ½åŒæ—¶æœ‰å‡ è¾†è½¦ç­‰å¾…ä¸€ä¸ªåœè½¦ä½ã€‚æœ‰äº›è½¦ä¸»</div><div class="line"></div><div class="line">ã€€ã€€æ²¡æœ‰è€å¿ƒï¼Œç»™è‡ªå·±è®¾å®šäº†ä¸€æ®µç­‰å¾…æ—¶é—´ï¼Œè¿™æ®µæ—¶é—´å†…ç­‰ä¸åˆ°åœè½¦ä½å°±èµ°äº†ï¼Œå¦‚æœç­‰åˆ°äº†å°±å¼€è¿›å»åœè½¦ã€‚è€Œæœ‰äº›è½¦ä¸»å°±åƒæŠŠè½¦åœåœ¨è¿™ï¼Œ</div><div class="line"></div><div class="line">ã€€ã€€æ‰€ä»¥å°±ä¸€ç›´ç­‰ä¸‹å»ã€‚</div></pre></td></tr></table></figure>
<p>ä¸¾ä¸ªğŸŒ°   NSMutableArrayä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„,æˆ‘ä»¬å¯ä»¥ç¨ä½œä¿®é¥°,çº¿ç¨‹å®‰å…¨çš„å»æ›´æ–°æ•°ç»„</p>
<p>ã€€<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSMutableArray</span> *array = [<span class="built_in">NSMutableArray</span> array];</div><div class="line"> dispatch_semaphore_t semphore = dispatch_semaphore_create(<span class="number">1</span>);</div><div class="line"> <span class="built_in">dispatch_queue_t</span> concurrentQueue = dispatch_queue_create(<span class="string">"com.starming.gcddemo.concurrentqueue"</span>,DISPATCH_QUEUE_CONCURRENT);</div><div class="line">      dispatch_apply(<span class="number">100</span>, concurrentQueue, ^(size_t i) &#123;</div><div class="line">          dispatch_semaphore_wait(semphore, DISPATCH_TIME_FOREVER);</div><div class="line">          <span class="comment">/*</span></div><div class="line">          @synchronized (array) &#123;</div><div class="line">              [array addObject:[NSNumber numberWithUnsignedInteger:i]];</div><div class="line">          &#125;</div><div class="line">           */</div><div class="line">          [array addObject:[<span class="built_in">NSNumber</span> numberWithUnsignedInteger:i]];</div><div class="line">          dispatch_semaphore_signal(semphore);</div><div class="line">      &#125;);</div><div class="line">      <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,array);</div></pre></td></tr></table></figure></p>
<p>ã€€ã€€
ã€€ã€€</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/14/cocoapodså‡çº§1.1.0/" itemprop="url">
                  cocoapods æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬(1.1.0)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-10-14T20:45:52+08:00" content="2016-10-14">
              2016-10-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/å…¶ä»–/" itemprop="url" rel="index">
                    <span itemprop="name">å…¶ä»–</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>åœ¨Apple å‘å¸ƒswift3.0ä¹‹å ä¸€å¤§éƒ¨åˆ†è‘—åçš„ç¬¬ä¸‰æ–¹å¼€æºåº“,æ¯”å¦‚Alamofire,snapKit ä¹‹åéƒ½é™†ç»­æ›´æ–°åˆ°swift3.0ã€‚å½“æˆ‘ä»¬ç”¨cocoapodsç®¡ç†å®ƒä»¬æˆ–è€…ä½¿ç”¨å®ƒä»¬çš„æ—¶å€™éƒ½ä¼šçœ‹åˆ°è¿™æ ·ä¸€å¥è¯:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CocoaPods 1.1.0+ is required to build Alamofire 4.0.0+.</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CocoaPods 1.1.0+ is required to build SnapKit 3.0.0+.</div></pre></td></tr></table></figure>
<p>éœ€è¦å°†cocoapodsæ›´æ–°åˆ°1.1.0ç‰ˆæœ¬ä»¥ä¸Š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gem install cocoapods --pre //å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯ä¼šé‡åˆ°æƒé™é—®é¢˜</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ERROR:  While executing gem ... (Errno::EPERM) Operation not permitted - /usr/bin/pod</div></pre></td></tr></table></figure>
<p>éœ€è¦è¿™ä¹ˆä¸€å¥è¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo gem install cocoapods --pre -n /usr/local/bin cocoa pods</div></pre></td></tr></table></figure>
<p>åœ¨10.11ä»¥ä¸Šçš„ç³»ç»Ÿä¸­Appleå·²ç»å¯ç”¨æ— æ ¹çš„å®‰è£… stack overflowè¿™ä¹ˆè§£é‡Š:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">This is happening because Apple has enabled rootless on the new install</div></pre></td></tr></table></figure>
<p><a href="http://stackoverflow.com/questions/30812777/cannot-install-cocoa-pods-after-uninstalling-results-in-error/" target="_blank" rel="external">å‚è€ƒé“¾æ¥</a></p>
<p>æŸ¥çœ‹cocoapodså½“å‰ç‰ˆæœ¬</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod --version</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">1.1.0.beta.2</div></pre></td></tr></table></figure>
<p>æ­¤æ—¶cocoapodsç‰ˆæœ¬å°±ä¼šæ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/10/iOSå¼€å‘å°æŠ€å·§(ä¸€)/" itemprop="url">
                  iOSå¼€å‘å°æŠ€å·§(ä¸€)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-10-10T20:44:20+08:00" content="2016-10-10">
              2016-10-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Objective-C/" itemprop="url" rel="index">
                    <span itemprop="name">Objective-C</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="æ”¹å˜UIImagePickerControllerçš„å¯¼èˆªæ¡ä»¥åŠtitleçš„é¢œè‰²"><a href="#æ”¹å˜UIImagePickerControllerçš„å¯¼èˆªæ¡ä»¥åŠtitleçš„é¢œè‰²" class="headerlink" title="æ”¹å˜UIImagePickerControllerçš„å¯¼èˆªæ¡ä»¥åŠtitleçš„é¢œè‰²"></a>æ”¹å˜UIImagePickerControllerçš„å¯¼èˆªæ¡ä»¥åŠtitleçš„é¢œè‰²</h1><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)navigationController:(<span class="built_in">UINavigationController</span> *)navigationController willShowViewController:(<span class="built_in">UIViewController</span> *)viewController animated:(<span class="built_in">BOOL</span>)animated</div><div class="line">&#123;</div><div class="line">   [<span class="built_in">UIApplication</span> sharedApplication].statusBarStyle = <span class="built_in">UIStatusBarStyleLightContent</span>;</div><div class="line">    <span class="built_in">UINavigationBar</span> *bar = [<span class="built_in">UINavigationBar</span> appearance];</div><div class="line">    <span class="built_in">NSMutableDictionary</span> *titleDictionary = [<span class="built_in">NSMutableDictionary</span> dictionary];</div><div class="line">    titleDictionary[<span class="built_in">NSForegroundColorAttributeName</span>] = [<span class="built_in">UIColor</span> whiteColor];</div><div class="line">    [bar setTitleTextAttributes:titleDictionary];</div><div class="line">    viewController.navigationController.navigationBar.barTintColor = DIF_BASE_COLOR;</div><div class="line">    viewController.navigationController.navigationBar.tintColor = [<span class="built_in">UIColor</span> whiteColor];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="åˆ©ç”¨KVCæ”¹å˜TextFieldçš„å ä½ç¬¦çš„é¢œè‰²"><a href="#åˆ©ç”¨KVCæ”¹å˜TextFieldçš„å ä½ç¬¦çš„é¢œè‰²" class="headerlink" title="åˆ©ç”¨KVCæ”¹å˜TextFieldçš„å ä½ç¬¦çš„é¢œè‰²"></a>åˆ©ç”¨KVCæ”¹å˜TextFieldçš„å ä½ç¬¦çš„é¢œè‰²</h1><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[<span class="keyword">self</span>.nickNameTextField setValue:[<span class="built_in">UIColor</span> whiteColor] forKeyPath:<span class="string">@"_placeholderLabel.textColor"</span>];</div></pre></td></tr></table></figure>
<h1 id="TextViewçš„å­—æ•°é™åˆ¶"><a href="#TextViewçš„å­—æ•°é™åˆ¶" class="headerlink" title="TextViewçš„å­—æ•°é™åˆ¶"></a>TextViewçš„å­—æ•°é™åˆ¶</h1><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#define MaxNumberOfDescriptionChars  150</span></div><div class="line"></div><div class="line">-(<span class="keyword">void</span>)textViewEditChanged:(<span class="built_in">NSNotification</span> *)obj&#123;</div><div class="line">    <span class="built_in">UITextView</span> *textView = (<span class="built_in">UITextView</span> *)obj.object;</div><div class="line">    <span class="built_in">NSString</span> *toBeString = textView.text;</div><div class="line">    <span class="built_in">NSString</span> *lang = [[<span class="built_in">UITextInputMode</span> currentInputMode] primaryLanguage]; <span class="comment">// é”®ç›˜è¾“å…¥æ¨¡å¼</span></div><div class="line">    <span class="keyword">if</span> ([lang isEqualToString:<span class="string">@"zh-Hans"</span>]) &#123; <span class="comment">// ç®€ä½“ä¸­æ–‡è¾“å…¥ï¼ŒåŒ…æ‹¬ç®€ä½“æ‹¼éŸ³ï¼Œå¥ä½“äº”ç¬”ï¼Œç®€ä½“æ‰‹å†™</span></div><div class="line">        <span class="built_in">UITextRange</span> *selectedRange = [textView markedTextRange];</div><div class="line">        <span class="comment">//è·å–é«˜äº®éƒ¨åˆ†</span></div><div class="line">        <span class="built_in">UITextPosition</span> *position = [textView positionFromPosition:selectedRange.start offset:<span class="number">0</span>];</div><div class="line">        <span class="comment">// æ²¡æœ‰é«˜äº®é€‰æ‹©çš„å­—ï¼Œåˆ™å¯¹å·²è¾“å…¥çš„æ–‡å­—è¿›è¡Œå­—æ•°ç»Ÿè®¡å’Œé™åˆ¶</span></div><div class="line">        <span class="keyword">if</span> (!position) &#123;</div><div class="line">            <span class="keyword">if</span> (toBeString.length &gt; MaxNumberOfDescriptionChars) &#123;</div><div class="line">                textView.text = [toBeString substringToIndex:MaxNumberOfDescriptionChars];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// æœ‰é«˜äº®é€‰æ‹©çš„å­—ç¬¦ä¸²ï¼Œåˆ™æš‚ä¸å¯¹æ–‡å­—è¿›è¡Œç»Ÿè®¡å’Œé™åˆ¶</span></div><div class="line">        <span class="keyword">else</span>&#123;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// ä¸­æ–‡è¾“å…¥æ³•ä»¥å¤–çš„ç›´æ¥å¯¹å…¶ç»Ÿè®¡é™åˆ¶å³å¯ï¼Œä¸è€ƒè™‘å…¶ä»–è¯­ç§æƒ…å†µ</span></div><div class="line">    <span class="keyword">else</span>&#123;</div><div class="line">        <span class="keyword">if</span> (toBeString.length &gt; MaxNumberOfDescriptionChars) &#123;</div><div class="line">            </div><div class="line">            textView.text = [toBeString substringToIndex:MaxNumberOfDescriptionChars];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">- (<span class="built_in">BOOL</span>)textView:(<span class="built_in">UITextView</span> *)textView shouldChangeTextInRange:(<span class="built_in">NSRange</span>)range replacementText:(<span class="built_in">NSString</span> *)text&#123;</div><div class="line">    <span class="built_in">NSString</span> *new = [textView.text stringByReplacingCharactersInRange:range withString:text];</div><div class="line">    <span class="keyword">self</span>.numLabel.text = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%zdå­—"</span>,(MaxNumberOfDescriptionChars - new.length)];</div><div class="line">    <span class="keyword">if</span>(new.length &gt; MaxNumberOfDescriptionChars)&#123;</div><div class="line">         <span class="keyword">self</span>.numLabel.text = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%zdå­—"</span>,<span class="number">0</span>];</div><div class="line">        <span class="keyword">if</span> (![text isEqualToString:<span class="string">@""</span>]) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">NO</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="åˆ¤æ–­å­—ç¬¦ä¸²æˆ–è€…é›†åˆç±»å‹æ˜¯å¦ä¸ºç©º"><a href="#åˆ¤æ–­å­—ç¬¦ä¸²æˆ–è€…é›†åˆç±»å‹æ˜¯å¦ä¸ºç©º" class="headerlink" title="åˆ¤æ–­å­—ç¬¦ä¸²æˆ–è€…é›†åˆç±»å‹æ˜¯å¦ä¸ºç©º"></a>åˆ¤æ–­å­—ç¬¦ä¸²æˆ–è€…é›†åˆç±»å‹æ˜¯å¦ä¸ºç©º</h1><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">+ (<span class="built_in">BOOL</span>)isEmpty:(<span class="keyword">id</span> )obj</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> ([obj isKindOfClass:[<span class="built_in">NSString</span> <span class="keyword">class</span>]]) &#123;</div><div class="line">        <span class="keyword">if</span>(obj == <span class="literal">nil</span> || [obj <span class="keyword">class</span>] == [<span class="built_in">NSNull</span> null] || [obj isEqualToString:<span class="string">@""</span>] || [obj isEqualToString:<span class="string">@"(null)"</span>] || [obj isEqualToString:<span class="string">@"NULL"</span>] || [obj isEqualToString:<span class="string">@"&lt;null&gt;"</span>] || [obj isEqualToString:<span class="string">@"null"</span>])</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">YES</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">NO</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (obj == <span class="literal">nil</span> || (<span class="built_in">NSNull</span> *)obj == [<span class="built_in">NSNull</span> null] || ([obj respondsToSelector:<span class="keyword">@selector</span>(length)] &amp;&amp; [obj length] == <span class="number">0</span>) || ([obj respondsToSelector:<span class="keyword">@selector</span>(count)] &amp;&amp; [obj count] == <span class="number">0</span>))&#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">YES</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">NO</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="ç»™UIResponderæ·»åŠ indexPathå±æ€§"><a href="#ç»™UIResponderæ·»åŠ indexPathå±æ€§" class="headerlink" title="ç»™UIResponderæ·»åŠ indexPathå±æ€§"></a>ç»™UIResponderæ·»åŠ indexPathå±æ€§</h1><h2 id="åˆ—å¦‚åœ¨cellä¸­æœ‰button-imageview-å¯ä»¥åˆ©ç”¨è¯¥å±æ€§æ‰¾åˆ°cellä¸­æ”¹è¯¥è§†å›¾"><a href="#åˆ—å¦‚åœ¨cellä¸­æœ‰button-imageview-å¯ä»¥åˆ©ç”¨è¯¥å±æ€§æ‰¾åˆ°cellä¸­æ”¹è¯¥è§†å›¾" class="headerlink" title="åˆ—å¦‚åœ¨cellä¸­æœ‰button imageview å¯ä»¥åˆ©ç”¨è¯¥å±æ€§æ‰¾åˆ°cellä¸­æ”¹è¯¥è§†å›¾"></a>åˆ—å¦‚åœ¨cellä¸­æœ‰button imageview å¯ä»¥åˆ©ç”¨è¯¥å±æ€§æ‰¾åˆ°cellä¸­æ”¹è¯¥è§†å›¾</h2><h3 id="objective-C"><a href="#objective-C" class="headerlink" title="objective - C"></a>objective - C</h3><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">UIResponder</span> (<span class="title">Externtion</span>)</span></div><div class="line"></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSIndexPath</span> *indexPath;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)setIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath</div><div class="line">&#123;</div><div class="line">    objc_setAssociatedObject(<span class="keyword">self</span>, <span class="keyword">@selector</span>(indexPath), indexPath, OBJC_ASSOCIATION_RETAIN_NONATOMIC);</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">- (<span class="built_in">NSIndexPath</span> *)indexPath&#123;</div><div class="line">    <span class="keyword">return</span> objc_getAssociatedObject(<span class="keyword">self</span>, <span class="keyword">@selector</span>(indexPath));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="swift"><a href="#swift" class="headerlink" title="swift"></a>swift</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIResponder</span></span>&#123;</div><div class="line">    </div><div class="line">   <span class="keyword">private</span> <span class="class"><span class="keyword">struct</span> <span class="title">AssociatedKey</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">var</span> <span class="type">AssociatedName</span> = <span class="string">"AssociatedName"</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    </div><div class="line">    <span class="keyword">public</span> <span class="keyword">var</span> indexPath: <span class="type">NSIndexPath</span>?&#123;</div><div class="line">        <span class="keyword">get</span>&#123;</div><div class="line">           <span class="keyword">return</span> objc_getAssociatedObject(<span class="keyword">self</span>, &amp;<span class="type">AssociatedKey</span>.<span class="type">AssociatedName</span>) <span class="keyword">as</span>? <span class="type">NSIndexPath</span></div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">set</span>&#123;</div><div class="line">            <span class="keyword">if</span> <span class="keyword">let</span> newValue = newValue &#123;</div><div class="line">                objc_setAssociatedObject(<span class="keyword">self</span>, &amp;<span class="type">AssociatedKey</span>.<span class="type">AssociatedName</span>, newValue <span class="keyword">as</span> <span class="type">NSIndexPath</span> , .<span class="type">OBJC_ASSOCIATION_RETAIN_NONATOMIC</span>)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="UIRefreshControl"><a href="#UIRefreshControl" class="headerlink" title="UIRefreshControl"></a>UIRefreshControl</h1><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> refresh = <span class="type">UIRefreshControl</span>.<span class="keyword">init</span>()</div><div class="line">        refresh.tintColor = <span class="type">UIColor</span>.red</div><div class="line">        refresh.attributedTitle = <span class="type">NSAttributedString</span>.<span class="keyword">init</span>(string: <span class="string">"æ­£åœ¨åŠ è½½"</span>)</div><div class="line">        refresh.addTarget(<span class="keyword">self</span>, action: #selector(<span class="type">ViewController</span>.refreshTabeleView(sender:)), <span class="keyword">for</span>: <span class="type">UIControlEvents</span>.valueChanged)</div><div class="line">        </div><div class="line">        </div><div class="line">        tableView.refreshControl = refresh</div><div class="line">        tableView.addSubview(refresh)</div><div class="line">        tableView.reloadData()</div></pre></td></tr></table></figure>
<h1 id="å°†HTMLå­—ç¬¦ä¸²è½¬åŒ–ä¸ºNSAttributedStringå¯Œæ–‡æœ¬å­—ç¬¦ä¸²"><a href="#å°†HTMLå­—ç¬¦ä¸²è½¬åŒ–ä¸ºNSAttributedStringå¯Œæ–‡æœ¬å­—ç¬¦ä¸²" class="headerlink" title="å°†HTMLå­—ç¬¦ä¸²è½¬åŒ–ä¸ºNSAttributedStringå¯Œæ–‡æœ¬å­—ç¬¦ä¸²"></a>å°†HTMLå­—ç¬¦ä¸²è½¬åŒ–ä¸ºNSAttributedStringå¯Œæ–‡æœ¬å­—ç¬¦ä¸²</h1><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">NSAttributedString</span> *)attributedStringWithHTMLString:(<span class="built_in">NSString</span> *)htmlString</div><div class="line">&#123;</div><div class="line">    <span class="built_in">NSDictionary</span> *options = @&#123; <span class="built_in">NSDocumentTypeDocumentAttribute</span> : <span class="built_in">NSHTMLTextDocumentType</span>,</div><div class="line">                               <span class="built_in">NSCharacterEncodingDocumentAttribute</span> :@(<span class="built_in">NSUTF8StringEncoding</span>) &#125;;</div><div class="line">   </div><div class="line">    <span class="built_in">NSData</span> *data = [htmlString dataUsingEncoding:<span class="built_in">NSUTF8StringEncoding</span>];</div><div class="line">   </div><div class="line">    <span class="keyword">return</span> [[<span class="built_in">NSAttributedString</span> alloc] initWithData:data options:options documentAttributes:<span class="literal">nil</span> error:<span class="literal">nil</span>];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="CABasicAnimationï¼ˆCAKeyframeAnimationï¼‰key-path-å–å€¼"><a href="#CABasicAnimationï¼ˆCAKeyframeAnimationï¼‰key-path-å–å€¼" class="headerlink" title="CABasicAnimationï¼ˆCAKeyframeAnimationï¼‰key path å–å€¼"></a>CABasicAnimationï¼ˆCAKeyframeAnimationï¼‰key path å–å€¼</h1><h2 id="keyPathå¯ä»¥ä½¿ç”¨çš„key"><a href="#keyPathå¯ä»¥ä½¿ç”¨çš„key" class="headerlink" title="keyPathå¯ä»¥ä½¿ç”¨çš„key"></a>keyPathå¯ä»¥ä½¿ç”¨çš„key</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line">- define angle2Radian(angle) ((angle)/180.0*M_PI)</div><div class="line"></div><div class="line">transform.rotation.x å›´ç»•xè½´ç¿»è½¬ å‚æ•°ï¼šè§’åº¦ angle2Radian(4)</div><div class="line"></div><div class="line">transform.rotation.y å›´ç»•yè½´ç¿»è½¬ å‚æ•°ï¼šåŒä¸Š</div><div class="line"></div><div class="line">transform.rotation.z å›´ç»•zè½´ç¿»è½¬ å‚æ•°ï¼šåŒä¸Š</div><div class="line"></div><div class="line">transform.rotation é»˜è®¤å›´ç»•zè½´</div><div class="line"></div><div class="line">transform.scale.x xæ–¹å‘ç¼©æ”¾ å‚æ•°ï¼šç¼©æ”¾æ¯”ä¾‹ 1.5</div><div class="line"></div><div class="line">transform.scale.y yæ–¹å‘ç¼©æ”¾ å‚æ•°ï¼šåŒä¸Š</div><div class="line"></div><div class="line">transform.scale.z zæ–¹å‘ç¼©æ”¾ å‚æ•°ï¼šåŒä¸Š</div><div class="line"></div><div class="line">transform.scale æ‰€æœ‰æ–¹å‘ç¼©æ”¾ å‚æ•°ï¼šåŒä¸Š</div><div class="line"></div><div class="line">transform.translation.x xæ–¹å‘ç§»åŠ¨ å‚æ•°ï¼šxè½´ä¸Šçš„åæ ‡ 100</div><div class="line"></div><div class="line">transform.translation.y xæ–¹å‘ç§»åŠ¨ å‚æ•°ï¼šyè½´ä¸Šçš„åæ ‡</div><div class="line"></div><div class="line">transform.translation.z xæ–¹å‘ç§»åŠ¨ å‚æ•°ï¼šzè½´ä¸Šçš„åæ ‡</div><div class="line"></div><div class="line">transform.translation ç§»åŠ¨ å‚æ•°ï¼šç§»åŠ¨åˆ°çš„ç‚¹ ï¼ˆ100ï¼Œ100ï¼‰</div><div class="line"></div><div class="line">opacity é€æ˜åº¦ å‚æ•°ï¼šé€æ˜åº¦ 0.5</div><div class="line"></div><div class="line">backgroundColor èƒŒæ™¯é¢œè‰² å‚æ•°ï¼šé¢œè‰² (id)[[UIColor redColor] CGColor]</div><div class="line"></div><div class="line">cornerRadius åœ†è§’ å‚æ•°ï¼šåœ†è§’åŠå¾„ 5</div><div class="line"></div><div class="line">borderWidth è¾¹æ¡†å®½åº¦ å‚æ•°ï¼šè¾¹æ¡†å®½åº¦ 5</div><div class="line"></div><div class="line">bounds å¤§å° å‚æ•°ï¼šCGRect</div><div class="line"></div><div class="line">contents å†…å®¹ å‚æ•°ï¼šCGImage</div><div class="line"></div><div class="line">contentsRect å¯è§†å†…å®¹ å‚æ•°ï¼šCGRect å€¼æ˜¯0ï½1ä¹‹é—´çš„å°æ•°</div><div class="line"></div><div class="line">hidden æ˜¯å¦éšè—</div><div class="line"></div><div class="line">position</div><div class="line"></div><div class="line">shadowColor</div><div class="line"></div><div class="line">shadowOffset</div><div class="line"></div><div class="line">shadowOpacity</div><div class="line"></div><div class="line">shadowRadius</div></pre></td></tr></table></figure>
<h1 id="éšè—å¯¼èˆªæ¡å’ŒtabBarçš„ç›´çº¿"><a href="#éšè—å¯¼èˆªæ¡å’ŒtabBarçš„ç›´çº¿" class="headerlink" title="éšè—å¯¼èˆªæ¡å’ŒtabBarçš„ç›´çº¿"></a>éšè—å¯¼èˆªæ¡å’ŒtabBarçš„ç›´çº¿</h1><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">UINavigationBar</span> *bar = [<span class="built_in">UINavigationBar</span> appearance];</div><div class="line">bar.shadowImage = [<span class="built_in">UIImage</span> new];</div><div class="line">[bar setBackgroundImage:[<span class="built_in">UIImage</span> new] forBarMetrics:<span class="built_in">UIBarMetricsDefault</span>];</div></pre></td></tr></table></figure>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">UITabBar</span> *tabBar = [<span class="built_in">UITabBar</span> appearance];</div><div class="line">tabBar.shadowImage = [<span class="built_in">UIImage</span> new];</div><div class="line">tabBar.backgroundImage = [<span class="built_in">UIImage</span> new];</div></pre></td></tr></table></figure>
<h1 id="å…¨å±æ‰‹åŠ¿è¿”å›"><a href="#å…¨å±æ‰‹åŠ¿è¿”å›" class="headerlink" title="å…¨å±æ‰‹åŠ¿è¿”å›"></a>å…¨å±æ‰‹åŠ¿è¿”å›</h1><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">UIPanGestureRecognizer</span> *pan = [[<span class="built_in">UIPanGestureRecognizer</span> alloc] initWithTarget:<span class="keyword">self</span>.interactivePopGestureRecognizer.delegate action:<span class="keyword">@selector</span>(handleNavigationTransition:)];</div><div class="line">pan.delegate = <span class="keyword">self</span>;</div><div class="line">[<span class="keyword">self</span>.view addGestureRecognizer:pan];</div></pre></td></tr></table></figure>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">BOOL</span>)gestureRecognizer:(<span class="built_in">UIGestureRecognizer</span> *)gestureRecognizer shouldReceiveTouch:(<span class="built_in">UITouch</span> *)touch</div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span>.childViewControllers.count &gt; <span class="number">1</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="UITextViewçš„placeholder"><a href="#UITextViewçš„placeholder" class="headerlink" title="UITextViewçš„placeholder"></a>UITextViewçš„placeholder</h1><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)textViewDidBeginEditing:(<span class="built_in">UITextView</span> *)textView &#123;</div><div class="line">    [<span class="keyword">self</span> resetTextViewPlaceholderWithText:textView];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)textViewDidEndEditing:(<span class="built_in">UITextView</span> *)textView &#123;</div><div class="line">    [<span class="keyword">self</span> resetTextViewPlaceholderWithText:textView];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)resetTextViewPlaceholderWithText:(<span class="built_in">UITextView</span> *)textView</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> ([textView.text isEqualToString:<span class="string">@"è¦æ˜¾ç¤ºçš„placeholder"</span>]) &#123;</div><div class="line">        textView.text = <span class="string">@""</span>;</div><div class="line">        textView.textColor = [<span class="built_in">UIColor</span> blackColor];</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (textView.text.length &lt; <span class="number">1</span>) &#123;</div><div class="line">        textView.text = <span class="string">@"è¦æ˜¾ç¤ºçš„placeholder"</span>;</div><div class="line">        textView.textColor = [<span class="built_in">UIColor</span> colorWithRed:<span class="number">0.87</span> green:<span class="number">0.87</span> blue:<span class="number">0.87</span> alpha:<span class="number">1.00</span>];</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="è®©åº”ç”¨æ”¯æŒæ‘‡ä¸€æ‘‡"><a href="#è®©åº”ç”¨æ”¯æŒæ‘‡ä¸€æ‘‡" class="headerlink" title="è®©åº”ç”¨æ”¯æŒæ‘‡ä¸€æ‘‡"></a>è®©åº”ç”¨æ”¯æŒæ‘‡ä¸€æ‘‡</h1><ul>
<li>å¼€å¯æ‘‡ä¸€æ‘‡æƒé™</li>
</ul>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[<span class="built_in">UIApplication</span> sharedApplication].applicationSupportsShakeToEdit = <span class="literal">YES</span>;</div></pre></td></tr></table></figure>
<ul>
<li>è®©view/viewcontrolleræˆä¸ºç¬¬ä¸€å“åº”è€…</li>
</ul>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#pragma mark - UIResponder</span></div><div class="line">- (<span class="built_in">BOOL</span>)canBecomeFirstResponder &#123;</div><div class="line">	<span class="keyword">return</span> <span class="literal">YES</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>å®ç°æ–¹å‘</li>
</ul>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#pragma mark - æ‘‡åŠ¨</span></div><div class="line"><span class="comment">/**</span></div><div class="line"> *  æ‘‡åŠ¨å¼€å§‹</div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)motionBegan:(<span class="built_in">UIEventSubtype</span>)motion withEvent:(<span class="built_in">UIEvent</span> *)event &#123;</div><div class="line">    <span class="keyword">if</span> (motion == <span class="built_in">UIEventSubtypeMotionShake</span>) &#123;</div><div class="line">    <span class="comment">// do some thing</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> *  æ‘‡åŠ¨ç»“æŸ</div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)motionEnded:(<span class="built_in">UIEventSubtype</span>)motion withEvent:(<span class="built_in">UIEvent</span> *)event &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> *  æ‘‡åŠ¨å–æ¶ˆ</div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)motionCancelled:(<span class="built_in">UIEventSubtype</span>)motion withEvent:(<span class="built_in">UIEvent</span> *)event &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="HeaderViewéštableviewä¸€èµ·æ»‘åŠ¨"><a href="#HeaderViewéštableviewä¸€èµ·æ»‘åŠ¨" class="headerlink" title="HeaderViewéštableviewä¸€èµ·æ»‘åŠ¨"></a>HeaderViewéštableviewä¸€èµ·æ»‘åŠ¨</h1><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)scrollViewDidScroll:(<span class="built_in">UIScrollView</span> *)scrollView</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (scrollView == <span class="keyword">self</span>.tableView) &#123;</div><div class="line">        </div><div class="line">        <span class="built_in">CGFloat</span> headerHeight = DIF_SCREEN_HEIGHT / <span class="number">3</span>;</div><div class="line">        <span class="keyword">if</span> (scrollView.contentOffset.y &lt;= headerHeight &amp;&amp; scrollView.contentOffset.y &gt;= <span class="number">0</span>) &#123;</div><div class="line">            scrollView.contentInset = <span class="built_in">UIEdgeInsetsMake</span>(-scrollView.contentOffset.y, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (scrollView.contentOffset.y &gt;= headerHeight)&#123;</div><div class="line">            scrollView.contentInset = <span class="built_in">UIEdgeInsetsMake</span>(-headerHeight, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/09/load VS initialize/" itemprop="url">
                  load VS initialize
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-10-09T20:35:30+08:00" content="2016-10-09">
              2016-10-09
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Objective-C/" itemprop="url" rel="index">
                    <span itemprop="name">Objective-C</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="å…±åŒç‚¹"><a href="#å…±åŒç‚¹" class="headerlink" title="å…±åŒç‚¹"></a>å…±åŒç‚¹</h1><p>æ–¹æ³•åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡(ç›¸å¯¹äºruntimeè€Œè¨€)</p>
<h1 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h1><h2 id="loadæ–¹æ³•"><a href="#loadæ–¹æ³•" class="headerlink" title="loadæ–¹æ³•"></a>loadæ–¹æ³•</h2><p>å£°æ˜ä¸€ä¸ªSuperClassç±»ç»§æ‰¿ä¸NSObject </p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">SuperClass</span></span></div><div class="line">+ (<span class="keyword">void</span>) load &#123;</div><div class="line">  <span class="built_in">NSLog</span>(<span class="string">@"åŠ è½½loadæ–¹æ³•"</span>); </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">char</span> * argv[]) &#123;</div><div class="line">	<span class="keyword">@autoreleasepool</span> &#123;</div><div class="line">		<span class="built_in">NSLog</span>(<span class="string">@"main"</span>);</div><div class="line"></div><div class="line">	    <span class="keyword">return</span> <span class="built_in">UIApplicationMain</span>(argc, argv, <span class="literal">nil</span>, <span class="built_in">NSStringFromClass</span>([AppDelegate <span class="keyword">class</span>]));</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ§åˆ¶å°æ‰“å°è¾“å‡º <code>load 
main</code></p>
<p>å¾—å‡ºç»“è®º:loadæ–¹æ³•åœ¨ç¨‹åºå¯åŠ¨å‰å°±ä¼šè°ƒç”¨ã€‚åœ¨mainå‡½æ•°ä¹‹å‰è°ƒç”¨ã€‚</p>
<h2 id="initializeæ–¹æ³•"><a href="#initializeæ–¹æ³•" class="headerlink" title="initializeæ–¹æ³•"></a>initializeæ–¹æ³•</h2><p>æ‰§è¡Œä»¥ä¸‹ä»£ç </p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">+ (<span class="keyword">void</span>) initialize &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@ %s"</span>, [<span class="keyword">self</span> <span class="keyword">class</span>], __FUNCTION__);</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (<span class="keyword">void</span>) load &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@ %s"</span>, [<span class="keyword">self</span> <span class="keyword">class</span>], __FUNCTION__);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ§åˆ¶å°æ‰“å°è¾“å‡º</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">SuperClass +[SuperClass initialize]</div><div class="line">SuperClass +[SuperClass load]</div></pre></td></tr></table></figure>
<p>ä¸ºä»€ä¹ˆinitializeæ–¹æ³•ä¼šå†loadæ–¹æ³•å‰è°ƒç”¨å‘¢ï¼Ÿé€šè¿‡Appleçš„æ–‡æ¡£</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">The runtime sends initialize to each class in a program exactly one time just before the class, or any class that inherits from it, is sent its first message from within the program. (Thus the method may never be invoked if the class is not used.) The runtime sends the initialize message to classes in a thread-safe manner. Superclasses receive this message before their subclasses.</div></pre></td></tr></table></figure>
<p>å¾—çŸ¥: initializeæ–¹æ³•åœ¨ç±»çš„ç¬¬ä¸€ä¸ªæ–¹æ³•è¢«è°ƒç”¨å‰è°ƒç”¨ã€‚å³å…ˆæ‰§è¡Œloadæ–¹æ³•ä¸­çš„[self class] å°±ä¼šè°ƒç”¨initializeæ–¹æ³•ã€‚</p>
<h2 id="å­ç±»ä¼šè°ƒç”¨çˆ¶ç±»çš„initialize"><a href="#å­ç±»ä¼šè°ƒç”¨çˆ¶ç±»çš„initialize" class="headerlink" title="å­ç±»ä¼šè°ƒç”¨çˆ¶ç±»çš„initialize"></a>å­ç±»ä¼šè°ƒç”¨çˆ¶ç±»çš„initialize</h2><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ChildClass</span> : <span class="title">SuperClass</span></span></div><div class="line"></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">SuperClass</span></span></div><div class="line"></div><div class="line">+ (<span class="keyword">void</span>) initialize &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@ %s"</span>, [<span class="keyword">self</span> <span class="keyword">class</span>], __FUNCTION__);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">ChildClass</span></span></div><div class="line"></div><div class="line">+ (<span class="keyword">void</span>)load</div><div class="line">&#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@ %s"</span>, [<span class="keyword">self</span> <span class="keyword">class</span>], __FUNCTION__);</div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<p>è¿˜æ˜¯å¯¼å…¥å¤´æ–‡ä»¶è€Œä¸å»ä½¿ç”¨å®ƒæ§åˆ¶å°æ‰“å°è¾“å‡º</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">SuperClass +[SuperClass initialize]</div><div class="line">ChildClass +[ChildClass initialize]</div><div class="line">ChildClass +[ChildClass load]</div></pre></td></tr></table></figure>
<h2 id="ç±»åˆ«-Category-ä¸­çš„-void-loadçš„-void-initialize"><a href="#ç±»åˆ«-Category-ä¸­çš„-void-loadçš„-void-initialize" class="headerlink" title="ç±»åˆ«(Category)ä¸­çš„+(void)loadçš„+(void)initialize"></a>ç±»åˆ«(Category)ä¸­çš„+(void)loadçš„+(void)initialize</h2><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/******* Interface *******/</span></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MainClass</span> : <span class="title">NSObject</span></span></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="comment">/******* Category Implementation *******/</span></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MainClass</span>(<span class="title">Category</span>)</span></div><div class="line"></div><div class="line">+ (<span class="keyword">void</span>) load &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@ %s"</span>, [<span class="keyword">self</span> <span class="keyword">class</span>], __FUNCTION__);</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (<span class="keyword">void</span>) initialize &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@ %s"</span>, [<span class="keyword">self</span> <span class="keyword">class</span>], __FUNCTION__);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MainClass</span>(<span class="title">OtherCategory</span>)</span></div><div class="line"></div><div class="line">+ (<span class="keyword">void</span>) load &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@ %s"</span>, [<span class="keyword">self</span> <span class="keyword">class</span>], __FUNCTION__);</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (<span class="keyword">void</span>) initialize &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@ %s"</span>, [<span class="keyword">self</span> <span class="keyword">class</span>], __FUNCTION__);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="comment">/******* Implementation *******/</span></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MainClass</span></span></div><div class="line"></div><div class="line">+ (<span class="keyword">void</span>) load &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@ %s"</span>, [<span class="keyword">self</span> <span class="keyword">class</span>], __FUNCTION__);</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (<span class="keyword">void</span>) initialize &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@ %s"</span>, [<span class="keyword">self</span> <span class="keyword">class</span>], __FUNCTION__);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<p>import ä¹‹å </p>
<p>MainClass +[MainClass(OtherCategory) initialize]<br>MainClass +[MainClass load]<br>MainClass +[MainClass(Category) load]<br>MainClass +[MainClass(OtherCategory) load]</p>
<p>å…ˆæ‰§è¡Œç±»è‡ªèº«çš„å®ç°ï¼Œå†æ‰§è¡Œç±»åˆ«(Category)ä¸­çš„å®ç°</p>
<h2 id="ä¸éœ€è¦è°ƒç”¨-super-load-å’Œ-super-initialize"><a href="#ä¸éœ€è¦è°ƒç”¨-super-load-å’Œ-super-initialize" class="headerlink" title="ä¸éœ€è¦è°ƒç”¨[super load] å’Œ [super initialize]"></a>ä¸éœ€è¦è°ƒç”¨[super load] å’Œ [super initialize]</h2><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">+ (<span class="keyword">void</span>)initialize &#123;</div><div class="line">    <span class="comment">//do initialization thing</span></div><div class="line">    [<span class="keyword">super</span> initialize];</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (<span class="keyword">void</span>) load &#123;</div><div class="line">    <span class="comment">//do some loading things</span></div><div class="line">    [<span class="keyword">super</span> load];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·å†™æ˜¯å¤šä½™çš„</p>
<h1 id="å¼€å‘è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„"><a href="#å¼€å‘è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„" class="headerlink" title="å¼€å‘è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„"></a>å¼€å‘è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„</h1><p>åœ¨Objective-Cä¸­ï¼Œè¿è¡Œæ—¶ä¼šè‡ªåŠ¨è°ƒç”¨æ¯ä¸ªç±»çš„ä¸¤ä¸ªæ–¹æ³•ã€‚+loadä¼šåœ¨ç±»åˆå§‹åŠ è½½æ—¶è°ƒç”¨ï¼Œ+initializeä¼šåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ç±»çš„ç±»æ–¹æ³•æˆ–å®ä¾‹æ–¹æ³•ä¹‹å‰è¢«è°ƒç”¨ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯å¯é€‰çš„ï¼Œä¸”åªæœ‰åœ¨å®ç°äº†å®ƒä»¬æ—¶æ‰ä¼šè¢«è°ƒç”¨ã€‚ç”±äºmethod swizzlingä¼šå½±å“åˆ°ç±»çš„å…¨å±€çŠ¶æ€ï¼Œå› æ­¤è¦å°½é‡é¿å…åœ¨å¹¶å‘å¤„ç†ä¸­å‡ºç°ç«äº‰çš„æƒ…å†µã€‚+loadèƒ½ä¿è¯åœ¨ç±»çš„åˆå§‹åŒ–è¿‡ç¨‹ä¸­è¢«åŠ è½½ï¼Œå¹¶ä¿è¯è¿™ç§æ”¹å˜åº”ç”¨çº§åˆ«çš„è¡Œä¸ºçš„ä¸€è‡´æ€§ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œ+initializeåœ¨å…¶æ‰§è¡Œæ—¶ä¸æä¾›è¿™ç§ä¿è¯â€“äº‹å®ä¸Šï¼Œå¦‚æœåœ¨åº”ç”¨ä¸­æ²¡ä¸ºç»™è¿™ä¸ªç±»å‘é€æ¶ˆæ¯ï¼Œåˆ™å®ƒå¯èƒ½æ°¸è¿œä¸ä¼šè¢«è°ƒç”¨</p>
<p>å‚è€ƒé“¾æ¥:<br><a href="http://www.cnblogs.com/ider/archive/2012/09/29/objective_c_load_vs_initialize.html" target="_blank" rel="external">Objective Cç±»æ–¹æ³•loadå’Œinitializeçš„åŒºåˆ«</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/24/3D - Touchä¹‹Peek & Pop/" itemprop="url">
                  3D - Touchï¼ˆäºŒï¼‰ä¹‹Peek & Pop
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-09-24T10:21:50+08:00" content="2016-09-24">
              2016-09-24
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>åœ¨ä»‹ç»äº†å‰é¢çš„æ¡Œé¢çš„3D-Touch,è¿™ç¯‡æ–‡ç« æ¥ä»‹ç»åº”ç”¨ä¸­ä½¿ç”¨peek &amp; popã€‚ æ¯”å¦‚QQ å¾®ä¿¡ä¸­æ¶ˆæ¯ç•Œé¢é‡å‹cellå°±ä¼šå‡ºç°peek &amp; popã€‚æ¥ä¸‹æ¥å®ç°è¿™ä¸€æ•ˆæœã€‚</p>
<h1 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h1><h2 id="åˆ›å»ºè§†å›¾-sourceView"><a href="#åˆ›å»ºè§†å›¾-sourceView" class="headerlink" title="åˆ›å»ºè§†å›¾(sourceView)"></a>åˆ›å»ºè§†å›¾(sourceView)</h2><p>é¦–å…ˆç”¨tableviewæ¥åšä¾‹å­ã€‚ç”¨storyboardåˆ›å»ºè¡¨,åœ¨è¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> titleArray = [<span class="string">"3D-Touch Objective-C"</span>,<span class="string">"3D-Touch Swift"</span>,<span class="string">"å‰è¨€å¿«æŠ¥:Swiftç»ˆå°†è¶…è¶ŠOC,è¿›è€Œå–ä»£OC"</span>,<span class="string">"Github9æœˆç¼–ç¨‹è¯­è¨€ JS è·ƒå±…ç¬¬ä¸€ä½"</span>]</div></pre></td></tr></table></figure>
<p>åˆ›å»ºä¸€ä¸ªæ•°ç»„æ¥åštableviewçš„æ•°æ®æºã€‚</p>
<h2 id="å®ç°ä»£ç†"><a href="#å®ç°ä»£ç†" class="headerlink" title="å®ç°ä»£ç†"></a>å®ç°ä»£ç†</h2><p>åœ¨å®ç°è¿™ä¸€æ•ˆæœä¹‹å‰,éœ€è¦ä½¿å½“å‰çš„æ§åˆ¶å™¨å®ç°<code>UIViewControllerPreviewingDelegate</code>ä»£ç†å¹¶ä¸”è¦åˆ¤æ–­å½“å‰è®¾å¤‡æ˜¯å¦æ”¯æŒPeek &amp; pop:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> traitCollection.forceTouchCapability == .available&#123;</div><div class="line">            registerForPreviewing(with: <span class="keyword">self</span>, sourceView: tableView)</div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<p>ä»£ç†ä¸­æœ‰ä¸¤ä¸ªæ–¹æ³•:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">previewingContext</span><span class="params">(<span class="number">_</span> previewingContext: UIViewControllerPreviewing, viewControllerForLocation location: CGPoint)</span></span> -&gt; <span class="type">UIViewController</span>?</div></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥è·å–åˆ°è¦æ˜¾ç¤ºçš„æ˜¯å“ªä¸ªç›®æ ‡viewï¼ˆsourceViewï¼‰ä»¥åŠæ‰‹åŠ¿,å…¶ä¸­æœ‰ä¸ªå±æ€§ï¼ˆsourceRectï¼‰è¿˜å¯ä»¥æ§åˆ¶é‚£å—åŒºåŸŸå±•ç¤ºå‡ºpeekçš„æ•ˆæœ</p>
<p>ç¬¬äºŒä¸ªå‚æ•°location é¡¾åæ€ä¹‰å°±æ˜¯è¦æ§åˆ¶èƒ½äº§ç”Ÿé‡å‹çš„åŒºåŸŸã€‚(ä¸ç¬¬ä¸€ä¸ªå‚æ•°çš„sourceRectä¸åŒ,sourceRectåªæ˜¯å“ªç‰‡åŒºåŸŸè¦å±•ç¤ºpeekæ•ˆæœ,å°±æ˜¯åœ¨å±å¹•ä¸­è§†å›¾å‡¸èµ·çš„é‚£ä¸€éƒ¨åˆ†ã€‚å¦‚æœä¸è®¾ç½®é»˜è®¤å°±æ˜¯æ•´ä¸ªsourceView,è€Œè¿™ä¸ªå‚æ•°åˆ™æ˜¯æ§åˆ¶å“ªäº›åŒºåŸŸèƒ½ä½¿ç”¨peekæ•ˆæœ)ã€‚æ³¨æ„ â€œèƒ½â€ å’Œ â€œè¦â€ã€‚<br>è¿™ä¸ªæ–¹æ³•è¿”å›çš„æ˜¯è¦æ˜¾ç¤ºçš„é‚£ä¸ªæ§åˆ¶å™¨,å°±æ˜¯popé¢„è§ˆçš„é‚£ä¸ªæ§åˆ¶å™¨ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">previewingContext</span><span class="params">(<span class="number">_</span> previewingContext: UIViewControllerPreviewing, commit viewControllerToCommit: UIViewController)</span></span></div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ³•å°±æ˜¯ç”¨æ¥åšè·³è½¬çš„ã€‚</p>
<h2 id="å¼€å§‹å®ç°ä»£ç†æ–¹æ³•"><a href="#å¼€å§‹å®ç°ä»£ç†æ–¹æ³•" class="headerlink" title="å¼€å§‹å®ç°ä»£ç†æ–¹æ³•"></a>å¼€å§‹å®ç°ä»£ç†æ–¹æ³•</h2><p>æˆ‘ä»¬éœ€è¦æ–°å»ºä¸€ä¸ªæ§åˆ¶å™¨æ¥åšpopæ•ˆæœ,è¿”å›å‡ºè¿™ä¸ªæ§åˆ¶å™¨ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">previewingContext</span><span class="params">(<span class="number">_</span> previewingContext: UIViewControllerPreviewing, viewControllerForLocation location: CGPoint)</span></span> -&gt; <span class="type">UIViewController</span>? &#123;</div><div class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> indexPath = tableView.indexPathForRow(at:location) , <span class="keyword">let</span> cell = tableView.cellForRow(at: indexPath) <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">nil</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">let</span> detailVC  = <span class="type">UIStoryboard</span>.<span class="keyword">init</span>(name: <span class="string">"Main"</span>, bundle: <span class="literal">nil</span>).instantiateViewController(withIdentifier: <span class="string">"detail"</span>) <span class="keyword">as</span>! <span class="type">DetailViewController</span></div><div class="line">    previewingContext.sourceRect = cell.frame</div><div class="line">    detailVC.text = (cell.textLabel?.text)!</div><div class="line">    <span class="keyword">return</span> detailVC</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">previewingContext</span><span class="params">(<span class="number">_</span> previewingContext: UIViewControllerPreviewing, commit viewControllerToCommit: UIViewController)</span></span> &#123;</div><div class="line"><span class="comment">//        self.show(viewControllerToCommit, sender: self)</span></div><div class="line">        <span class="keyword">self</span>.navigationController?.pushViewController(viewControllerToCommit, animated: <span class="literal">true</span>)</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>show å’Œ pushéƒ½èƒ½å±•ç¤ºå‡ºç›¸åŒçš„æ•ˆæœ</p>
<h2 id="åœ¨æ˜¾ç¤ºçš„æ§åˆ¶å™¨ä¸­è®¾ç½®ä»£ç "><a href="#åœ¨æ˜¾ç¤ºçš„æ§åˆ¶å™¨ä¸­è®¾ç½®ä»£ç " class="headerlink" title="åœ¨æ˜¾ç¤ºçš„æ§åˆ¶å™¨ä¸­è®¾ç½®ä»£ç "></a>åœ¨æ˜¾ç¤ºçš„æ§åˆ¶å™¨ä¸­è®¾ç½®ä»£ç </h2><p>åœ¨detailviewcontrollerä¸­éœ€è¦è¿”å›å‡ºpopå‘ä¸Šæ‹‰çš„é€‰é¡¹ã€‚ï¼ˆä¹Ÿå¯ä»¥ä¸å®ç°ï¼‰å¦å¤–è¦ä¸ºäº†è¦å±•ç¤ºå‡ºæ•°æ®,æˆ‘åœ¨è¯¥è§†å›¾æ§åˆ¶å™¨ä¸­æ·»åŠ äº†ä¸€ä¸ªtextviewæ¥å±•ç¤ºæ•°æ®ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">self</span>.title = <span class="string">"è¯¦æƒ…"</span></div><div class="line"><span class="keyword">self</span>.automaticallyAdjustsScrollViewInsets = <span class="literal">false</span></div><div class="line"><span class="keyword">self</span>.textView.text = text</div></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">override</span> <span class="keyword">var</span> previewActionItems: [<span class="type">UIPreviewActionItem</span>]&#123;</div><div class="line">       </div><div class="line">       <span class="keyword">let</span> action1 = <span class="type">UIPreviewAction</span>.<span class="keyword">init</span>(title: <span class="string">"å–œæ¬¢"</span>, style: .<span class="keyword">default</span>) &#123; (<span class="type">UIPreviewAction</span>, <span class="type">UIViewController</span>) <span class="keyword">in</span> </div><div class="line">       &#125;</div><div class="line">       </div><div class="line">       <span class="keyword">let</span> action2 = <span class="type">UIPreviewAction</span>.<span class="keyword">init</span>(title: <span class="string">"æ”¶è—"</span>, style: .<span class="keyword">default</span>) &#123; (<span class="type">UIPreviewAction</span>, <span class="type">UIViewController</span>) <span class="keyword">in</span></div><div class="line">           </div><div class="line">       &#125;</div><div class="line">       </div><div class="line">       <span class="keyword">let</span> cancle = <span class="type">UIPreviewAction</span>.<span class="keyword">init</span>(title: <span class="string">"å–æ¶ˆ"</span>, style: .<span class="keyword">default</span>) &#123; (<span class="type">UIPreviewAction</span>, <span class="type">UIViewController</span>) <span class="keyword">in</span></div><div class="line">           </div><div class="line">       &#125;</div><div class="line">       </div><div class="line">       <span class="keyword">let</span> delete = <span class="type">UIPreviewAction</span>.<span class="keyword">init</span>(title: <span class="string">"åˆ é™¤"</span>, style: .destructive) &#123; (<span class="type">UIPreviewAction</span>, <span class="type">UIViewController</span>) <span class="keyword">in</span></div><div class="line">           </div><div class="line">       &#125;</div><div class="line">   </div><div class="line">       <span class="keyword">let</span> actionGroup = <span class="type">UIPreviewActionGroup</span>.<span class="keyword">init</span>(title: <span class="string">"åˆ é™¤"</span>, style: .destructive, actions: [cancle,delete])</div><div class="line">       </div><div class="line">       <span class="keyword">return</span> [action1, action2 ,actionGroup]</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p>è¿”å›çš„æ•°ç»„ä¸­å­˜çš„æ˜¯UIPreviewActionã€‚è¿™ä¸ªæ•°ç»„å¯ä»¥æ˜¯ä¸ªäºŒç»´æ•°ç»„,æ‰€ä»¥å¯ä»¥å±•ç¤ºå‡ºå¾ˆå¤šé€‰é¡¹ã€‚ä¾‹å­ä¸­è¿”å›çš„å°±æ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ã€‚</p>
<h1 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h1><p>åˆ°æ­¤æ•´ä¸ªæ•ˆæœçš„ä»£ç éƒ½è®¾ç½®å®Œäº†ã€‚æ¥ä¸‹æ¥è¿è¡Œç¨‹åº,çœ‹çœ‹æˆ‘ä»¬çš„æˆæœå§:</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1421047-f73b14b53899dc5b.gif?imageMogr2/auto-orient/strip" alt="3D- Touch.gif"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/23/3D-Touch æ¡Œé¢/" itemprop="url">
                  3D - Touch(ä¸€) æ¡Œé¢
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-09-23T20:07:51+08:00" content="2016-09-23">
              2016-09-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="æ¡Œé¢3D-Touch"><a href="#æ¡Œé¢3D-Touch" class="headerlink" title="æ¡Œé¢3D - Touch"></a>æ¡Œé¢3D - Touch</h1><h2 id="å¿«æ·é™æ€æ“ä½œï¼ˆQuick-actionsï¼‰"><a href="#å¿«æ·é™æ€æ“ä½œï¼ˆQuick-actionsï¼‰" class="headerlink" title="å¿«æ·é™æ€æ“ä½œï¼ˆQuick actionsï¼‰"></a>å¿«æ·é™æ€æ“ä½œï¼ˆQuick actionsï¼‰</h2><p>éœ€è¦åœ¨ <code>info.plist</code>ä¸­é…ç½®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">&lt;key&gt;UIApplicationShortcutItems&lt;/key&gt;</div><div class="line">&lt;array&gt;</div><div class="line">	&lt;dict&gt;</div><div class="line">		&lt;key&gt;UIApplicationShortcutItemIconType&lt;/key&gt;</div><div class="line">		&lt;string&gt;UIApplicationShortcutIconTypeShare&lt;/string&gt;</div><div class="line">		&lt;key&gt;UIApplicationShortcutItemTitle&lt;/key&gt;</div><div class="line">		&lt;string&gt;å¼¹ä¸€å¼¹&lt;/string&gt;</div><div class="line">		&lt;key&gt;UIApplicationShortcutItemType&lt;/key&gt;</div><div class="line">		&lt;string&gt;com.yuwubao.search&lt;/string&gt;</div><div class="line">	&lt;/dict&gt;</div><div class="line">	&lt;dict&gt;</div><div class="line">		&lt;key&gt;UIApplicationShortcutItemIconType&lt;/key&gt;</div><div class="line">		&lt;string&gt;UIApplicationShortcutIconTypeShare&lt;/string&gt;</div><div class="line">		&lt;key&gt;UIApplicationShortcutItemTitle&lt;/key&gt;</div><div class="line">		&lt;string&gt;æ‘‡ä¸€æ‘‡&lt;/string&gt;</div><div class="line">		&lt;key&gt;UIApplicationShortcutItemType&lt;/key&gt;</div><div class="line">		&lt;string&gt;com.yuwubao.search&lt;/string&gt;</div><div class="line">	&lt;/dict&gt;</div><div class="line">	&lt;dict&gt;</div><div class="line">		&lt;key&gt;UIApplicationShortcutItemIconType&lt;/key&gt;</div><div class="line">		&lt;string&gt;UIApplicationShortcutIconTypeShare&lt;/string&gt;</div><div class="line">		&lt;key&gt;UIApplicationShortcutItemTitle&lt;/key&gt;</div><div class="line">		&lt;string&gt;æ‰«ä¸€æ‰«&lt;/string&gt;</div><div class="line">		&lt;key&gt;UIApplicationShortcutItemType&lt;/key&gt;</div><div class="line">		&lt;string&gt;com.yuwubao.search&lt;/string&gt;</div><div class="line">	&lt;/dict&gt;</div><div class="line">&lt;/array&gt;</div></pre></td></tr></table></figure>
<p>å…³äºå‡ ä¸ªå¿…é¡»è¦å¡«å†™çš„é¡¹ï¼š</p>
<ol>
<li>UIApplicationShortcutItemTitle:  è¡¨ç¤ºè¦æ˜¾ç¤ºçš„æ ‡é¢˜ã€‚å±•ç¤ºåœ¨ä½ çš„quick actionèœå•ä¸­çš„actionæ ‡é¢˜ã€‚å¦‚æœæ ‡é¢˜ä¸€è¡Œæ— æ³•æ˜¾ç¤ºå¹¶ä¸”ä½ æ²¡æœ‰æŒ‡å®šå­æ ‡é¢˜é‚£ä¹ˆå®ƒå°†æ˜¾ç¤ºä¸¤è¡Œã€‚å¯ä»¥ä½¿ç”¨æœ¬åœ°åŒ–(localised)ã€‚</li>
<li>UIApplicationShortcutItemType:  ä½œä¸ºUIApplicationShortcutItemçš„ä¸€éƒ¨åˆ†å‘é€ç»™ä½ çš„åº”ç”¨ã€‚å¯ä»¥ä¾æ®ä¸åŒçš„shortcutç±»å‹ç”¨äºæ‰§è¡Œä½ çš„actionsã€‚å‘½åè§„åˆ™ä¸ºï¼š com.å…¬å¸å.appå.å›¾æ ‡ä½œç”¨å</li>
</ol>
<p>å…³äºé€‰å¡«çš„é¡¹ï¼š</p>
<ol>
<li>UIApplicationShortcutItemIconType:  å®šä¹‰å†…ç½®å›¾æ ‡ç±»å‹çš„å­—ç¬¦ä¸²ï¼Œå¯é€‰ç±»å‹åˆ—è¡¨å¯ä»¥æŸ¥è¯¢<a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplicationShortcutIcon_Class/index.html#//apple_ref/c/tdef/UIApplicationShortcutIconType" target="_blank" rel="external">è¿™é‡Œ</a></li>
<li>UIApplicationShortcutItemSubtitle:  ç”¨æˆ·å±•ç¤ºä½ çš„actionsçš„å­æ ‡é¢˜çš„å­—ç¬¦ä¸²ã€‚å®ƒå°†æ˜¾ç¤ºåœ¨ä½ çš„quick actionsæ ‡é¢˜çš„ä¸‹æ–¹ã€‚å¯ä»¥æœ¬åœ°åŒ–ã€‚</li>
<li>UIApplicationShortcutItemIconFileï¼šä¸€ä¸ªæŒ‡å®šAssets Catalogæˆ–è€…Bundleä¸­çš„å­—ç¬¦ä¸²ã€‚å¦‚æœæŒ‡å®šäº†æ­¤é”®ï¼Œåˆ™ç³»ç»Ÿä¼šå¿½ç•¥UIApplicationShortcutItemIconType</li>
<li>UIApplicationShortcutItemUserInfoï¼šä¸€ä¸ªå­—å…¸ï¼ŒåŒ…å«ä½ æƒ³è¦è§£æçš„å…¶ä»–ä¿¡æ¯ã€‚</li>
</ol>
<h2 id="ç¬¬äºŒæ­¥"><a href="#ç¬¬äºŒæ­¥" class="headerlink" title="ç¬¬äºŒæ­¥"></a>ç¬¬äºŒæ­¥</h2><p>åœ¨å…¥å£ç±»æ–‡ä»¶ï¼ˆappDelegateï¼‰ä¸­</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">application</span><span class="params">(<span class="number">_</span> application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">        </div><div class="line">        <span class="comment">//æ£€æµ‹ç‰ˆæœ¬</span></div><div class="line">        <span class="keyword">if</span> <span class="type">UIDevice</span>.current.systemVersion &gt;= <span class="string">"9.0"</span> &#123;</div><div class="line">            <span class="keyword">let</span> shortcutItem = launchOptions?[<span class="type">UIApplicationLaunchOptionsKey</span>.shortcutItem] <span class="keyword">as</span>? <span class="type">UIApplicationShortcutItem</span></div><div class="line">            <span class="keyword">if</span> <span class="keyword">let</span> shortcutItem = shortcutItem&#123;</div><div class="line">                <span class="keyword">self</span>.quickActionWithShortcutItem(shortcutItem: shortcutItem)</div><div class="line">            &#125;</div><div class="line">            </div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>è¿˜è¦å®ç°å¦ä¸€ä¸ªæ–¹æ³•</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//MARK: - 3D-Touch</span></div><div class="line"> <span class="function"><span class="keyword">func</span> <span class="title">application</span><span class="params">(<span class="number">_</span> application: UIApplication, performActionFor shortcutItem: UIApplicationShortcutItem, completionHandler: @escaping <span class="params">(Bool)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</div><div class="line">     <span class="keyword">self</span>.quickActionWithShortcutItem(shortcutItem: shortcutItem)</div><div class="line">     completionHandler(<span class="literal">true</span>)</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<p>ç”±äºä»£ç çš„å†—ä½™ éœ€è¦å®šä¹‰ä¸€ä¸ªç§æœ‰çš„æ–¹æ³• å¯ä»¥æ ¹æ®<br><code>localizedTitle</code> æˆ–è€… <code>type</code> æ¥åŒºåˆ«ç‚¹å‡»çš„æ˜¯å“ªä¸ªã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span>  <span class="function"><span class="keyword">func</span> <span class="title">quickActionWithShortcutItem</span><span class="params">(shortcutItem: UIApplicationShortcutItem)</span></span>&#123;</div><div class="line">      <span class="keyword">let</span> nav = <span class="keyword">self</span>.window?.rootViewController <span class="keyword">as</span>? <span class="type">UINavigationController</span></div><div class="line">      <span class="keyword">if</span> shortcutItem.localizedTitle == <span class="string">"å¼¹ä¸€å¼¹"</span>&#123;</div><div class="line">          </div><div class="line">      &#125;<span class="keyword">else</span> <span class="keyword">if</span> shortcutItem.localizedTitle == <span class="string">"æ‘‡ä¸€æ‘‡"</span>&#123;</div><div class="line">          </div><div class="line">          <span class="keyword">let</span> detailVC = <span class="type">UIStoryboard</span>.<span class="keyword">init</span>(name: <span class="string">"Main"</span>, bundle: <span class="literal">nil</span>).instantiateViewController(withIdentifier: <span class="string">"detail"</span>) <span class="keyword">as</span>! <span class="type">DetailViewController</span></div><div class="line">          nav!.pushViewController(detailVC, animated: <span class="literal">true</span>)</div><div class="line">          </div><div class="line">      &#125;<span class="keyword">else</span>&#123;</div><div class="line">          </div><div class="line">          nav!.pushViewController(<span class="type">ThirdViewController</span>(), animated: <span class="literal">true</span>)</div><div class="line">      &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>åˆ°è¿™é‡Œå®Œå…¨è®¾ç½®å¥½äº†æ¡Œé¢å›¾æ ‡çš„3D - Touchã€‚ ç”±äºæœ€è¿‘ç³»ç»Ÿå‡çº§åˆ°äº†iOS10 æ¡Œé¢iconçš„3D - Touch æ–°å¢äº†widgetã€‚æ¥ä¸‹æ¥å°±æ¥æ—¶é€‚é…iOS10ã€‚</p>
<h1 id="Extention"><a href="#Extention" class="headerlink" title="Extention"></a>Extention</h1><p>(æ›´å¤šä¿¡æ¯ç§»æ­¥åˆ°<a href="https://onevcat.com/2014/08/notification-today-widget/" target="_blank" rel="external">è¿™é‡Œ</a>)(å–µç¥åšå®¢)</p>
<p>Extensionsä¸æ˜¯ç‹¬ç«‹çš„åº”ç”¨ç¨‹åºã€‚Extensionså¿…é¡»ä¾èµ–äºä¸€ä¸ªhost appï¼Œå«ä½œå®¿ä¸»APPï¼ŒåŒæ—¶ä»–ä»¬çš„ç”Ÿå‘½å‘¨æœŸç›¸äº’ç‹¬ç«‹ï¼Œå¹¶ä¸”å¯ä»¥äº’ç›¸è§¦å‘äº‹ä»¶ã€‚ä¸€ä¸ªå®¿ä¸»APPå¯ä»¥åŒ…å«å¤šä¸ªExtensionsã€‚æœ¬ç¯‡æ–‡ç« ä¸»è¦æ˜¯ Today Extentionã€‚åˆ›å»ºæ–¹æ³• <code>File-&gt;New-&gt;Target</code></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1421047-2c7a1a352ceedf42.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20160923-0@2x.png"></p>
<p>å·¥ç¨‹ä¸­ä¼šå¤šå‡ºè¿™äº›æ–‡ä»¶</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1421047-8d30c066607b9592.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20160923-1@2x.png"></p>
<p>åœ¨MainInterface.storyboardä¸­æˆ‘ä»¬å¯ä»¥å®šåˆ¶UIã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1421047-4ac148040ca13437.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20160923-3@2x.png"></p>
<p>å½“æˆ‘ä»¬æƒ³çº¯ä»£ç æ„å»ºUIæ—¶,åœ¨ä¸Šå›¾æ˜¾ç¤ºçš„Info.plistä¸­NSExtensionéœ€è¦å°†NSExtensionMainStoryboardåˆ æ‰,è§£é™¤ä¸storyboardçš„å…³è”</p>
<p>ä¾‹å­ä¸­ç”¨çš„storyboardæ„å»ºUIã€‚ å½“æˆ‘ä»¬éœ€è¦ä¸APPé€šä¿¡æ—¶ã€‚éœ€è¦ç”¨åˆ° URL Shchemesã€‚</p>
<h2 id="é¦–å…ˆç»™labelæ·»åŠ æ‰‹åŠ¿"><a href="#é¦–å…ˆç»™labelæ·»åŠ æ‰‹åŠ¿" class="headerlink" title="é¦–å…ˆç»™labelæ·»åŠ æ‰‹åŠ¿"></a>é¦–å…ˆç»™labelæ·»åŠ æ‰‹åŠ¿</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">widgetLabel.addGestureRecognizer(<span class="type">UITapGestureRecognizer</span>.<span class="keyword">init</span>(target: <span class="keyword">self</span></div><div class="line">            , action: #selector(<span class="type">TodayViewController</span>.widgetLabelAction)))</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@objc private  func widgetLabelAction() -&gt; Void &#123;</div><div class="line">       extensionContext?.open(NSURL(string: &quot;simple://finished&quot;) as! URL, completionHandler: nil)</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<h2 id="è®¾ç½®URL-Schemes"><a href="#è®¾ç½®URL-Schemes" class="headerlink" title="è®¾ç½®URL Schemes"></a>è®¾ç½®URL Schemes</h2><p><img src="http://upload-images.jianshu.io/upload_images/1421047-a28aeabf864d2fc2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ20160923-4@2x.png"></p>
<p>è¿è¡Œç¨‹åº</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1421047-108a96a4f30cd1bf.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="IMG_0609.PNG"></p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨widgetä¸­æ·»åŠ è‡ªå·±çš„APPæ˜¾ç¤ºä¿¡æ¯äº†</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.png"
               alt="Sunshine" />
          <p class="site-author-name" itemprop="name">Sunshine</p>
          <p class="site-description motion-element" itemprop="description">åšä¸€ä¸ªæœ‰æ–‡è‰ºæ°”æ¯çš„ç¨‹åºçŒ¿</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">12</span>
              <span class="site-state-item-name">æ—¥å¿—</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">åˆ†ç±»</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/sunshineLixun" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sunshine</span>
</div>

<div class="powered-by">
  ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
